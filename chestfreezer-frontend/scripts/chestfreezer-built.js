/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/**
 * bootbox.js v4.2.0
 *
 * http://bootboxjs.com/license.txt
 */

/*
 CanvasJS HTML5 & JavaScript Charts - v1.4.0 GA - http://canvasjs.com/ 
 Copyright 2013 fenopix
*/

/*
  excanvas is used to support IE678 which do not implement HTML5 Canvas Element. You can safely remove the following excanvas code if you don't need to support older browsers.

  Copyright 2006 Google Inc. https://code.google.com/p/explorercanvas/
  Licensed under the Apache License, Version 2.0
*/

/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

//     Underscore.js 1.3.3
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore

/**
 * @license Handlebars hbs 0.4.0 - Alex Sexton, but Handlebars has it's own licensing junk
 *
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/require-cs for details on the plugin this was based off of
 */

function pushTempReadingIntoDatapoints(t,e,i){for(n in t.chartData)dataForProbe=t.chartData[n],dataForProbe.name.indexOf(e.getProbeNameForProbeId(i.probe_id))>-1&&dataForProbe.dataPoints.push({x:1e3*i.timestamp,y:parseFloat(i.temperature_C)})}function fetchTemperatures(t,e,i,n,a,s){t.updateTemperaturesForTime(a,s,function(t){pushTempReadingIntoDatapoints(e,n,t),n.isMasterTemperature(t)&&i.setCurrentTemperature(tempReading.temperature_C),i.chart.render()})}function initializeChart(t,e){t.chartData=[];for(var i in t.probes){var n=t.probes[i];probeName="True"==n.master?n.name+"(master)":n.name,t.chartData.push({type:"line",xValueType:"dateTime",showInLegend:!0,name:probeName,dataPoints:[]})}e.initializeChart(t.chartData)}function instructionAndTargetTemperatureThredWork(t,e,i,n){updateInstructions(t,e,i),updateTargetTemperature(t,e),n.log("Updated instruction and target temperature")}function startInstructionAndTargetTemperatureUpdateThread(t,e,i,n,a){instructionAndTargetTemperatureThredWork(t,e,i,a),setInterval(function(){instructionAndTargetTemperatureThredWork(t,e,i,a)},1e3*n.instructionUpdateIntervalSeconds)}function startTemperatureUpdateThread(t,e,i,n,a,s){setInterval(function(){startMillis=n.getCurrentUnixTimestamp()-a.temperatureUpdateIntervalSeconds,endMillis=n.getCurrentUnixTimestamp(),fetchTemperatures(t,i,e,n,startMillis,endMillis),s.log("Updated temperature readings",!0)},1e3*a.temperatureUpdateIntervalSeconds)}function setDeviceSelectorEvent(t,e,i,n,a){$("#"+a+"-selector");$(document).on("change","#"+a+"-selector",function(){value=$(this).val(),"AUTO"==value?(t.removeDeviceOverride(a),n.log("Removed "+a+"'s override")):"ON"==value?(t.setDeviceOverridenState(a,!0),n.log("Manually turned "+a+" on")):"OFF"==value&&(t.setDeviceOverridenState(a,!1),n.log("Manually turned "+a+" off")),updateDeviceInfo(t,e,i)})}function setStatusPanelEvents(t,e,i,n,a){$(document).on("keypress","#taget-temperature-textfield",function(t){n.allowEventOnlyOnFloats(t)}),$("#taget-temperature-checkbox").change(function(){this.checked?e.enableTemperatureOverridePanel(!0):(t.removeTemperatureOverride(),updateTargetTemperature(t,e),a.log("Removed temperature override"))}),$("#taget-temperature-button").click(function(){var i=$("#taget-temperature-textfield").val();i&&(t.setTemperatureOverride(i),updateTargetTemperature(t,e),a.log("Set temperature override to "+i+" ℃"))}),setDeviceSelectorEvent(t,e,i,a,"freezer"),setDeviceSelectorEvent(t,e,i,a,"heater")}function updateAfterInstructionChanged(t,e,i){updateInstructions(t,e,i),updateTargetTemperature(t,e)}function setInstructionEvents(t,e,i,n){$("#instruction-menu-button").click(function(){return e.setActiveMenuButton(this),updateInstructions(t,e,i),!1}),$(document).on("keypress","#targetTemperature",function(t){n.allowEventOnlyOnFloats(t)}),$(document).on("click","#instructions-table tbody tr",function(){if(e.setInstructionRowHighlighted($(this)),$(this).attr("class").indexOf("table-highlight")>-1){i.selected_instruction_id=$(".table-highlight").children(".id-cell").html();var t=n.getInstructionForId(i.selected_instruction_id);e.setInstructionForm(t)}else i.selected_instruction_id=void 0,e.setInstructionForm()}),$(document).on("click","#save-instruction",function(){try{formData=n.evaluateInstructionFormAndGetData(),void 0==i.selected_instruction_id?(t.createNewInstruction(formData),log.log("New instruction created")):(t.updateInstruction(formData,i.selected_instruction_id),log.log("instruction #"+i.selected_instruction_id+" updated")),updateAfterInstructionChanged(t,e,i)}catch(a){e.alert(a.message)}return!1}),$("#delete-instruction").on("click",function(){return void 0==!data.selected_instruction_id&&(t.deleteInstruction(data.selected_instruction_id),updateAfterInstructionChanged(t,e,i),log.log("instruction #"+i.selected_instruction_id+" deleted")),!1})}function setProbeEvents(t,e,i,a,s){$("#probe-menu-button").click(function(){return e.setActiveMenuButton(this),t.updateProbeInfo(function(){e.showProbes(i.probes)}),!1}),$(document).on("click","input.master-checkbox",function(t){$("input.master-checkbox").removeAttr("checked"),$(t.target).prop("checked",!0)}),$(document).on("click","#update-probe-button",function(){var r=!1;if(probeList=e.getProbesFromTable(),!a.isAnyProbeMaster(probeList))return void e.alert("Error: At least one probe must be set to master!");for(n in probeList)probeFromTable=probeList[n],a.hasChanged(probeFromTable)&&(t.updateProbe(probeFromTable),r=!0);r&&t.updateProbeInfo(function(){e.showProbes(i.probes),initializeChart(i,e),e.alert("Probe(s) updated succesfully"),s.log("Updated probes")})})}function updateInstructions(t,e,i){t.updateInstructions(function(){e.showInstructions(i.instructions),e.displayActiveInstruction(i.active_instruction)})}function setLogEvents(t,e,i,n){$(document).on("change","#dont-show-temp-updates",function(){n.dontShowTemperatureEvents=this.checked,e.refreshLog()}),$("#log-menu-button").click(function(){return e.setActiveMenuButton(this),e.showLog(),!1})}function setEvents(t,e,i,n,a){setStatusPanelEvents(t,e,i,n,a),setInstructionEvents(t,e,i,n,a),setProbeEvents(t,e,i,n,a),setLogEvents(t,e,n,a)}function updateTargetTemperature(t,e){t.getTargetTemperature(function(t,i){e.setTargetTemperature(t,i)})}function updateDeviceInfo(t,e,i){t.updateDeviceInfo(function(){e.updateDevices(i.devices)})}function main(t,e,i,n,a,s,r){s.showMainPageForUser(a.username),i.updateProbeInfo(function(){initializeChart(n,s)}),updateDeviceInfo(i,s,n),s.initializeGauge(),r.log("Data initialized"),setEvents(i,s,n,e,r),startTemperatureUpdateThread(i,s,n,e,a,r),startInstructionAndTargetTemperatureUpdateThread(i,s,n,a,r),r.log("Main function end")}define("domReady",[],function(){function t(t){var e;for(e=0;e<t.length;e+=1)t[e](h)}function e(){var e=c;l&&e.length&&(c=[],t(e))}function i(){l||(l=!0,r&&clearInterval(r),e())}function n(t){return l?t(h):c.push(t),n}var a,s,r,o="undefined"!=typeof window&&window.document,l=!o,h=o?document:null,c=[];if(o){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),s=document.createElement("div");try{a=null===window.frameElement}catch(u){}s.doScroll&&a&&window.external&&(r=setInterval(function(){try{s.doScroll(),i()}catch(t){}},30))}"complete"===document.readyState&&i()}return n.version="2.0.1",n.load=function(t,e,i,a){a.isBuild?i(null):n(i)},n});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,n,a,s,r,o,l="",h=0;for(t=Base64._utf8_encode(t);h<t.length;)e=t.charCodeAt(h++),i=t.charCodeAt(h++),n=t.charCodeAt(h++),a=e>>2,s=(3&e)<<4|i>>4,r=(15&i)<<2|n>>6,o=63&n,isNaN(i)?r=o=64:isNaN(n)&&(o=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(r)+this._keyStr.charAt(o);return l},decode:function(t){var e,i,n,a,s,r,o,l="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)a=this._keyStr.indexOf(t.charAt(h++)),s=this._keyStr.indexOf(t.charAt(h++)),r=this._keyStr.indexOf(t.charAt(h++)),o=this._keyStr.indexOf(t.charAt(h++)),e=a<<2|s>>4,i=(15&s)<<4|r>>2,n=(3&r)<<6|o,l+=String.fromCharCode(e),64!=r&&(l+=String.fromCharCode(i)),64!=o&&(l+=String.fromCharCode(n));return l=Base64._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},_utf8_decode:function(t){for(var e="",i=0,n=c1=c2=0;i<t.length;)n=t.charCodeAt(i),128>n?(e+=String.fromCharCode(n),i++):n>191&&224>n?(c2=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return e}};define("Base64",function(t){return function(){var e;return e||t.Base64}}(this)),define("model",{devices:[],probes:[],instructions:[],active_instruction:{},chartData:[]}),define("utils",["jquery","Base64","model"],function(t,e,i){return{getBasicAuthCredentials:function(t,i){var n=t+":"+i,a=e.encode(n);return"Basic "+a},isMasterTemperature:function(t){var e;for(var n in i.probes)if(probe=i.probes[n],"True"==probe.master){e=probe.probe_id;break}return void 0==e?!1:t.probe_id==e},getProbeNameForProbeId:function(t){var e=this.getProbeForId(t);return void 0!=e?e.name:void 0},getProbeForId:function(t){for(var e in i.probes)if(probe=i.probes[e],probe.probe_id==t)return probe},allowEventOnlyOnFloats:function(e){(e.which<46||e.which>59)&&e.preventDefault(),46==e.which&&-1!=t(this).val().indexOf(".")&&e.preventDefault()},capitaliseFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},isAnyProbeMaster:function(t){for(var e in t)if(probe=t[e],"True"==probe.master)return!0;return!1},hasChanged:function(t){var e=this.getProbeForId(t.probe_id);return void 0==e?!1:!(e.name==t.name&&e.master==t.master)},getTextBetween:function(t,e,i){var n=t.indexOf(e)+1,a=test_str.indexOf(i,n);return test_str.substring(n,a)},getNowPretyDateTime:function(){return this.getUnixTimestampAsPrettyDate(this.getCurrentUnixTimestamp())},getUnixTimestampAsPrettyDate:function(t){return void 0==t?"":moment(new Date(1e3*t)).format("DD/MM/YYYY h:mm A")},getCurrentUnixTimestamp:function(){return Math.round(+new Date/1e3)},getInstructionForId:function(t){for(var e in i.instructions)if(i.instructions[e].instruction_id==t)return i.instructions[e];return{}},evaluateInstructionFormAndGetData:function(){if(targetTemperature=t("#targetTemperature").val(),description=t("#description").val(),datetimeFrom=t("#datetime-from-value").val(),datetimeTo=t("#datetime-to-value").val(),!targetTemperature||!datetimeFrom||!datetimeTo)throw new Exception("Missing instruction value(s)!");return fromTimestamp=new Date(datetimeFrom).getTime()/1e3,toTimestamp=new Date(datetimeTo).getTime()/1e3,"target_temperature_C="+targetTemperature+"&description="+description+"&from_timestamp="+fromTimestamp+"&to_timestamp="+toTimestamp}}}),define("configuration",{rootUrl:"http://localhost:8080/chestfreezer/api",temperatureUpdateIntervalSeconds:3,instructionUpdateIntervalSeconds:60,showLoginForm:!1,username:"test-username",password:"test-password"}),define("log",["jquery","utils"],function(t,e){return{logEvents:[],dontShowTemperatureEvents:!1,log:function(t,i){console.log(t),void 0==i&&(i=!1),this.logEvents.push({message:e.getNowPretyDateTime()+" : "+t,tempEvent:i})},getAll:function(){resultingHtml="";for(n in this.logEvents)event=this.logEvents[n],1==event.tempEvent&&this.dontShowTemperatureEvents||(prefix="\n",resultingHtml||(prefix=""),resultingHtml+=prefix+event.message);return resultingHtml}}}),!function(t,e){"function"==typeof define&&define.amd?define("bootbox",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function t(e,i){function n(t){var e=f[m.locale];return e?e[t]:f.en[t]}function a(t,i,n){t.stopPropagation(),t.preventDefault();var a=e.isFunction(n)&&n(t)===!1;a||i.modal("hide")}function s(t){var e,i=0;for(e in t)i++;return i}function r(t,i){var n=0;e.each(t,function(t,e){i(t,e,n++)})}function o(t){var i,n;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=e.extend({},m,t),t.buttons||(t.buttons={}),t.backdrop=t.backdrop?"static":!1,i=t.buttons,n=s(i),r(i,function(t,a,s){if(e.isFunction(a)&&(a=i[t]={callback:a}),"object"!==e.type(a))throw new Error("button with key "+t+" must be an object");a.label||(a.label=t),a.className||(a.className=2>=n&&s===n-1?"btn-primary":"btn-default")}),t}function l(t,e){var i=t.length,n={};if(1>i||i>2)throw new Error("Invalid argument length");return 2===i||"string"==typeof t[0]?(n[e[0]]=t[0],n[e[1]]=t[1]):n=t[0],n}function h(t,i,n){return e.extend(!0,{},t,l(i,n))}function c(t,e,i,n){var a={className:"bootbox-"+t,buttons:u.apply(null,e)};return d(h(a,n,i),e)}function u(){for(var t={},e=0,i=arguments.length;i>e;e++){var a=arguments[e],s=a.toLowerCase(),r=a.toUpperCase();t[s]={label:n(r)}}return t}function d(t,e){var n={};return r(e,function(t,e){n[e]=!0}),r(t.buttons,function(t){if(n[t]===i)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},m={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},x={};x.alert=function(){var t;if(t=c("alert",["ok"],["message","callback"],arguments),t.callback&&!e.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return e.isFunction(t.callback)?t.callback():!0},x.dialog(t)},x.confirm=function(){var t;if(t=c("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback(!1)},t.buttons.confirm.callback=function(){return t.callback(!0)},!e.isFunction(t.callback))throw new Error("confirm requires a callback");return x.dialog(t)},x.prompt=function(){var t,n,a,s,o,l,c;s=e(p.form),n={className:"bootbox-prompt",buttons:u("cancel","confirm"),value:"",inputType:"text"},t=d(h(n,arguments,["title","callback"]),["cancel","confirm"]),l=t.show===i?!0:t.show;var m=["date","time","number"],f=document.createElement("input");if(f.setAttribute("type",t.inputType),m[t.inputType]&&(t.inputType=f.type),t.message=s,t.buttons.cancel.callback=t.onEscape=function(){return t.callback(null)},t.buttons.confirm.callback=function(){var i;switch(t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":i=o.val();break;case"checkbox":var n=o.find("input:checked");i=[],r(n,function(t,n){i.push(e(n).val())})}return t.callback(i)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");if(!p.inputs[t.inputType])throw new Error("invalid prompt type");switch(o=e(p.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":o.val(t.value);break;case"select":var g={};if(c=t.inputOptions||[],!c.length)throw new Error("prompt with select requires options");r(c,function(t,n){var a=o;if(n.value===i||n.text===i)throw new Error("given options in wrong format");n.group&&(g[n.group]||(g[n.group]=e("<optgroup/>").attr("label",n.group)),a=g[n.group]),a.append("<option value='"+n.value+"'>"+n.text+"</option>")}),r(g,function(t,e){o.append(e)}),o.val(t.value);break;case"checkbox":var v=e.isArray(t.value)?t.value:[t.value];if(c=t.inputOptions||[],!c.length)throw new Error("prompt with checkbox requires options");if(!c[0].value||!c[0].text)throw new Error("given options in wrong format");o=e("<div/>"),r(c,function(i,n){var a=e(p.inputs[t.inputType]);a.find("input").attr("value",n.value),a.find("label").append(n.text),r(v,function(t,e){e===n.value&&a.find("input").prop("checked",!0)}),o.append(a)})}return t.placeholder&&o.attr("placeholder",t.placeholder),t.pattern&&o.attr("pattern",t.pattern),s.append(o),s.on("submit",function(t){t.preventDefault(),a.find(".btn-primary").click()}),a=x.dialog(t),a.off("shown.bs.modal"),a.on("shown.bs.modal",function(){o.focus()}),l===!0&&a.modal("show"),a},x.dialog=function(t){t=o(t);var i=e(p.dialog),n=i.find(".modal-body"),s=t.buttons,l="",h={onEscape:t.onEscape};if(r(s,function(t,e){l+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",h[t]=e.callback}),n.find(".bootbox-body").html(t.message),t.animate===!0&&i.addClass("fade"),t.className&&i.addClass(t.className),t.title&&n.before(p.header),t.closeButton){var c=e(p.closeButton);t.title?i.find(".modal-header").prepend(c):c.css("margin-top","-10px").prependTo(n)}return t.title&&i.find(".modal-title").html(t.title),l.length&&(n.after(p.footer),i.find(".modal-footer").html(l)),i.on("hidden.bs.modal",function(t){t.target===this&&i.remove()}),i.on("shown.bs.modal",function(){i.find(".btn-primary:first").focus()}),i.on("escape.close.bb",function(t){h.onEscape&&a(t,i,h.onEscape)}),i.on("click",".modal-footer button",function(t){var n=e(this).data("bb-handler");a(t,i,h[n])}),i.on("click",".bootbox-close-button",function(t){a(t,i,h.onEscape)}),i.on("keyup",function(t){27===t.which&&i.trigger("escape.close.bb")}),e(t.container).append(i),i.modal({backdrop:t.backdrop,keyboard:!1,show:!1}),t.show&&i.modal("show"),i},x.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(m,t)},x.hideAll=function(){e(".bootbox").modal("hide")};var f={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return x.init=function(i){return t(i||e)},x}),function(){function t(t,i){t.prototype=e(i.prototype),t.prototype.constructor=t,t.parent=i.prototype}function e(t){function e(){}return e.prototype=t,new e}function n(t,e,i){return"millisecond"===i?t.setMilliseconds(t.getMilliseconds()+1*e):"second"===i?t.setSeconds(t.getSeconds()+1*e):"minute"===i?t.setMinutes(t.getMinutes()+1*e):"hour"===i?t.setHours(t.getHours()+1*e):"day"===i?t.setDate(t.getDate()+1*e):"week"===i?t.setDate(t.getDate()+7*e):"month"===i?t.setMonth(t.getMonth()+1*e):"year"===i&&t.setFullYear(t.getFullYear()+1*e),t}function a(t,e){return O[e+"Duration"]*t}function s(t,e){var i=!1;for(0>t&&(i=!0,t*=-1),t=""+t,e=e?e:1;t.length<e;)t="0"+t;return i?"-"+t:t}function r(t){if(!t)return t;t=t.replace(/^\s\s*/,"");for(var e=/\s/,i=t.length;e.test(t.charAt(--i)););return t.slice(0,i+1)}function o(t){t.roundRect=function(t,e,i,n,a,s,r,o){r&&(this.fillStyle=r),o&&(this.strokeStyle=o),"undefined"==typeof a&&(a=5),this.lineWidth=s,this.beginPath(),this.moveTo(t+a,e),this.lineTo(t+i-a,e),this.quadraticCurveTo(t+i,e,t+i,e+a),this.lineTo(t+i,e+n-a),this.quadraticCurveTo(t+i,e+n,t+i-a,e+n),this.lineTo(t+a,e+n),this.quadraticCurveTo(t,e+n,t,e+n-a),this.lineTo(t,e+a),this.quadraticCurveTo(t,e,t+a,e),this.closePath(),r&&this.fill(),o&&s>0&&this.stroke()}}function l(t,e){return t-e}function h(t,e){return t.x-e.x}function c(t){var e=((16711680&t)>>16).toString(16),i=((65280&t)>>8).toString(16);return t=((255&t)>>0).toString(16),e=2>e.length?"0"+e:e,i=2>i.length?"0"+i:i,t=2>t.length?"0"+t:t,"#"+e+i+t}function u(t,e,i){i=i||"normal";var n=t+"_"+e+"_"+i,a=z[n];if(isNaN(a)){try{if(t="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+t+"; font-size:"+e+"px; font-weight:"+i+";",!N){var s=document.body;N=document.createElement("span"),N.innerHTML="";var r=document.createTextNode("Mpgyi");N.appendChild(r),s.appendChild(N)}N.style.display="",N.setAttribute("style",t),a=Math.round(N.offsetHeight),N.style.display="none"}catch(o){a=Math.ceil(1.1*e)}a=Math.max(a,e),z[n]=a}return a}function d(t,e,i,n){if(t.addEventListener)t.addEventListener(e,i,n||!1);else{if(!t.attachEvent)return!1;t.attachEvent("on"+e,function(e){e=e||window.event,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},i.call(t,e)})}}function p(t,e,i){for(t*=V,e*=V,t=i.getImageData(t,e,2,2).data,e=!0,i=0;4>i;i++)if(t[i]!==t[i+4]|t[i]!==t[i+8]|t[i]!==t[i+12]){e=!1;break}return e?t[0]<<16|t[1]<<8|t[2]:0}function m(t,e,i){var n;n=t?t+"FontStyle":"fontStyle";var a=t?t+"FontWeight":"fontWeight",s=t?t+"FontSize":"fontSize";return t=t?t+"FontFamily":"fontFamily",n=""+(e[n]?e[n]+" ":i&&i[n]?i[n]+" ":""),n+=e[a]?e[a]+" ":i&&i[a]?i[a]+" ":"",n+=e[s]?e[s]+"px ":i&&i[s]?i[s]+"px ":"",e=e[t]?e[t]+"":i&&i[t]?i[t]+"":"",!L&&e&&(e=e.split(",")[0],"'"!==e[0]&&'"'!==e[0]&&(e="'"+e+"'")),n+=e}function x(t,e,i){return t in e?e[t]:i[t]}function f(t,e,i){if(L&&R){var n=t.getContext("2d");U=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,V=W/U,t.width=e*V,t.height=i*V,W!==U&&(t.style.width=e+"px",t.style.height=i+"px",n.scale(V,V))}else t.width=e,t.height=i}function g(t,e){var i=document.createElement("canvas");return i.setAttribute("class","canvasjs-chart-canvas"),f(i,t,e),L||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(i),i}function v(t,e,i){this._defaultsKey=t;var n={};i&&D[i]&&D[i][t]&&(n=D[i][t]),this._options=e?e:{},this.setOptions(this._options,n)}function y(t,e){e=e||{},y.parent.constructor.call(this,"Chart",e,e.theme?e.theme:"theme1");var i=this;if(this._containerId=t,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this._container=document.getElementById(this._containerId)){this._container.innerHTML="";var n=0,a=0,n=this._options.width?this.width:0<this._container.clientWidth?this._container.clientWidth:this.width,a=this._options.height?this.height:0<this._container.clientHeight?this._container.clientHeight:this.height;if(this.width=n,this.height=a,this._selectedColorSet="undefined"!=typeof X[this.colorSet]?X[this.colorSet]:X.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",L||(this._canvasJSContainer.style.height="0px"),this._container.appendChild(this._canvasJSContainer),this.canvas=g(n,a),this.canvas.style.position="absolute",this.canvas.getContext){try{this.canvas.style.background=this.backgroundColor}catch(s){}this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",o(this.ctx),L?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=g(n,a),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=g(n,a),this.overlaidCanvas.style.position="absolute",this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",this._eventManager=new I(this),d(window,"resize",function(){i._updateSize()&&i.render()}),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.position="absolute",this._toolBar.style.top="0px",this._toolBar.style.right="0px",this._canvasJSContainer.appendChild(this._toolBar),this._toolBar.style.display="none",this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},d(this.overlaidCanvas,"click",function(t){i._mouseEventHandler(t)}),d(this.overlaidCanvas,"mousemove",function(t){i._mouseEventHandler(t)}),d(this.overlaidCanvas,"mouseup",function(t){i._mouseEventHandler(t)}),d(this.overlaidCanvas,"mousedown",function(t){i._mouseEventHandler(t)}),d(this.overlaidCanvas,"mouseout",function(t){i._mouseEventHandler(t)}),d(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(t){i._touchEventHandler(t)}),d(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(t){i._touchEventHandler(t)}),d(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(t){i._touchEventHandler(t)}),d(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(t){i._touchEventHandler(t)}),this._creditLink||(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("class","canvasjs-chart-credit"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(this.height-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("target","_blank")),this._toolTip=new A(this,this._options.toolTip,this.theme),this.layoutManager=new T(this),this.axisY2=this.axisY=this.axisX=this.data=null,this.renderCount=0,this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}}}}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function b(t,e){for(var i=[],n=0;n<t.length;n++)if(0==n)i.push(t[0]);else{var a,s,r;r=n-1,a=0===r?0:r-1,s=r===t.length-1?r:r+1,i[i.length]={x:t[r].x+(t[s].x-t[a].x)/e/3,y:t[r].y+(t[s].y-t[a].y)/e/3},r=n,a=0===r?0:r-1,s=r===t.length-1?r:r+1,i[i.length]={x:t[r].x-(t[s].x-t[a].x)/e/3,y:t[r].y-(t[s].y-t[a].y)/e/3},i[i.length]=t[n]}return i}function T(t){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=0,this.chart=t}function P(t,e){P.parent.constructor.call(this,"TextBlock",e),this.ctx=t,this._isDirty=!0,this._wrappedText=null,this._lineHeight=u(this.fontFamily,this.fontSize,this.fontWeight)}function k(t,e){k.parent.constructor.call(this,"Title",e,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function S(t,e,i){S.parent.constructor.call(this,"Legend",e,i),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.height=this.width=0,this.orientation=null,this.horizontalSpacing=10,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=u(this.fontFamily,this.fontSize,this.fontWeight)}function _(t,e){_.parent.constructor.call(this,e),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx}function C(t,e,i,n,a){C.parent.constructor.call(this,"DataSeries",e,i),this.chart=t,this.canvas=t.canvas,this._ctx=t.canvas.ctx,this.index=n,this.maxWidthInX=this.noDataPointsInPlotArea=0,this.id=a,this.chart._eventManager.objectMap[a]={id:a,objectType:"dataSeries",dataSeriesIndex:n},this.dataPointIds=[],this.axisY=this.axisX=null,this.axisPlacement=this.getDefaultAxisPlacement(),"undefined"==typeof this._options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function M(t,e,i,n){if(M.parent.constructor.call(this,"Axis",e,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=t.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},"axisX"===i?(this.sessionVariables=this.chart.sessionVariables[i],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===n||"top"===n?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2,"undefined"==typeof this._options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),"undefined"==typeof this._options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=i,"axisX"!==i||e&&"undefined"!=typeof e.gridThickness||(this.gridThickness=0),this._position=n,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:180<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:270<this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this._options.stripLines&&0<this._options.stripLines.length)for(this.stripLines=[],e=0;e<this._options.stripLines.length;e++)this.stripLines.push(new w(this.chart,this._options.stripLines[e],t.theme,++this.chart._eventManager.lastObjectId));this._absoluteMaximum=this._absoluteMinimum=this._titleTextBlock=null,this.hasOptionChanged("minimum")&&(this.sessionVariables.internalMinimum=this.minimum),this.hasOptionChanged("maximum")&&(this.sessionVariables.internalMaximum=this.maximum),this.trackChanges("minimum"),this.trackChanges("maximum")}function w(t,e,i,n){w.parent.constructor.call(this,"StripLine",e,i),this._thicknessType="pixel",this.id=n,null!==this.startValue&&null!==this.endValue&&(this.value=((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this.thickness=Math.max(this.endValue-this.startValue),this._thicknessType="value")}function A(t,e,i){A.parent.constructor.call(this,"ToolTip",e,i),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._timerId=0,this._prevY=this._prevX=0/0,this._initialize()}function I(t){this.chart=t,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=g(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function F(t,e){var i;e&&B[e]&&(i=B[e]),k.parent.constructor.call(this,"CultureInfo",i,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx}var L=!!document.createElement("canvas").getContext,E={Chart:{width:500,height:400,zoomEnabled:!1,backgroundColor:"white",theme:"theme1",animationEnabled:L?!0:!1,colorSet:"colorSet1",culture:"en",creditHref:"http://canvasjs.com/",creditText:"CanvasJS.com",interactivityEnabled:!0},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null},ToolTip:{enabled:!0,borderColor:null,shared:!1,animationEnabled:!0,content:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!1,labelWrap:!0,labelMaxWidth:null,prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,gridColor:"A0A0A0",gridThickness:0,interlacedColor:null,valueFormatString:null,margin:2,stripLines:[]},StripLine:{value:null,startValue:null,endValue:null,color:"orange",thickness:2,label:"",labelBackgroundColor:"#EEEEEE",labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal"},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,cursor:null,indexLabel:"",indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelMaxWidth:null,indexLabelWrap:!0,lineThickness:2,color:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}},B={en:{}},X={colorSet1:"#369EAD #C24642 #7F6084 #86B402 #A2D1CF #C8B631 #6DBCEB #52514E #4F81BC #A064A1 #F79647".split(" "),colorSet2:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #33558B".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},D={theme1:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:L?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:L?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontFamily:L?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:L?"monospace, sans-serif,arial black":"calibri"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:L?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineThickness:1}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:L?"monospace, sans-serif,arial black":"arial",titleFontWeight:"bold",labelFontFamily:L?"monospace, Courier New, Courier":"arial",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:L?"monospace, sans-serif,arial black":"arial"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:L?"Courier New, Courier, monospace":"arial",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineThickness:1}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:L?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:32,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:L?"Verdana, Geneva, Calibri, sans-serif":"calibri",labelFontFamily:L?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:L?"monospace, sans-serif,arial black":"calibri"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:L?"Candara, Optima, Calibri, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},O={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")},z={},N=null,j=function(){var t=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),i="Sun Mon Tue Wed Thu Fri Sat".split(" "),n="January February March April May June July August September October November December".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),r=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;
return function(l,h,c){var u=c?c.days:e,d=c?c.months:n,p=c?c.shortDays:i,m=c?c.shortMonths:a;c="";var x=!1;if(l=l&&l.getTime?l:l?new Date(l):new Date,isNaN(l))throw SyntaxError("invalid date");"UTC:"===h.slice(0,4)&&(h=h.slice(4),x=!0),c=x?"getUTC":"get";var f=l[c+"Date"](),g=l[c+"Day"](),v=l[c+"Month"](),y=l[c+"FullYear"](),b=l[c+"Hours"](),T=l[c+"Minutes"](),P=l[c+"Seconds"](),k=l[c+"Milliseconds"](),S=x?0:l.getTimezoneOffset();return c=h.replace(t,function(t){switch(t){case"D":return f;case"DD":return s(f,2);case"DDD":return p[g];case"DDDD":return u[g];case"M":return v+1;case"MM":return s(v+1,2);case"MMM":return m[v];case"MMMM":return d[v];case"Y":return parseInt(String(y).slice(-2));case"YY":return s(String(y).slice(-2),2);case"YYY":return s(String(y).slice(-3),3);case"YYYY":return s(y,4);case"h":return b%12||12;case"hh":return s(b%12||12,2);case"H":return b;case"HH":return s(b,2);case"m":return T;case"mm":return s(T,2);case"s":return P;case"ss":return s(P,2);case"f":return String(k).slice(0,1);case"ff":return s(String(k).slice(0,2),2);case"fff":return s(String(k).slice(0,3),3);case"t":return 12>b?"a":"p";case"tt":return 12>b?"am":"pm";case"T":return 12>b?"A":"P";case"TT":return 12>b?"AM":"PM";case"K":return x?"UTC":(String(l).match(r)||[""]).pop().replace(o,"");case"z":return(S>0?"-":"+")+Math.floor(Math.abs(S)/60);case"zz":return(S>0?"-":"+")+s(Math.floor(Math.abs(S)/60),2);case"zzz":return(S>0?"-":"+")+s(Math.floor(Math.abs(S)/60),2)+s(Math.abs(S)%60,2);default:return t.slice(1,t.length-1)}})}}(),Y=function(t,e,i){if(null===t)return"";t=Number(t);var n=0>t?!0:!1;n&&(t*=-1);var a=i?i.decimalSeparator:".",r=i?i.digitGroupSeparator:",",o="";e=String(e);var o=1,l=i="",h=-1,c=[],u=[],d=0,p=0,m=0,x=!1,f=0,l=e.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);e=null;for(var g=0;l&&g<l.length;g++)if(e=l[g],"."===e&&0>h)h=g;else{if("%"===e)o*=100;else{if("‰"===e){o*=1e3;continue}if(","===e[0]&&"."===e[e.length-1]){o/=Math.pow(1e3,e.length-1),h=g+e.length-1;continue}"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||(x=!0)}0>h?(c.push(e),"#"===e||"0"===e?d++:","===e&&m++):(u.push(e),"#"!==e&&"0"!==e||p++)}for(x&&(e=Math.floor(t),f=(0===e?"":String(e)).length-d,o/=Math.pow(10,f)),0>h&&(h=g),o=(t*o).toFixed(p),e=o.split("."),o=(e[0]+"").split(""),t=(e[1]+"").split(""),o&&"0"===o[0]&&o.shift(),g=x=l=p=h=0;0<c.length;)if(e=c.pop(),"#"===e||"0"===e)if(h++,h===d){var v=o,o=[];if("0"===e)for(e=d-p-(v?v.length:0);e>0;)v.unshift("0"),e--;for(;0<v.length;)i=v.pop()+i,g++,0===g%x&&l===m&&0<v.length&&(i=r+i);n&&(i="-"+i)}else 0<o.length?(i=o.pop()+i,p++,g++):"0"===e&&(i="0"+i,p++,g++),0===g%x&&l===m&&0<o.length&&(i=r+i);else"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?","===e?(l++,x=g,g=0,0<o.length&&(i=r+i)):i=1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?e.slice(1,e.length-1)+i:e+i:(e=0>f?e.replace("+","").replace("-",""):e.replace("-",""),i+=e.replace(/[0]+/,function(t){return s(f,t.length)}));for(n="",r=!1;0<u.length;)e=u.shift(),"#"===e||"0"===e?0<t.length&&0!==Number(t.join(""))?(n+=t.shift(),r=!0):"0"===e&&(n+="0",r=!0):1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?n+=e.slice(1,e.length-1):"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?n+=e:(e=0>f?e.replace("+","").replace("-",""):e.replace("-",""),n+=e.replace(/[0]+/,function(t){return s(f,t.length)}));return i+((r?a:"")+n)},H=function(t){var e=0,i=0;return t=t||window.event,t.offsetX||0===t.offsetX?(e=t.offsetX,i=t.offsetY):t.layerX||0==t.layerX?(e=t.layerX,i=t.layerY):(e=t.pageX-t.target.offsetLeft,i=t.pageY-t.target.offsetTop),{x:e,y:i}},R=!0,W=window.devicePixelRatio||1,U=1,V=R?W/U:1;v.prototype.setOptions=function(t,e){if(E[this._defaultsKey]){var i,n=E[this._defaultsKey];for(i in n)this[i]=t&&i in t?t[i]:e&&i in e?e[i]:n[i]}},v.prototype.updateOption=function(t){var e=E[this._defaultsKey],i=this._options.theme?this._options.theme:this.chart&&this.chart._options.theme?this.chart._options.theme:"theme1",n={},a=this[t];return i&&D[i]&&D[i][this._defaultsKey]&&(n=D[i][this._defaultsKey]),t in e&&(a=t in this._options?this._options[t]:n&&t in n?n[t]:e[t]),a===this[t]?!1:(this[t]=a,!0)},v.prototype.trackChanges=function(t){this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]=this._options[t]},v.prototype.isBeingTracked=function(t){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]?!0:!1},v.prototype.hasOptionChanged=function(t){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]!==this._options[t]},t(y,v),y.prototype._updateOptions=function(){var t=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("theme"),this.updateOption("colorSet")&&(this._selectedColorSet="undefined"!=typeof X[this.colorSet]?X[this.colorSet]:X.colorSet1),this.updateOption("backgroundColor"))try{this.canvas.style.background!==this.backgroundColor&&(this.canvas.style.background=this.backgroundColor)}catch(e){}if(this.updateOption("animationEnabled"),this._options.zoomEnabled?(this._zoomButton||(this._zoomButton=document.createElement("button"),this._zoomButton.appendChild(document.createTextNode("Pan")),this._toolBar.appendChild(this._zoomButton),d(this._zoomButton,"click",function(){t.zoomEnabled?(t.zoomEnabled=!1,t.panEnabled=!0,t._zoomButton.innerHTML=t._cultureInfo.zoomText):(t.zoomEnabled=!0,t.panEnabled=!1,t._zoomButton.innerHTML=t._cultureInfo.panText),t.render()})),this._resetButton||(this._resetButton=document.createElement("button"),this._resetButton.appendChild(document.createTextNode("Reset")),this._toolBar.appendChild(this._resetButton),d(this._resetButton,"click",function(){t._toolTip.hide(),t.zoomEnabled||t.panEnabled?(t.zoomEnabled=!0,t.panEnabled=!1,t._zoomButton.innerHTML=t._cultureInfo.panText,t._defaultCursor="default",t.overlaidCanvas.style.cursor=t._defaultCursor):(t.zoomEnabled=!1,t.panEnabled=!1),t.sessionVariables.axisX.internalMinimum=t._options.axisX&&t._options.axisX.minimum?t._options.axisX.minimum:null,t.sessionVariables.axisX.internalMaximum=t._options.axisX&&t._options.axisX.maximum?t._options.axisX.maximum:null,t.resetOverlayedCanvas(),t._toolBar.style.display="none",t.render()}),this.overlaidCanvas.style.cursor=t._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(t._zoomButton.innerHTML===t._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),t._toolBar.style.display="inline"):(this.zoomEnabled=!0,this.panEnabled=!1))):this.panEnabled=this.zoomEnabled=!1,this.updateOption("culture"),this._cultureInfo=new F(this,this._options.culture),"none"!==this._toolBar.style.display){var i=this.panEnabled?t._cultureInfo.zoomText:t._cultureInfo.panText;t._zoomButton.innerHTML!==i&&(t._zoomButton.innerHTML=i),t._resetButton.innerHTML!==t._cultureInfo.resetText&&(t._resetButton.innerHTML=t._cultureInfo.resetText)}var i=this.updateOption("creditText"),n=this.updateOption("creditHref");(0===this.renderCount||i||n)&&(this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText),this.creditHref&&this.creditText?this._creditLink.parentElement||this._canvasJSContainer.appendChild(this._creditLink):this._creditLink.parentElement&&this._canvasJSContainer.removeChild(this._creditLink),this._options.toolTip&&this._toolTip._options!==this._options.toolTip&&(this._toolTip._options=this._options.toolTip),this._toolTip.updateOption("enabled"),this._toolTip.updateOption("shared"),this._toolTip.updateOption("animationEnabled"),this._toolTip.updateOption("borderColor"),this._toolTip.updateOption("content")},y.prototype._updateSize=function(){var t=0,e=0;return this._options.width?t=this.width:this.width=t=0<this._container.clientWidth?this._container.clientWidth:this.width,this._options.height?e=this.height:this.height=e=0<this._container.clientHeight?this._container.clientHeight:this.height,this.canvas.width!==t*V||this.canvas.height!==e*V?(f(this.canvas,t,e),f(this.overlaidCanvas,t,e),f(this._eventManager.ghostCanvas,t,e),!0):!1},y.prototype._initialize=function(){this.pieDoughnutClickHandler=null,this.animationRequestId&&this.cancelRequestAnimFrame.call(window,this.animationRequestId),this._updateOptions(),this._updateSize(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.beginPath(),this.axisY2=this.axisY=this.axisX=null,this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]},this.layoutManager.reset(),this.data=[];for(var t=0,e=0;e<this._options.data.length;e++)if(t++,!this._options.data[e].type||0<=y._supportedChartTypes.indexOf(this._options.data[e].type)){var i=new C(this,this._options.data[e],this.theme,t-1,++this._eventManager.lastObjectId);null===i.name&&(i.name="DataSeries "+t),null===i.color?1<this._options.data.length?(i._colorSet=[this._selectedColorSet[i.index%this._selectedColorSet.length]],i.color=this._selectedColorSet[i.index%this._selectedColorSet.length]):i._colorSet="line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type?[this._selectedColorSet[0]]:this._selectedColorSet:i._colorSet=[i.color],null===i.markerSize&&(("line"===i.type||"stepLine"===i.type||"spline"===i.type)&&i.dataPoints&&i.dataPoints.length<this.width/16||"scatter"===i.type)&&(i.markerSize=8),"bubble"!==i.type&&"scatter"!==i.type||!i.dataPoints||i.dataPoints.sort(h),this.data.push(i);var n,a=i.axisPlacement;if("normal"===a?"xySwapped"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===a?"normal"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==a&&("normal"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none")),n&&window.console)return void window.console.log(n)}this._objectsInitialized=!0},y._supportedChartTypes="line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 pie doughnut".split(" "),y._supportedChartTypes.indexOf||(y._supportedChartTypes.indexOf=function(t,e){var i=this.length>>>0,n=Number(e)||0,n=0>n?Math.ceil(n):Math.floor(n);for(0>n&&(n+=i);i>n;n++)if(n in this&&this[n]===t)return n;return-1}),y.prototype.render=function(t){for(t&&(this._options=t),this._initialize(),t=0;t<this.data.length;t++)("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&(this.data[t].axisYType&&"primary"!==this.data[t].axisYType?"secondary"===this.data[t].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this.axisY2=new M(this,this._options.axisY2,"axisY","right"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY2=new M(this,this._options.axisY2,"axisY","top"))),this.data[t].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this.axisY=new M(this,this._options.axisY,"axisY","left"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY=new M(this,this._options.axisY,"axisY","bottom"))),this.data[t].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this.axisX=new M(this,this._options.axisX,"axisX","bottom"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisX=new M(this,this._options.axisX,"axisX","left"))),this.data[t].axisX=this.axisX);for(this._processData(),this._options.title&&(this._title=new k(this,this._options.title),this._title.render()),this.legend=new S(this,this._options.legend,this.theme),t=0;t<this.data.length;t++)this.data[t].showInLegend&&this.legend.dataSeries.push(this.data[t]);if(this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)this.layoutManager.getFreeSpace(),M.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(t=0;t<this.plotInfo.plotTypes.length;t++)for(var e=this.plotInfo.plotTypes[t],i=0;i<e.plotUnits.length;i++){var n=e.plotUnits[i];"line"===n.type?this.renderLine(n):"stepLine"===n.type?this.renderStepLine(n):"spline"===n.type?this.renderSpline(n):"column"===n.type?this.renderColumn(n):"bar"===n.type?this.renderBar(n):"area"===n.type?this.renderArea(n):"stepArea"===n.type?this.renderStepArea(n):"splineArea"===n.type?this.renderSplineArea(n):"stackedColumn"===n.type?this.renderStackedColumn(n):"stackedColumn100"===n.type?this.renderStackedColumn100(n):"stackedBar"===n.type?this.renderStackedBar(n):"stackedBar100"===n.type?this.renderStackedBar100(n):"stackedArea"===n.type?this.renderStackedArea(n):"stackedArea100"===n.type?this.renderStackedArea100(n):"bubble"===n.type?this.renderBubble(n):"scatter"===n.type?this.renderScatter(n):"pie"===n.type?this.renderPie(n):"doughnut"===n.type&&this.renderPie(n);for(var a=0;a<n.dataSeriesIndexes.length;a++)this._dataInRenderedOrder.push(this.data[n.dataSeriesIndexes[a]])}0<this._indexLabels.length&&this.renderIndexLabels(),this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||"none"===this._toolBar.style.display||(this._toolBar.style.display="none"),this._toolTip._updateToolTip(),this.renderCount++},y.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},y.prototype.categoriseDataSeries=function(){for(var t="",e=0;e<this.data.length;e++)if(t=this.data[e],t.dataPoints&&0!==t.dataPoints.length&&t.visible&&0<=y._supportedChartTypes.indexOf(t.type)){for(var i=null,n=!1,a=null,s=!1,r=0;r<this.plotInfo.plotTypes.length;r++)if(this.plotInfo.plotTypes[r].type===t.type){n=!0,i=this.plotInfo.plotTypes[r];break}for(n||(i={type:t.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(i)),r=0;r<i.plotUnits.length;r++)if(i.plotUnits[r].axisYType===t.axisYType){s=!0,a=i.plotUnits[r];break}s||(a={type:t.type,previousDataSeriesCount:0,index:i.plotUnits.length,plotType:i,axisYType:t.axisYType,axisY:"primary"===t.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[]},i.plotUnits.push(a)),i.totalDataSeries++,a.dataSeriesIndexes.push(e)}for(e=0;e<this.plotInfo.plotTypes.length;e++)for(i=this.plotInfo.plotTypes[e],r=t=0;r<i.plotUnits.length;r++)i.plotUnits[r].previousDataSeriesCount=t,t+=i.plotUnits[r].dataSeriesIndexes.length},y.prototype.assignIdToDataPoints=function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];if(e.dataPoints)for(var i=e.dataPoints.length,n=0;i>n;n++)e.dataPointIds[n]=++this._eventManager.lastObjectId}},y.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var t=0;t<this.plotInfo.plotTypes.length;t++)for(var e=this.plotInfo.plotTypes[t],i=0;i<e.plotUnits.length;i++){var n=e.plotUnits[i];"line"===n.type||"stepLine"===n.type||"spline"===n.type||"column"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"bar"===n.type||"bubble"===n.type||"scatter"===n.type?this._processMultiseriesPlotUnit(n):"stackedColumn"===n.type||"stackedBar"===n.type||"stackedArea"===n.type?this._processStackedPlotUnit(n):"stackedColumn100"!==n.type&&"stackedBar100"!==n.type&&"stackedArea100"!==n.type||this._processStacked100PlotUnit(n)}},y.prototype._processMultiseriesPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,i,n=t.axisY.dataInfo,a=t.axisX.dataInfo,s=!1,r=0;r<t.dataSeriesIndexes.length;r++){var o=this.data[t.dataSeriesIndexes[r]],l=0,h=!1,c=!1;if("normal"===o.axisPlacement||"xySwapped"===o.axisPlacement)var u=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,d=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((o.dataPoints[l].x&&o.dataPoints[l].x.getTime||"dateTime"===o.xValueType)&&(s=!0),l=0;l<o.dataPoints.length;l++){if("undefined"==typeof o.dataPoints[l].x&&(o.dataPoints[l].x=l),o.dataPoints[l].x.getTime?(s=!0,e=o.dataPoints[l].x.getTime()):e=o.dataPoints[l].x,i=o.dataPoints[l].y,e<a.min&&(a.min=e),e>a.max&&(a.max=e),i<n.min&&(n.min=i),i>n.max&&(n.max=i),l>0){var p=e-o.dataPoints[l-1].x;0>p&&(p*=-1),a.minDiff>p&&0!==p&&(a.minDiff=p)}if(!(u>e)||h){if(!h&&(h=!0,l>0)){l-=2;continue}if(e>d&&!c)c=!0;else if(e>d&&c)continue;o.dataPoints[l].label&&(t.axisX.labels[e]=o.dataPoints[l].label),e<a.viewPortMin&&(a.viewPortMin=e),e>a.viewPortMax&&(a.viewPortMax=e),null!==i&&(i<n.viewPortMin&&(n.viewPortMin=i),i>n.viewPortMax&&(n.viewPortMax=i))}}this.plotInfo.axisXValueType=o.xValueType=s?"dateTime":"number"}},y.prototype._processStackedPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,i,n=t.axisY.dataInfo,a=t.axisX.dataInfo,s=!1,r=[],o=[],l=0;l<t.dataSeriesIndexes.length;l++){var h=this.data[t.dataSeriesIndexes[l]],c=0,u=!1,d=!1;if("normal"===h.axisPlacement||"xySwapped"===h.axisPlacement)var p=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,m=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((h.dataPoints[c].x&&h.dataPoints[c].x.getTime||"dateTime"===h.xValueType)&&(s=!0),c=0;c<h.dataPoints.length;c++){if("undefined"==typeof h.dataPoints[c].x&&(h.dataPoints[c].x=c),h.dataPoints[c].x.getTime?(s=!0,e=h.dataPoints[c].x.getTime()):e=h.dataPoints[c].x,i=h.dataPoints[c].y,e<a.min&&(a.min=e),e>a.max&&(a.max=e),c>0){var x=e-h.dataPoints[c-1].x;0>x&&(x*=-1),a.minDiff>x&&0!==x&&(a.minDiff=x)}if(!(p>e)||u){if(!u&&(u=!0,c>0)){c-=2;continue}if(e>m&&!d)d=!0;else if(e>m&&d)continue;h.dataPoints[c].label&&(t.axisX.labels[e]=h.dataPoints[c].label),e<a.viewPortMin&&(a.viewPortMin=e),e>a.viewPortMax&&(a.viewPortMax=e),null!==i&&(i>=0?r[e]=r[e]?r[e]+i:i:o[e]=o[e]?o[e]+i:i)}}this.plotInfo.axisXValueType=h.xValueType=s?"dateTime":"number"}for(c in r)isNaN(c)||(t=r[c],t<n.min&&(n.min=t),t>n.max&&(n.max=t),c<a.viewPortMin||c>a.viewPortMax||(t<n.viewPortMin&&(n.viewPortMin=t),t>n.viewPortMax&&(n.viewPortMax=t)));for(c in o)isNaN(c)||(t=o[c],t<n.min&&(n.min=t),t>n.max&&(n.max=t),c<a.viewPortMin||c>a.viewPortMax||(t<n.viewPortMin&&(n.viewPortMin=t),t>n.viewPortMax&&(n.viewPortMax=t)))}},y.prototype._processStacked100PlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,i,n=t.axisY.dataInfo,a=t.axisX.dataInfo,s=!1,r=!1,o=!1,l=[],h=0;h<t.dataSeriesIndexes.length;h++){var c=this.data[t.dataSeriesIndexes[h]],u=0,d=!1,p=!1;if("normal"===c.axisPlacement||"xySwapped"===c.axisPlacement)var m=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,x=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((c.dataPoints[u].x&&c.dataPoints[u].x.getTime||"dateTime"===c.xValueType)&&(s=!0),u=0;u<c.dataPoints.length;u++){if("undefined"==typeof c.dataPoints[u].x&&(c.dataPoints[u].x=u),c.dataPoints[u].x.getTime?(s=!0,e=c.dataPoints[u].x.getTime()):e=c.dataPoints[u].x,i=c.dataPoints[u].y,e<a.min&&(a.min=e),e>a.max&&(a.max=e),u>0){var f=e-c.dataPoints[u-1].x;0>f&&(f*=-1),a.minDiff>f&&0!==f&&(a.minDiff=f)}if(!(m>e)||d){if(!d&&(d=!0,u>0)){u-=2;continue}if(e>x&&!p)p=!0;else if(e>x&&p)continue;c.dataPoints[u].label&&(t.axisX.labels[e]=c.dataPoints[u].label),e<a.viewPortMin&&(a.viewPortMin=e),e>a.viewPortMax&&(a.viewPortMax=e),null!==i&&(i>=0?r=!0:o=!0,l[e]=l[e]?l[e]+Math.abs(i):Math.abs(i))}}this.plotInfo.axisXValueType=c.xValueType=s?"dateTime":"number"}r&&!o?(n.max=99,n.min=1):r&&o?(n.max=99,n.min=-99):!r&&o&&(n.max=-1,n.min=-99),n.viewPortMin=n.min,n.viewPortMax=n.max,t.dataPointYSums=l}},y.prototype.getDataPointAtXY=function(t,e,i){i=i||!1;for(var n=[],a=this._dataInRenderedOrder.length-1;a>=0;a--){var s=null;(s=this._dataInRenderedOrder[a].getDataPointAtXY(t,e,i))&&n.push(s)}for(t=null,e=!1,i=0;i<n.length;i++)if(("line"===n[i].dataSeries.type||"stepLine"===n[i].dataSeries.type||"area"===n[i].dataSeries.type||"stepArea"===n[i].dataSeries.type)&&(a=x("markerSize",n[i].dataPoint,n[i].dataSeries)||8,n[i].distance<=a/2)){e=!0;break}for(i=0;i<n.length;i++)e&&"line"!==n[i].dataSeries.type&&"stepLine"!==n[i].dataSeries.type&&"area"!==n[i].dataSeries.type&&"stepArea"!==n[i].dataSeries.type||(t?n[i].distance<=t.distance&&(t=n[i]):t=n[i]);return t},y.prototype.getObjectAtXY=function(t,e,i){var n=null;if(i=this.getDataPointAtXY(t,e,i||!1))n=i.dataSeries.dataPointIds[i.dataPointIndex];else if(L)n=p(t,e,this._eventManager.ghostCtx);else for(i=0;i<this.legend.items.length;i++){var a=this.legend.items[i];t>=a.x1&&t<=a.x2&&e>=a.y1&&e<=a.y2&&(n=a.id)}return n},y.prototype.getAutoFontSize=function(t){return t/=400,Math.round(Math.min(this.width,this.height)*t)},y.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},y.prototype.attachEvent=function(t){this._events.push(t)},y.prototype._touchEventHandler=function(t){if(t.changedTouches&&this.interactivityEnabled){var e=[],i=t.changedTouches,n=i?i[0]:t,a=null;switch(t.type){case"touchstart":case"MSPointerDown":e=["mousemove","mousedown"],this._lastTouchData=H(n),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":e=["mousemove"];break;case"touchend":case"MSPointerUp":e="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}if(!(i&&1<i.length)){a=H(n),a.time=new Date;try{var s=a.y-this._lastTouchData.y,r=a.time-this._lastTouchData.time;if(15<Math.abs(s)&&(this._lastTouchData.scroll||200>r)){this._lastTouchData.scroll=!0;var o=window.parent||window;o&&o.scrollBy&&o.scrollBy(0,-s)}}catch(l){}if(this._lastTouchEventType=t.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(i=0;i<e.length;i++)a=e[i],s=document.createEvent("MouseEvent"),s.initMouseEvent(a,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(s),t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()}}},y.prototype._mouseEventHandler=function(t){if(this.interactivityEnabled){t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),"undefined"==typeof t.target&&t.srcElement&&(t.target=t.srcElement);var e,i,n=H(t),a=t.type;if(t.which?i=3==t.which:t.button&&(i=2==t.button),!i){if(y.capturedEventParam)e=y.capturedEventParam,"mouseup"===a&&(y.capturedEventParam=null,e.chart.overlaidCanvas.releaseCapture?e.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",e.chart._mouseEventHandler,!1)),e.hasOwnProperty(a)&&e[a].call(e.context,n.x,n.y);else if(this._events){for(i=0;i<this._events.length;i++)if(this._events[i].hasOwnProperty(a)){e=this._events[i];var s=e.bounds;if(n.x>=s.x1&&n.x<=s.x2&&n.y>=s.y1&&n.y<=s.y2){e[a].call(e.context,n.x,n.y),"mousedown"===a&&!0===e.capture?(y.capturedEventParam=e,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===a&&(e.chart.overlaidCanvas.releaseCapture?e.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}e=null}t.target.style.cursor=e&&e.cursor?e.cursor:this._defaultCursor}this._toolTip&&this._toolTip.enabled&&(a=this.plotArea,(n.x<a.x1||n.x>a.x2||n.y<a.y1||n.y>a.y2)&&this._toolTip.hide()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(t)}}},y.prototype._plotAreaMouseDown=function(t,e){this.isDrag=!0,this.dragStartPoint="none"!==this.plotInfo.axisPlacement?{x:t,y:e,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum}:{x:t,y:e}},y.prototype._plotAreaMouseUp=function(t,e){var i,n;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var a=0,a=this.axisX.lineCoordinates,a="xySwapped"===this.plotInfo.axisPlacement?e-this.dragStartPoint.y:this.dragStartPoint.x-t;if(Math.abs(this.axisX.maximum-this.axisX.minimum),2<Math.abs(a)){if(this.panEnabled)a=!1,n=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum?(n=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=n,this.axisX.sessionVariables.internalMaximum+=n,a=!0):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum&&(n=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum,this.axisX.sessionVariables.internalMaximum-=n,this.axisX.sessionVariables.internalMinimum-=n,a=!0),a&&this.render();else if(this.zoomEnabled){if(this.resetOverlayedCanvas(),!this.dragStartPoint)return;"xySwapped"===this.plotInfo.axisPlacement?(i=Math.min(this.dragStartPoint.y,e),n=Math.max(this.dragStartPoint.y,e),1<Math.abs(i-n)&&(a=this.axisX.lineCoordinates,n=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/a.height*(n-a.y1),a=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/a.height*(i-a.y1),n=Math.max(n,this.axisX.dataInfo.min),a=Math.min(a,this.axisX.dataInfo.max),Math.abs((a-n)/this.axisX.dataInfo.minDiff)>=.008*this.height&&(this.axisX.sessionVariables.internalMinimum=n,this.axisX.sessionVariables.internalMaximum=a,this.render()))):"normal"===this.plotInfo.axisPlacement&&(n=Math.min(this.dragStartPoint.x,t),i=Math.max(this.dragStartPoint.x,t),1<Math.abs(n-i)&&(a=this.axisX.lineCoordinates,n=(this.axisX.maximum-this.axisX.minimum)/a.width*(n-a.x1)+this.axisX.minimum,a=(this.axisX.maximum-this.axisX.minimum)/a.width*(i-a.x1)+this.axisX.minimum,n=Math.max(n,this.axisX.dataInfo.min),a=Math.min(a,this.axisX.dataInfo.max),Math.abs((a-n)/this.axisX.dataInfo.minDiff)>=.01*this.width&&(this.axisX.sessionVariables.internalMinimum=n,this.axisX.sessionVariables.internalMaximum=a,this.render())))}this.zoomEnabled&&"none"===this._toolBar.style.display&&(this._toolBar.style.display="inline",this._zoomButton.innerHTML=this._cultureInfo.panText,this._resetButton.innerHTML=this._cultureInfo.resetText)}}this.isDrag=!1},y.prototype._plotAreaMouseMove=function(t,e){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var i=0,n=0,n=this.axisX.lineCoordinates;if("xySwapped"===this.plotInfo.axisPlacement?(i=e-this.dragStartPoint.y,n=Math.abs(this.axisX.maximum-this.axisX.minimum)/n.height*i):(i=this.dragStartPoint.x-t,n=Math.abs(this.axisX.maximum-this.axisX.minimum)/n.width*i),2<Math.abs(i)&&8>Math.abs(i)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():!this._toolTip.enabled||this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(t,e),2<Math.abs(i)&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+n,this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+n,i=0,this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum-a(this.axisX.interval,this.axisX.intervalType)?(i=this.axisX._absoluteMinimum-a(this.axisX.interval,this.axisX.intervalType)-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=i,this.axisX.sessionVariables.internalMaximum+=i):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+a(this.axisX.interval,this.axisX.intervalType)&&(i=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+a(this.axisX.interval,this.axisX.intervalType)),this.axisX.sessionVariables.internalMaximum-=i,this.axisX.sessionVariables.internalMinimum-=i);var s=this;clearTimeout(this._panTimerId),this._panTimerId=setTimeout(function(){s.render()},0)}else this.zoomEnabled&&(i=this.plotArea,this.resetOverlayedCanvas(),n=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8","xySwapped"===this.plotInfo.axisPlacement?this.overlaidCanvasCtx.fillRect(i.x1,this.dragStartPoint.y,i.x2-i.x1,e-this.dragStartPoint.y):"normal"===this.plotInfo.axisPlacement&&this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,i.y1,t-this.dragStartPoint.x,i.y2-i.y1),this.overlaidCanvasCtx.globalAlpha=n)}else this._toolTip.enabled&&this._toolTip.mouseMoveHandler(t,e)},y.prototype.preparePlotArea=function(){var t=this.plotArea,e=this.axisY?this.axisY:this.axisY2;!L&&(0<t.x1||0<t.y1)&&t.ctx.translate(t.x1,t.y1),this.axisX&&e?(t.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:e.lineCoordinates.x1,t.y1=this.axisX.lineCoordinates.y1<e.lineCoordinates.y1?this.axisX.lineCoordinates.y1:e.lineCoordinates.y1,t.x2=this.axisX.lineCoordinates.x2>e.lineCoordinates.x2?this.axisX.lineCoordinates.x2:e.lineCoordinates.x2,t.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:e.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1):(e=this.layoutManager.getFreeSpace(),t.x1=e.x1,t.x2=e.x2,t.y1=e.y1,t.y2=e.y2,t.width=e.width,t.height=e.height),L||(t.canvas.width=t.width,t.canvas.height=t.height,t.canvas.style.left=t.x1+"px",t.canvas.style.top=t.y1+"px",(0<t.x1||0<t.y1)&&t.ctx.translate(-t.x1,-t.y1))},y.prototype.getPixelCoordinatesOnPlotArea=function(t,e){return{x:this.axisX.getPixelCoordinatesOnAxis(t).x,y:this.axisY.getPixelCoordinatesOnAxis(e).y}},y.prototype.renderIndexLabels=function(){var t=this.plotArea.ctx;t.textBaseline="middle";for(var e=this.plotArea,i=0;i<this._indexLabels.length;i++){var n,a,s,r=this._indexLabels[i];t.fillStyle=x("indexLabelFontColor",r.dataPoint,r.dataSeries),t.font=m("indexLabel",r.dataPoint,r.dataSeries);var o=this.replaceKeywordsWithValue(x("indexLabel",r.dataPoint,r.dataSeries),r.dataPoint,r.dataSeries),l=t.measureText(o).width,h=x("indexLabelFontSize",r.dataPoint,r.dataSeries),c=x("indexLabelPlacement",r.dataPoint,r.dataSeries),u=x("indexLabelOrientation",r.dataPoint,r.dataSeries),d=s=0,p=0,f=0,g=0;r.point.x<e.x1||r.point.x>e.x2||r.point.y<e.y1||r.point.y>e.y2||("column"===r.chartType||"stackedColumn"===r.chartType||"stackedColumn100"===r.chartType||"bar"===r.chartType||"stackedBar"===r.chartType||"stackedBar100"===r.chartType?(Math.abs(r.bounds.x1,r.bounds.x2),Math.abs(r.bounds.y1,r.bounds.y2),"normal"===this.plotInfo.axisPlacement?("outside"===c?(d=e.y1,p=e.y2):"inside"===c&&(d=r.bounds.y1,p=r.bounds.y2),"horizontal"===u?(n=r.point.x-l/2,a=0<=r.dataPoint.y?Math.min(Math.max(r.point.y-h/2-5,d+h/2+5),p-h/2-5):Math.max(Math.min(r.point.y+h/2+5,p-h/2),d+h/2+5)):"vertical"===u&&(n=r.point.x,a=0<=r.dataPoint.y?Math.min(Math.max(r.point.y-5,d+l+5),p):Math.max(Math.min(r.point.y+l+5,p-5),d),s=-90)):"xySwapped"===this.plotInfo.axisPlacement&&("outside"===c?(f=e.x1,g=e.x2):"inside"===c&&(f=r.bounds.x1,g=r.bounds.x2),"horizontal"===u?(a=r.point.y,n=0<=r.dataPoint.y?Math.max(Math.min(r.point.x+5,g-l),f):Math.min(Math.max(r.point.x-l-5,f),g)):"vertical"===u&&(a=r.point.y+l/2,n=0<=r.dataPoint.y?Math.max(Math.min(r.point.x+h/2+5,g-h/2),f):Math.min(Math.max(r.point.x-h/2-5,f+h/2),g+h/2),s=-90))):"horizontal"===u?(n=r.point.x-l/2,a=0<=r.dataPoint.y?Math.max(r.point.y-h/2-5,e.y1+h/2):Math.min(r.point.y+h/2+5,e.y2-h/2)):"vertical"===u&&(n=r.point.x,a=0<=r.dataPoint.y?Math.max(r.point.y-5,e.y1+l):Math.min(r.point.y+l+5,e.y2),s=-90),t.save(),t.translate(n,a),t.rotate(Math.PI/180*s),t.fillText(o,0,0),t.restore())
}},y.prototype.renderLine=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;e.save();var n=this.plotArea;e.beginPath(),e.rect(n.x1,n.y1,n.width,n.height),e.clip();for(var n=[],a=0;a<t.dataSeriesIndexes.length;a++){var s=t.dataSeriesIndexes[a],r=this.data[s];e.lineWidth=r.lineThickness;var o=r.dataPoints,l=r.id;this._eventManager.objectMap[l]={objectType:"dataSeries",dataSeriesIndex:s},l=c(l),i.strokeStyle=l,i.lineWidth=0<r.lineThickness?Math.max(r.lineThickness,4):0,l=r._colorSet[0],e.strokeStyle=l;var h,u,d=!0,p=0;if(e.beginPath(),0<o.length){for(var m=!1,p=0;p<o.length;p++)if(h=o[p].x.getTime?o[p].x.getTime():o[p].x,!(h<t.axisX.dataInfo.viewPortMin||h>t.axisX.dataInfo.viewPortMax))if("number"!=typeof o[p].y)p>0&&(e.stroke(),L&&i.stroke()),m=!0;else{h=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(h-t.axisX.conversionParameters.minimum)+.5<<0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(o[p].y-t.axisY.conversionParameters.minimum)+.5<<0;var x=r.dataPointIds[p];if(this._eventManager.objectMap[x]={id:x,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:p,x1:h,y1:u},d||m?(e.beginPath(),e.moveTo(h,u),L&&(i.beginPath(),i.moveTo(h,u)),m=d=!1):(e.lineTo(h,u),L&&i.lineTo(h,u),0==p%500&&(e.stroke(),e.beginPath(),e.moveTo(h,u),L&&(i.stroke(),i.beginPath(),i.moveTo(h,u)))),0<o[p].markerSize||0<r.markerSize){var f=r.getMarkerProperties(p,h,u,e);n.push(f),(!r.maxWidthInX||f.size>r.maxWidthInX)&&(r.maxWidthInX=f.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),x=c(x),L&&n.push({x:h,y:u,ctx:i,type:f.type,size:f.size,color:x,borderColor:x,borderThickness:f.borderThickness})}(o[p].indexLabel||r.indexLabel)&&this._indexLabels.push({chartType:"line",dataPoint:o[p],dataSeries:r,point:{x:h,y:u},color:l})}e.stroke(),L&&i.stroke()}}K.drawMarkers(n),e.restore(),e.beginPath(),L&&i.beginPath()}},y.prototype.renderStepLine=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;e.save();var n=this.plotArea;e.beginPath(),e.rect(n.x1,n.y1,n.width,n.height),e.clip();for(var n=[],a=0;a<t.dataSeriesIndexes.length;a++){var s=t.dataSeriesIndexes[a],r=this.data[s];e.lineWidth=r.lineThickness;var o=r.dataPoints,l=r.id;this._eventManager.objectMap[l]={objectType:"dataSeries",dataSeriesIndex:s},l=c(l),i.strokeStyle=l,i.lineWidth=0<r.lineThickness?Math.max(r.lineThickness,4):0,l=r._colorSet[0],e.strokeStyle=l;var h,u,d=!0,p=0;if(e.beginPath(),0<o.length){for(var m=!1,p=0;p<o.length;p++)if(h=o[p].getTime?o[p].x.getTime():o[p].x,!(h<t.axisX.dataInfo.viewPortMin||h>t.axisX.dataInfo.viewPortMax))if("number"!=typeof o[p].y)p>0&&(e.stroke(),L&&i.stroke()),m=!0;else{var x=u;h=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(h-t.axisX.conversionParameters.minimum)+.5<<0,u=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(o[p].y-t.axisY.conversionParameters.minimum)+.5<<0;var f=r.dataPointIds[p];this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:p,x1:h,y1:u},d||m?(e.beginPath(),e.moveTo(h,u),L&&(i.beginPath(),i.moveTo(h,u)),m=d=!1):(e.lineTo(h,x),L&&i.lineTo(h,x),e.lineTo(h,u),L&&i.lineTo(h,u),0==p%500&&(e.stroke(),e.beginPath(),e.moveTo(h,u),L&&(i.stroke(),i.beginPath(),i.moveTo(h,u)))),(0<o[p].markerSize||0<r.markerSize)&&(x=r.getMarkerProperties(p,h,u,e),n.push(x),(!r.maxWidthInX||x.size>r.maxWidthInX)&&(r.maxWidthInX=x.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),f=c(f),L&&n.push({x:h,y:u,ctx:i,type:x.type,size:x.size,color:f,borderColor:f,borderThickness:x.borderThickness})),(o[p].indexLabel||r.indexLabel)&&this._indexLabels.push({chartType:"stepLine",dataPoint:o[p],dataSeries:r,point:{x:h,y:u},color:l})}e.stroke(),L&&i.stroke()}}K.drawMarkers(n),e.restore(),e.beginPath(),L&&i.beginPath()}},y.prototype.renderSpline=function(t){function e(t){if(t=b(t,2),0<t.length){i.beginPath(),L&&n.beginPath(),i.moveTo(t[0].x,t[0].y),L&&n.moveTo(t[0].x,t[0].y);for(var e=0;e<t.length-3;e+=3)i.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),L&&n.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),e>0&&0===e%3e3&&(i.stroke(),i.beginPath(),i.moveTo(t[e+3].x,t[e+3].y),L&&(n.stroke(),n.beginPath(),n.moveTo(t[e+3].x,t[e+3].y)));i.stroke(),L&&n.stroke()}}var i=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;i.save();var a=this.plotArea;i.beginPath(),i.rect(a.x1,a.y1,a.width,a.height),i.clip();for(var a=[],s=0;s<t.dataSeriesIndexes.length;s++){var r=t.dataSeriesIndexes[s],o=this.data[r];i.lineWidth=o.lineThickness;var l=o.dataPoints,h=o.id;this._eventManager.objectMap[h]={objectType:"dataSeries",dataSeriesIndex:r},h=c(h),n.strokeStyle=h,n.lineWidth=0<o.lineThickness?Math.max(o.lineThickness,4):0,h=o._colorSet[0],i.strokeStyle=h;var u,d,p=0,m=[];if(i.beginPath(),0<l.length)for(p=0;p<l.length;p++)if(u=l[p].getTime?l[p].x.getTime():l[p].x,!(u<t.axisX.dataInfo.viewPortMin||u>t.axisX.dataInfo.viewPortMax))if("number"!=typeof l[p].y)p>0&&(e(m),m=[]);else{u=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(u-t.axisX.conversionParameters.minimum)+.5<<0,d=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(l[p].y-t.axisY.conversionParameters.minimum)+.5<<0;var x=o.dataPointIds[p];if(this._eventManager.objectMap[x]={id:x,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:p,x1:u,y1:d},m[m.length]={x:u,y:d},0<l[p].markerSize||0<o.markerSize){var f=o.getMarkerProperties(p,u,d,i);a.push(f),(!o.maxWidthInX||f.size>o.maxWidthInX)&&(o.maxWidthInX=f.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),x=c(x),L&&a.push({x:u,y:d,ctx:n,type:f.type,size:f.size,color:x,borderColor:x,borderThickness:f.borderThickness})}(l[p].indexLabel||o.indexLabel)&&this._indexLabels.push({chartType:"spline",dataPoint:l[p],dataSeries:o,point:{x:u,y:d},color:h})}e(m)}K.drawMarkers(a),i.restore(),i.beginPath(),L&&n.beginPath()}};var q=function(t,e,i,n,a,s,r,o,l,h){var c=n-e>15&&a-i>15?8:.35*Math.min(n-e,a-i);t.beginPath(),t.moveTo(e,i),t.save(),t.fillStyle=s,t.fillRect(e,i,n-e,a-i),t.restore(),!0===r&&(t.save(),t.beginPath(),t.moveTo(e,i),t.lineTo(e+c,i+c),t.lineTo(n-c,i+c),t.lineTo(n,i),t.closePath(),r=t.createLinearGradient((n+e)/2,i+c,(n+e)/2,i),r.addColorStop(0,s),r.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=r,t.fill(),t.restore()),!0===o&&(t.save(),t.beginPath(),t.moveTo(e,a),t.lineTo(e+c,a-c),t.lineTo(n-c,a-c),t.lineTo(n,a),t.closePath(),r=t.createLinearGradient((n+e)/2,a-c,(n+e)/2,a),r.addColorStop(0,s),r.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=r,t.fill(),t.restore()),!0===l&&(t.save(),t.beginPath(),t.moveTo(e,i),t.lineTo(e+c,i+c),t.lineTo(e+c,a-c),t.lineTo(e,a),t.closePath(),r=t.createLinearGradient(e+c,(a+i)/2,e,(a+i)/2),r.addColorStop(0,s),r.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=r,t.fill(),t.restore()),!0===h&&(t.save(),t.beginPath(),t.moveTo(n,i),t.lineTo(n-c,i+c),t.lineTo(n-c,a-c),t.lineTo(n,a),r=t.createLinearGradient(n-c,(a+i)/2,n,(a+i)/2),r.addColorStop(0,s),r.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=r,r.addColorStop(0,s),r.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=r,t.fill(),t.closePath(),t.restore())};y.prototype.renderColumn=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n,a,s=null,r=this.plotArea,o=0,l=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,o=Math.min(.15*this.width,.9*(this.plotArea.width/t.plotType.totalDataSeries))<<0,h=t.axisX.dataInfo.minDiff,u=.9*(r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/t.plotType.totalDataSeries)<<0;for(u>o?u=o:1/0===h?u=o:1>u&&(u=1),e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),r=0;r<t.dataSeriesIndexes.length;r++){var h=t.dataSeriesIndexes[r],d=this.data[h],p=d.dataPoints;if(d.maxWidthInX=u/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<p.length)for(var m=u>5&&d.bevelEnabled?!0:!1,o=0;o<p.length;o++)if(a=p[o].getTime?p[o].x.getTime():p[o].x,!(a<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[o].y){i=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(a-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(p[o].y-t.axisY.conversionParameters.minimum)+.5<<0,i=i-t.plotType.totalDataSeries*u/2+(t.previousDataSeriesCount+r)*u<<0;var x,f=i+u<<0;0<=p[o].y?x=l:(x=n,n=l),n>x&&(x=n=x),s=p[o].color?p[o].color:d._colorSet[o%d._colorSet.length],q(e,i,n,f,x,s,m&&0<=p[o].y,0>p[o].y&&m,!1,!1),s=d.dataPointIds[o],this._eventManager.objectMap[s]={id:s,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:i,y1:n,x2:f,y2:x},s=c(s),L&&q(this._eventManager.ghostCtx,i,n,f,x,s,!1,!1,!1,!1),(p[o].indexLabel||d.indexLabel)&&this._indexLabels.push({chartType:"column",dataPoint:p[o],dataSeries:d,point:{x:i+(f-i)/2,y:0<=p[o].y?n:x},bounds:{x1:i,y1:Math.min(n,x),x2:f,y2:Math.max(n,x)},color:s})}}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderStackedColumn=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,s=[],r=[],o=0,l=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,h=t.axisX.dataInfo.minDiff,u=.9*(a.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/t.plotType.plotUnits.length)<<0;for(u>o?u=o:1/0===h?u=o:1>u&&(u=1),e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(a.x1,a.y1,a.width,a.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<t.dataSeriesIndexes.length;h++){var d=t.dataSeriesIndexes[h],p=this.data[d],m=p.dataPoints;if(p.maxWidthInX=u/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<m.length){var x=u>5&&p.bevelEnabled?!0:!1;for(e.strokeStyle="#4572A7 ",o=0;o<m.length;o++)if(n=m[o].x.getTime?m[o].x.getTime():m[o].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof m[o].y){a=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(m[o].y-t.axisY.conversionParameters.minimum)+.5<<0;var f,g=a-t.plotType.plotUnits.length*u/2+t.index*u<<0,v=g+u<<0;if(0<=m[o].y){var y=s[n]?s[n]:0;i-=y,f=l-y,s[n]=y+(f-i)}else y=r[n]?r[n]:0,f=i+y,i=l+y,r[n]=y+(f-i);n=m[o].color?m[o].color:p._colorSet[o%p._colorSet.length],q(e,g,i,v,f,n,x&&0<=m[o].y,0>m[o].y&&x,!1,!1),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:o,x1:g,y1:i,x2:v,y2:f},n=c(n),L&&q(this._eventManager.ghostCtx,g,i,v,f,n,!1,!1,!1,!1),(m[o].indexLabel||p.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:m[o],dataSeries:p,point:{x:a,y:0<=m[o].y?i:f},bounds:{x1:g,y1:Math.min(i,f),x2:v,y2:Math.max(i,f)},color:n})}}}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderStackedColumn100=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,s=[],r=[],o=0,l=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,h=t.axisX.dataInfo.minDiff,u=.9*(a.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/t.plotType.plotUnits.length)<<0;for(u>o?u=o:1/0===h?u=o:1>u&&(u=1),e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(a.x1,a.y1,a.width,a.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<t.dataSeriesIndexes.length;h++){var d=t.dataSeriesIndexes[h],p=this.data[d],m=p.dataPoints;if(p.maxWidthInX=u/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<m.length)for(var x=u>5&&p.bevelEnabled?!0:!1,o=0;o<m.length;o++)if(n=m[o].x.getTime?m[o].x.getTime():m[o].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof m[o].y){a=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*((0!==t.dataPointYSums[n]?100*(m[o].y/t.dataPointYSums[n]):0)-t.axisY.conversionParameters.minimum)+.5<<0;var f,g=a-t.plotType.plotUnits.length*u/2+t.index*u<<0,v=g+u<<0;if(0<=m[o].y){var y=s[n]?s[n]:0;i-=y,f=l-y,s[n]=y+(f-i)}else y=r[n]?r[n]:0,f=i+y,i=l+y,r[n]=y+(f-i);n=m[o].color?m[o].color:p._colorSet[o%p._colorSet.length],q(e,g,i,v,f,n,x&&0<=m[o].y,0>m[o].y&&x,!1,!1),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:o,x1:g,y1:i,x2:v,y2:f},n=c(n),L&&q(this._eventManager.ghostCtx,g,i,v,f,n,!1,!1,!1,!1),(m[o].indexLabel||p.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:m[o],dataSeries:p,point:{x:a,y:0<=m[o].y?i:f},bounds:{x1:g,y1:Math.min(i,f),x2:v,y2:Math.max(i,f)},color:n})}}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderBar=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n,a,s=null,r=this.plotArea,o=0,l=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,o=Math.min(.15*this.height,.9*(this.plotArea.height/t.plotType.totalDataSeries))<<0,h=t.axisX.dataInfo.minDiff,u=.9*(r.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/t.plotType.totalDataSeries)<<0;for(u>o?u=o:1/0===h?u=o:1>u&&(u=1),e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),r=0;r<t.dataSeriesIndexes.length;r++){var h=t.dataSeriesIndexes[r],d=this.data[h],p=d.dataPoints;if(d.maxWidthInX=u/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<p.length){var m=u>5&&d.bevelEnabled?!0:!1;for(e.strokeStyle="#4572A7 ",o=0;o<p.length;o++)if(a=p[o].getTime?p[o].x.getTime():p[o].x,!(a<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[o].y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(a-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(p[o].y-t.axisY.conversionParameters.minimum)+.5<<0,n=n-t.plotType.totalDataSeries*u/2+(t.previousDataSeriesCount+r)*u<<0;var x,f=n+u<<0;0<=p[o].y?x=l:(x=i,i=l),s=p[o].color?p[o].color:d._colorSet[o%d._colorSet.length],q(e,x,n,i,f,s,m,!1,!1,!1),s=d.dataPointIds[o],this._eventManager.objectMap[s]={id:s,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:x,y1:n,x2:i,y2:f},s=c(s),L&&q(this._eventManager.ghostCtx,x,n,i,f,s,!1,!1,!1,!1),this._indexLabels.push({chartType:"bar",dataPoint:p[o],dataSeries:d,point:{x:0<=p[o].y?i:x,y:n+(f-n)/2},bounds:{x1:Math.min(x,i),y1:n,x2:Math.max(x,i),y2:f},color:s})}}}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderStackedBar=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,s=[],r=[],o=0,l=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,h=t.axisX.dataInfo.minDiff,u=.9*(a.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/t.plotType.plotUnits.length)<<0;for(u>o?u=o:1/0===h?u=o:1>u&&(u=1),e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(a.x1,a.y1,a.width,a.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<t.dataSeriesIndexes.length;h++){var d=t.dataSeriesIndexes[h],p=this.data[d],m=p.dataPoints;if(p.maxWidthInX=u/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<m.length){var x=u>5&&p.bevelEnabled?!0:!1;for(e.strokeStyle="#4572A7 ",o=0;o<m.length;o++)if(n=m[o].x.getTime?m[o].x.getTime():m[o].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof m[o].y){a=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(m[o].y-t.axisY.conversionParameters.minimum)+.5<<0;var f,g=a-t.plotType.plotUnits.length*u/2+t.index*u<<0,v=g+u<<0;if(0<=m[o].y){var y=s[n]?s[n]:0;f=l+y,i+=y,s[n]=y+(i-f)}else y=r[n]?r[n]:0,f=i-y,i=l-y,r[n]=y+(i-f);n=m[o].color?m[o].color:p._colorSet[o%p._colorSet.length],q(e,f,g,i,v,n,x,!1,!1,!1),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:o,x1:f,y1:g,x2:i,y2:v},n=c(n),L&&q(this._eventManager.ghostCtx,f,g,i,v,n,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar",dataPoint:m[o],dataSeries:p,point:{x:0<=m[o].y?i:f,y:a},bounds:{x1:Math.min(f,i),y1:g,x2:Math.max(f,i),y2:v},color:n})}}}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderStackedBar100=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,s=[],r=[],o=0,l=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,o=.15*this.width<<0,h=t.axisX.dataInfo.minDiff,u=.9*(a.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/t.plotType.plotUnits.length)<<0;for(u>o?u=o:1/0===h?u=o:1>u&&(u=1),e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(a.x1,a.y1,a.width,a.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<t.dataSeriesIndexes.length;h++){var d=t.dataSeriesIndexes[h],p=this.data[d],m=p.dataPoints;if(p.maxWidthInX=u/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit),0<m.length){var x=u>5&&p.bevelEnabled?!0:!1;for(e.strokeStyle="#4572A7 ",o=0;o<m.length;o++)if(n=m[o].x.getTime?m[o].x.getTime():m[o].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof m[o].y){a=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,i=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*((0!==t.dataPointYSums[n]?100*(m[o].y/t.dataPointYSums[n]):0)-t.axisY.conversionParameters.minimum)+.5<<0;var f,g=a-t.plotType.plotUnits.length*u/2+t.index*u<<0,v=g+u<<0;if(0<=m[o].y){var y=s[n]?s[n]:0;f=l+y,i+=y,s[n]=y+(i-f)}else y=r[n]?r[n]:0,f=i-y,i=l-y,r[n]=y+(i-f);n=m[o].color?m[o].color:p._colorSet[o%p._colorSet.length],q(e,f,g,i,v,n,x,!1,!1,!1),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:o,x1:f,y1:g,x2:i,y2:v},n=c(n),L&&q(this._eventManager.ghostCtx,f,g,i,v,n,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar100",dataPoint:m[o],dataSeries:p,point:{x:0<=m[o].y?i:f,y:a},bounds:{x1:Math.min(f,i),y1:g,x2:Math.max(f,i),y2:v},color:n})}}}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderArea=function(t){function e(){y&&(0>=t.axisY.minimum&&0<=t.axisY.maximum?x=v:0>t.axisY.maximum?x=s.y1:0<t.axisY.minimum&&(x=a.y2),i.lineTo(d,x),i.lineTo(y.x,x),i.closePath(),i.fill(),L&&(n.lineTo(d,x),n.lineTo(y.x,x),n.closePath(),n.fill()),i.beginPath(),i.moveTo(d,p),n.beginPath(),n.moveTo(d,p),y={x:d,y:p})}var i=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=t.axisX.lineCoordinates,s=t.axisY.lineCoordinates,r=[],o=this.plotArea;for(i.save(),L&&n.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),L&&(n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip()),o=0;o<t.dataSeriesIndexes.length;o++){var l=t.dataSeriesIndexes[o],h=this.data[l],u=h.dataPoints,r=h.id;this._eventManager.objectMap[r]={objectType:"dataSeries",dataSeriesIndex:l},r=c(r),n.fillStyle=r;var d,p,m,x,r=[],f=!0,g=0,v=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)+.5<<0,y=null;if(0<u.length){var b=h._colorSet[g%h._colorSet.length];i.fillStyle=b;for(var T=!0;g<u.length;g++)if(m=u[g].x.getTime?u[g].x.getTime():u[g].x,!(m<t.axisX.dataInfo.viewPortMin||m>t.axisX.dataInfo.viewPortMax))if("number"!=typeof u[g].y)e(),T=!0;else{d=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(m-t.axisX.conversionParameters.minimum)+.5<<0,p=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(u[g].y-t.axisY.conversionParameters.minimum)+.5<<0,f||T?(i.beginPath(),i.moveTo(d,p),y={x:d,y:p},L&&(n.beginPath(),n.moveTo(d,p)),T=f=!1):(i.lineTo(d,p),L&&n.lineTo(d,p),0==g%250&&e());var P=h.dataPointIds[g];this._eventManager.objectMap[P]={id:P,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:g,x1:d,y1:p},0!==u[g].markerSize&&(0<u[g].markerSize||0<h.markerSize)&&(m=h.getMarkerProperties(g,d,p,i),r.push(m),(!h.maxWidthInX||m.size>h.maxWidthInX)&&(h.maxWidthInX=m.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),P=c(P),L&&r.push({x:d,y:p,ctx:n,type:m.type,size:m.size,color:P,borderColor:P,borderThickness:m.borderThickness})),(u[g].indexLabel||h.indexLabel)&&this._indexLabels.push({chartType:"area",dataPoint:u[g],dataSeries:h,point:{x:d,y:p},color:b})}e(),K.drawMarkers(r)}}i.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderSplineArea=function(t){function e(){var e=b(v,2);if(0<e.length){i.beginPath(),i.moveTo(e[0].x,e[0].y),L&&(n.beginPath(),n.moveTo(e[0].x,e[0].y));for(var r=0;r<e.length-3;r+=3)i.bezierCurveTo(e[r+1].x,e[r+1].y,e[r+2].x,e[r+2].y,e[r+3].x,e[r+3].y),L&&n.bezierCurveTo(e[r+1].x,e[r+1].y,e[r+2].x,e[r+2].y,e[r+3].x,e[r+3].y);0>=t.axisY.minimum&&0<=t.axisY.maximum?m=f:0>t.axisY.maximum?m=s.y1:0<t.axisY.minimum&&(m=a.y2),g={x:e[0].x,y:e[0].y},i.lineTo(e[e.length-1].x,m),i.lineTo(g.x,m),i.closePath(),i.fill(),L&&(n.lineTo(e[e.length-1].x,m),n.lineTo(g.x,m),n.closePath(),n.fill())}}var i=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=t.axisX.lineCoordinates,s=t.axisY.lineCoordinates,r=[],o=this.plotArea;for(i.save(),L&&n.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),L&&(n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip()),o=0;o<t.dataSeriesIndexes.length;o++){var l=t.dataSeriesIndexes[o],h=this.data[l],u=h.dataPoints,r=h.id;this._eventManager.objectMap[r]={objectType:"dataSeries",dataSeriesIndex:l},r=c(r),n.fillStyle=r;var d,p,m,r=[],x=0,f=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)+.5<<0,g=null,v=[];if(0<u.length){for(color=h._colorSet[x%h._colorSet.length],i.fillStyle=color;x<u.length;x++)if(d=u[x].x.getTime?u[x].x.getTime():u[x].x,!(d<t.axisX.dataInfo.viewPortMin||d>t.axisX.dataInfo.viewPortMax))if("number"!=typeof u[x].y)x>0&&(e(),v=[]);else{d=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(d-t.axisX.conversionParameters.minimum)+.5<<0,p=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(u[x].y-t.axisY.conversionParameters.minimum)+.5<<0;var y=h.dataPointIds[x];if(this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:x,x1:d,y1:p},v[v.length]={x:d,y:p},0!==u[x].markerSize&&(0<u[x].markerSize||0<h.markerSize)){var T=h.getMarkerProperties(x,d,p,i);r.push(T),(!h.maxWidthInX||T.size>h.maxWidthInX)&&(h.maxWidthInX=T.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),y=c(y),L&&r.push({x:d,y:p,ctx:n,type:T.type,size:T.size,color:y,borderColor:y,borderThickness:T.borderThickness})}(u[x].indexLabel||h.indexLabel)&&this._indexLabels.push({chartType:"splineArea",dataPoint:u[x],dataSeries:h,point:{x:d,y:p},color:color})}e(),K.drawMarkers(r)}}i.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderStepArea=function(t){function e(){y&&(0>=t.axisY.minimum&&0<=t.axisY.maximum?x=v:0>t.axisY.maximum?x=s.y1:0<t.axisY.minimum&&(x=a.y2),i.lineTo(d,x),i.lineTo(y.x,x),i.closePath(),i.fill(),L&&(n.lineTo(d,x),n.lineTo(y.x,x),n.closePath(),n.fill()),i.beginPath(),i.moveTo(d,p),n.beginPath(),n.moveTo(d,p),y={x:d,y:p})}var i=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=t.axisX.lineCoordinates,s=t.axisY.lineCoordinates,r=[],o=this.plotArea;for(i.save(),L&&n.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),L&&(n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip()),o=0;o<t.dataSeriesIndexes.length;o++){var l=t.dataSeriesIndexes[o],h=this.data[l],u=h.dataPoints,r=h.id;this._eventManager.objectMap[r]={objectType:"dataSeries",dataSeriesIndex:l},r=c(r),n.fillStyle=r;var d,p,m,x,r=[],f=!0,g=0,v=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)+.5<<0,y=null,b=!1;if(0<u.length){var T=h._colorSet[g%h._colorSet.length];for(i.fillStyle=T;g<u.length;g++)if(m=u[g].x.getTime?u[g].x.getTime():u[g].x,!(m<t.axisX.dataInfo.viewPortMin||m>t.axisX.dataInfo.viewPortMax)){var P=p;"number"!=typeof u[g].y?(e(),b=!0):(d=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(m-t.axisX.conversionParameters.minimum)+.5<<0,p=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(u[g].y-t.axisY.conversionParameters.minimum)+.5<<0,f||b?(i.beginPath(),i.moveTo(d,p),y={x:d,y:p},L&&(n.beginPath(),n.moveTo(d,p)),b=f=!1):(i.lineTo(d,P),L&&n.lineTo(d,P),i.lineTo(d,p),L&&n.lineTo(d,p),0==g%250&&(0>=t.axisY.minimum&&0<=t.axisY.maximum?x=v:0>t.axisY.maximum?x=s.y1:0<t.axisY.minimum&&(x=a.y2),i.lineTo(d,x),i.lineTo(y.x,x),i.closePath(),i.fill(),i.beginPath(),i.moveTo(d,p),L&&(n.lineTo(d,x),n.lineTo(y.x,x),n.closePath(),n.fill(),n.beginPath(),n.moveTo(d,p)),y={x:d,y:p})),P=h.dataPointIds[g],this._eventManager.objectMap[P]={id:P,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:g,x1:d,y1:p},0!==u[g].markerSize&&(0<u[g].markerSize||0<h.markerSize)&&(m=h.getMarkerProperties(g,d,p,i),r.push(m),(!h.maxWidthInX||m.size>h.maxWidthInX)&&(h.maxWidthInX=m.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),P=c(P),L&&r.push({x:d,y:p,ctx:n,type:m.type,size:m.size,color:P,borderColor:P,borderThickness:m.borderThickness})),(u[g].indexLabel||h.indexLabel)&&this._indexLabels.push({chartType:"stepArea",dataPoint:u[g],dataSeries:h,point:{x:d,y:p},color:T}))}e(),K.drawMarkers(r)}}i.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderStackedArea=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n,a,s=null,r=[],o=this.plotArea,h=[],u=[],d=0,p=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,m=this._eventManager.ghostCtx;for(L&&m.beginPath(),e.save(),L&&m.save(),e.beginPath(),e.rect(o.x1,o.y1,o.width,o.height),e.clip(),L&&(m.beginPath(),m.rect(o.x1,o.y1,o.width,o.height),m.clip()),xValuePresent=[],o=0;o<t.dataSeriesIndexes.length;o++){var x=t.dataSeriesIndexes[o],f=this.data[x],g=f.dataPoints;for(f.dataPointIndexes=[],d=0;d<g.length;d++)x=g[d].x.getTime?g[d].x.getTime():g[d].x,f.dataPointIndexes[x]=d,xValuePresent[x]||(u.push(x),xValuePresent[x]=!0);u.sort(l)}for(o=0;o<t.dataSeriesIndexes.length;o++){var x=t.dataSeriesIndexes[o],f=this.data[x],g=f.dataPoints,v=!0,y=[],d=f.id;if(this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:x},d=c(d),m.fillStyle=d,0<u.length){for(s=f._colorSet[0],e.fillStyle=s,d=0;d<u.length;d++){a=u[d];var b=null,b=0<=f.dataPointIndexes[a]?g[f.dataPointIndexes[a]]:{x:a,y:0};if(!(a<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax)&&"number"==typeof b.y){i=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(a-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(b.y-t.axisY.conversionParameters.minimum)+.5<<0;var T=h[a]?h[a]:0;if(n-=T,y.push({x:i,y:p-T}),h[a]=p-n,v)e.beginPath(),e.moveTo(i,n),L&&(m.beginPath(),m.moveTo(i,n)),v=!1;else if(e.lineTo(i,n),L&&m.lineTo(i,n),0==d%250){for(;0<y.length;){var P=y.pop();e.lineTo(P.x,P.y),L&&m.lineTo(P.x,P.y)}e.closePath(),e.fill(),e.beginPath(),e.moveTo(i,n),L&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(i,n)),y.push({x:i,y:p-T})}if(0<=f.dataPointIndexes[a]){var k=f.dataPointIds[f.dataPointIndexes[a]];this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:x,dataPointIndex:f.dataPointIndexes[a],x1:i,y1:n}}0<=f.dataPointIndexes[a]&&0!==b.markerSize&&(0<b.markerSize||0<f.markerSize)&&(a=f.getMarkerProperties(d,i,n,e),r.push(a),(!f.maxWidthInX||a.size>f.maxWidthInX)&&(f.maxWidthInX=a.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),markerColor=c(k),L&&r.push({x:i,y:n,ctx:m,type:a.type,size:a.size,color:markerColor,borderColor:markerColor,borderThickness:a.borderThickness})),(b.indexLabel||f.indexLabel)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:b,dataSeries:f,point:{x:i,y:n},color:s})}}for(;0<y.length;)P=y.pop(),e.lineTo(P.x,P.y),L&&m.lineTo(P.x,P.y);e.closePath(),e.fill(),e.beginPath(),e.moveTo(i,n),L&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(i,n))}delete f.dataPointIndexes}K.drawMarkers(r),e.restore(),L&&m.restore()}},y.prototype.renderStackedArea100=function(t){var e=this.plotArea.ctx;if(!(0>=t.dataSeriesIndexes.length)){var i,n,a,s=null,r=this.plotArea,o=[],h=[],u=[],d=0,p=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(0-t.axisY.conversionParameters.minimum)<<0,m=.15*this.width<<0,x=t.axisX.dataInfo.minDiff,x=.9*r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(x)<<0,f=this._eventManager.ghostCtx;for(e.save(),L&&f.save(),e.beginPath(),e.rect(r.x1,r.y1,r.width,r.height),e.clip(),L&&(f.beginPath(),f.rect(r.x1,r.y1,r.width,r.height),f.clip()),xValuePresent=[],r=0;r<t.dataSeriesIndexes.length;r++){var g=t.dataSeriesIndexes[r],v=this.data[g],y=v.dataPoints;for(v.dataPointIndexes=[],d=0;d<y.length;d++)g=y[d].x.getTime?y[d].x.getTime():y[d].x,v.dataPointIndexes[g]=d,xValuePresent[g]||(u.push(g),xValuePresent[g]=!0);u.sort(l)}for(r=0;r<t.dataSeriesIndexes.length;r++){var g=t.dataSeriesIndexes[r],v=this.data[g],y=v.dataPoints,b=!0,s=v.id;this._eventManager.objectMap[s]={objectType:"dataSeries",dataSeriesIndex:g},s=c(s),f.fillStyle=s,1==y.length&&(x=m),1>x?x=1:x>m&&(x=m);var T=[];if(0<u.length){for(s=v._colorSet[d%v._colorSet.length],e.fillStyle=s,d=0;d<u.length;d++){a=u[d];
var P=null,P=0<=v.dataPointIndexes[a]?y[v.dataPointIndexes[a]]:{x:a,y:0};if(!(a<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax)&&"number"==typeof P.y){n=0!==t.dataPointYSums[a]?100*(P.y/t.dataPointYSums[a]):0,i=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(a-t.axisX.conversionParameters.minimum)+.5<<0,n=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(n-t.axisY.conversionParameters.minimum)+.5<<0;var k=h[a]?h[a]:0;if(n-=k,T.push({x:i,y:p-k}),h[a]=p-n,b)e.beginPath(),e.moveTo(i,n),L&&(f.beginPath(),f.moveTo(i,n)),b=!1;else if(e.lineTo(i,n),L&&f.lineTo(i,n),0==d%250){for(;0<T.length;){var S=T.pop();e.lineTo(S.x,S.y),L&&f.lineTo(S.x,S.y)}e.closePath(),e.fill(),e.beginPath(),e.moveTo(i,n),L&&(f.closePath(),f.fill(),f.beginPath(),f.moveTo(i,n)),T.push({x:i,y:p-k})}if(0<=v.dataPointIndexes[a]){var _=v.dataPointIds[v.dataPointIndexes[a]];this._eventManager.objectMap[_]={id:_,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:v.dataPointIndexes[a],x1:i,y1:n}}0<=v.dataPointIndexes[a]&&0!==P.markerSize&&(0<P.markerSize||0<v.markerSize)&&(a=v.getMarkerProperties(d,i,n,e),o.push(a),(!v.maxWidthInX||a.size>v.maxWidthInX)&&(v.maxWidthInX=a.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),markerColor=c(_),L&&o.push({x:i,y:n,ctx:f,type:a.type,size:a.size,color:markerColor,borderColor:markerColor,borderThickness:a.borderThickness})),(P.indexLabel||v.indexLabel)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:P,dataSeries:v,point:{x:i,y:n},color:s})}}for(;0<T.length;)S=T.pop(),e.lineTo(S.x,S.y),L&&f.lineTo(S.x,S.y);e.closePath(),e.fill(),e.beginPath(),e.moveTo(i,n),L&&(f.closePath(),f.fill(),f.beginPath(),f.moveTo(i,n))}delete v.dataPointIndexes}K.drawMarkers(o),e.restore(),L&&f.restore()}},y.prototype.renderBubble=function(t){var e=this.plotArea.ctx,i=t.dataSeriesIndexes.length;if(!(0>=i)){var n,a,s=this.plotArea,r=0,o=.15*this.width<<0,r=t.axisX.dataInfo.minDiff,i=.9*(s.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(r)/i)<<0;e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(s.x1,s.y1,s.width,s.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var l=-1/0,h=1/0,u=0;u<t.dataSeriesIndexes.length;u++)for(var d=t.dataSeriesIndexes[u],p=this.data[d],m=p.dataPoints,x=0,r=0;r<m.length;r++)n=n=m[r].getTime?m[r].x.getTime():m[r].x,n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax||"undefined"==typeof m[r].z||(x=m[r].z,x>l&&(l=x),h>x&&(h=x));for(var f=25*Math.PI,s=Math.max(Math.pow(.25*Math.min(s.height,s.width)/2,2)*Math.PI,f),u=0;u<t.dataSeriesIndexes.length;u++)if(d=t.dataSeriesIndexes[u],p=this.data[d],m=p.dataPoints,1==m.length&&(i=o),1>i?i=1:i>o&&(i=o),0<m.length)for(e.strokeStyle="#4572A7 ",r=0;r<m.length;r++)if(n=n=m[r].getTime?m[r].x.getTime():m[r].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof m[r].y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,a=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(m[r].y-t.axisY.conversionParameters.minimum)+.5<<0;var x=m[r].z,g=2*Math.max(Math.sqrt((l===h?s/2:f+(s-f)/(l-h)*(x-h))/Math.PI)<<0,1),x=p.getMarkerProperties(r,e);x.size=g,K.drawMarker(n,a,e,x.type,x.size,x.color,x.borderColor,x.borderThickness),(!p.maxWidthInX||x.size>p.maxWidthInX)&&(p.maxWidthInX=x.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit));var v=p.dataPointIds[r];this._eventManager.objectMap[v]={id:v,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:r,x1:n,y1:a,size:g},g=c(v),L&&K.drawMarker(n,a,this._eventManager.ghostCtx,x.type,x.size,g,g,x.borderThickness)}e.restore(),L&&this._eventManager.ghostCtx.restore()}},y.prototype.renderScatter=function(t){var e=this.plotArea.ctx,i=t.dataSeriesIndexes.length;if(!(0>=i)){var n,a,s=this.plotArea,r=0,o=.15*this.width<<0,r=t.axisX.dataInfo.minDiff,i=.9*(s.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(r)/i)<<0;e.save(),L&&this._eventManager.ghostCtx.save(),e.beginPath(),e.rect(s.x1,s.y1,s.width,s.height),e.clip(),L&&(this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var l=0;l<t.dataSeriesIndexes.length;l++){var h=t.dataSeriesIndexes[l],u=this.data[h],d=u.dataPoints;if(1==d.length&&(i=o),1>i?i=1:i>o&&(i=o),0<d.length){e.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(s.height,s.width)/2,2);for(var p=0,m=0,r=0;r<d.length;r++)if(n=n=d[r].getTime?d[r].x.getTime():d[r].x,!(n<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof d[r].y){n=t.axisX.conversionParameters.reference+t.axisX.conversionParameters.pixelPerUnit*(n-t.axisX.conversionParameters.minimum)+.5<<0,a=t.axisY.conversionParameters.reference+t.axisY.conversionParameters.pixelPerUnit*(d[r].y-t.axisY.conversionParameters.minimum)+.5<<0;var x=u.getMarkerProperties(r,n,a,e);K.drawMarker(x.x,x.y,x.ctx,x.type,x.size,x.color,x.color,x.thickness),(!u.maxWidthInX||x.size>u.maxWidthInX)&&(u.maxWidthInX=x.size/(1<t.axisX.conversionParameters.pixelPerUnit?t.axisX.conversionParameters.pixelPerUnit-1:t.axisX.conversionParameters.pixelPerUnit)),Math.sqrt((p-n)*(p-n)+(m-a)*(m-a))<Math.min(x.size,5)||(p=u.dataPointIds[r],this._eventManager.objectMap[p]={id:p,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:r,x1:n,y1:a},p=c(p),L&&K.drawMarker(x.x,x.y,this._eventManager.ghostCtx,x.type,x.size,p,p,x.borderThickness),p=n,m=a)}}}e.restore(),L&&this._eventManager.ghostCtx.restore()}};var $=function(t,e,i,n,a,s,r){t.save(),"pie"===a?(t.beginPath(),t.moveTo(e.x,e.y),t.arc(e.x,e.y,i,s,r,!1),t.fillStyle=n,t.strokeStyle="white",t.lineWidth=2,t.closePath(),t.fill()):"doughnut"===a&&(t.beginPath(),t.arc(e.x,e.y,i,s,r,!1),t.arc(e.x,e.y,.6*i,r,s,!0),t.closePath(),t.fillStyle=n,t.strokeStyle="white",t.lineWidth=2,t.fill()),t.restore()};y.prototype.renderPie=function(t){function e(t){f.frame=0,f.maxFrames=t||1}function i(){if(u&&d){for(var t=0,e=0;e<d.length;e++)t+=Math.abs(d[e].y);for(var i=0,n=0,a=0,s=0,e=0;e<d.length;e++){var r=d[e],o=u.dataPointIds[e],l={id:o,objectType:"dataPoint",dataPointIndex:e,dataSeriesIndex:0};g.push(l);var h=r.indexLabel?r.indexLabel:u.indexLabel?u.indexLabel:r.label?r.label:u.label?u.label:"";c._eventManager.objectMap[o]=l,l.center={x:k.x,y:k.y},l.y=r.y,l.radius=S,l.indexLabelText=c.replaceKeywordsWithValue(h,r,u,e),l.indexLabelPlacement=u.indexLabelPlacement,l.indexLabelLineColor=r.indexLabelLineColor?r.indexLabelLineColor:u.indexLabelLineColor?u.indexLabelLineColor:r.color?r.color:u._colorSet[e%u._colorSet.length],l.indexLabelLineThickness=r.indexLabelLineThickness?r.indexLabelLineThickness:u.indexLabelLineThickness,l.indexLabelFontColor=r.indexLabelFontColor?r.indexLabelFontColor:u.indexLabelFontColor,l.indexLabelFontStyle=r.indexLabelFontStyle?r.indexLabelFontStyle:u.indexLabelFontStyle,l.indexLabelFontWeight=r.indexLabelFontWeight?r.indexLabelFontWeight:u.indexLabelFontWeight,l.indexLabelFontSize=r.indexLabelFontSize?r.indexLabelFontSize:u.indexLabelFontSize,l.indexLabelFontFamily=r.indexLabelFontFamily?r.indexLabelFontFamily:u.indexLabelFontFamily,l.indexLabelBackgroundColor=r.indexLabelBackgroundColor?r.indexLabelBackgroundColor:u.indexLabelBackgroundColor?u.indexLabelBackgroundColor:null,l.indexLabelMaxWidth=r.indexLabelMaxWidth?r.indexLabelMaxWidth:u.indexLabelMaxWidth?u.indexLabelMaxWidth:.33*m.width,l.indexLabelWrap=r.indexLabelWrap?r.indexLabelWrap:u.indexLabelWrap,l.startAngle=0===e?u.startAngle?u.startAngle/180*Math.PI:0:g[e-1].endAngle,l.startAngle=(l.startAngle+2*Math.PI)%(2*Math.PI),l.endAngle=l.startAngle+2*Math.PI/t*Math.abs(r.y),r=(l.endAngle+l.startAngle)/2,r=(r+2*Math.PI)%(2*Math.PI),l.midAngle=r,l.midAngle>Math.PI/2-b&&l.midAngle<Math.PI/2+b?((0===i||g[a].midAngle>l.midAngle)&&(a=e),i++):l.midAngle>3*Math.PI/2-b&&l.midAngle<3*Math.PI/2+b&&((0===n||g[s].midAngle>l.midAngle)&&(s=e),n++),l.hemisphere=r>Math.PI/2&&r<=3*Math.PI/2?"left":"right",l.indexLabelTextBlock=new P(c.plotArea.ctx,{fontSize:l.indexLabelFontSize,fontFamily:l.indexLabelFontFamily,fontColor:l.indexLabelFontColor,fontStyle:l.indexLabelFontStyle,fontWeight:l.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:l.indexLabelBackgroundColor,maxWidth:l.indexLabelMaxWidth,maxHeight:l.indexLabelWrap?5*l.indexLabelFontSize:1.5*l.indexLabelFontSize,text:l.indexLabelText,padding:0,textBaseline:"top"}),l.indexLabelTextBlock.measureText()}for(r=t=0,o=!1,e=0;e<d.length;e++)l=g[(a+e)%d.length],i>1&&l.midAngle>Math.PI/2-b&&l.midAngle<Math.PI/2+b&&(i/2>=t&&!o?(l.hemisphere="right",t++):(l.hemisphere="left",o=!0));for(o=!1,e=0;e<d.length;e++)l=g[(s+e)%d.length],n>1&&l.midAngle>3*Math.PI/2-b&&l.midAngle<3*Math.PI/2+b&&(n/2>=r&&!o?(l.hemisphere="left",r++):(l.hemisphere="right",o=!0))}}function n(){var t=c.plotArea.ctx;if(null!==f&&f.frame<f.maxFrames){0===f.frame&&(f.prevMaxAngle=g[0].startAngle),t.clearRect(m.x1,m.y1,m.width,m.height);for(var t=f.prevMaxAngle+2*Math.PI/f.maxFrames,i=0;i<d.length;i++){var s=0===i?g[i].startAngle:r,r=s+(g[i].endAngle-g[i].startAngle),o=!1;r>t&&(r=t,o=!0);var l=d[i].color?d[i].color:u._colorSet[i%u._colorSet.length];if(r>s&&$(c.plotArea.ctx,g[i].center,g[i].radius,l,u.type,s,r),o)break}f.frame++,f.prevMaxAngle=t,f.frame<f.maxFrames?c.animationRequestId=c.requestAnimFrame.call(window,n):(e(L?15:4),a())}}function a(){var t=c.plotArea.ctx;if(null!==f&&f.frame<f.maxFrames){for(t.clearRect(m.x1,m.y1,m.width,m.height),t=0;t<d.length;t++){var e=g[t].startAngle,i=g[t].endAngle;if(i>e){var n=.07*S*Math.cos(g[t].midAngle),s=.07*S*Math.sin(g[t].midAngle),r=!1;d[t].exploded?(Math.abs(g[t].center.x-(k.x+n))>Math.abs(.5*n/f.maxFrames)||Math.abs(g[t].center.y-(k.y+s))>Math.abs(.5*s/f.maxFrames))&&(g[t].center.x+=n/f.maxFrames,g[t].center.y+=s/f.maxFrames,r=!0):(Math.abs(g[t].center.x-k.x)>Math.abs(.5*n/f.maxFrames)||Math.abs(g[t].center.y-k.y)>Math.abs(.5*s/f.maxFrames))&&(g[t].center.x-=n/f.maxFrames,g[t].center.y-=s/f.maxFrames,r=!0),r&&(n={},n.dataSeries=u,n.dataPoint=u.dataPoints[t],n.index=t,c._toolTip.highlightObjects([n])),$(c.plotArea.ctx,g[t].center,g[t].radius,d[t].color?d[t].color:u._colorSet[t%u._colorSet.length],u.type,e,i)}}for(f.frame++,t=c.plotArea.ctx,t.fillStyle="black",t.strokeStyle="grey",t.textBaseline="middle",t.lineJoin="round",e=e=0;e<d.length;e++)i=g[e],i.indexLabelText&&(i.indexLabelTextBlock.y-=i.indexLabelTextBlock.height/2,n=0,n="left"===i.hemisphere?"outside"===u.indexLabelPlacement?-(i.indexLabelTextBlock.width+p):-i.indexLabelTextBlock.width/2:"outside"===u.indexLabelPlacement?p:-i.indexLabelTextBlock.width/2,i.indexLabelTextBlock.x+=n,i.indexLabelTextBlock.render(!0),i.indexLabelTextBlock.x-=n,i.indexLabelTextBlock.y+=i.indexLabelTextBlock.height/2,"outside"===i.indexLabelPlacement&&(n=i.center.x+S*Math.cos(i.midAngle),s=i.center.y+S*Math.sin(i.midAngle),t.strokeStyle=i.indexLabelLineColor,t.lineWidth=i.indexLabelLineThickness,t.beginPath(),t.moveTo(n,s),t.lineTo(i.indexLabelTextBlock.x,i.indexLabelTextBlock.y),t.lineTo(i.indexLabelTextBlock.x+("left"===i.hemisphere?-p:p),i.indexLabelTextBlock.y),t.stroke()),t.lineJoin="miter");f.frame<f.maxFrames&&(c.animationRequestId=c.requestAnimFrame.call(window,a))}}function s(t,e){var i=t.indexLabelTextBlock.x,n=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,a=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2,s=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,r=e.indexLabelTextBlock.x+e.indexLabelTextBlock.width,o=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2;return t.indexLabelTextBlock.x+t.indexLabelTextBlock.width<e.indexLabelTextBlock.x-p||i>r+p||n>o+p||s-p>a?!1:!0}function r(t,e){var i=0,i=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,n=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2,a=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,s=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2;return i=e.indexLabelTextBlock.y>t.indexLabelTextBlock.y?a-n:i-s}function o(t){for(var e=null,i=1;i<d.length;i++){if(e=(t+i+g.length)%g.length,g[e].hemisphere!==g[t].hemisphere){e=null;break}if(g[e].indexLabelText&&e!==t&&(0>r(g[e],g[t])||("right"===g[t].hemisphere?g[e].indexLabelTextBlock.y>=g[t].indexLabelTextBlock.y:g[e].indexLabelTextBlock.y<=g[t].indexLabelTextBlock.y)))break;e=null}return e}function l(t,e){e=e||0;var i=0,n=k.y-1*_,a=k.y+1*_;if(t>=0&&t<d.length){var s=g[t];if(0>e&&s.indexLabelTextBlock.y<n||e>0&&s.indexLabelTextBlock.y>a)return 0;var h=e,c=0,u=0,u=c=c=0;for(0>h?s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2>n&&s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2+h<n&&(h=-(n-(s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2+h))):s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2<n&&s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2+h>a&&(h=s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2+h-a),h=s.indexLabelTextBlock.y+h,n=0,n="right"===s.hemisphere?k.x+Math.sqrt(Math.pow(_,2)-Math.pow(h-k.y,2)):k.x-Math.sqrt(Math.pow(_,2)-Math.pow(h-k.y,2)),u=k.x+S*Math.cos(s.midAngle),c=k.y+S*Math.sin(s.midAngle),c=Math.sqrt(Math.pow(n-u,2)+Math.pow(h-c,2)),u=Math.acos(S/_),c=Math.acos((_*_+S*S-c*c)/(2*S*_)),h=u>c?h-s.indexLabelTextBlock.y:0,n=null,a=1;a<d.length;a++){if(n=(t-a+g.length)%g.length,g[n].hemisphere!==g[t].hemisphere){n=null;break}if(g[n].indexLabelText&&g[n].hemisphere===g[t].hemisphere&&n!==t&&(0>r(g[n],g[t])||("right"===g[t].hemisphere?g[n].indexLabelTextBlock.y<=g[t].indexLabelTextBlock.y:g[n].indexLabelTextBlock.y>=g[t].indexLabelTextBlock.y)))break;n=null}u=n,c=o(t),a=n=0,0>h?(a="right"===s.hemisphere?u:c,i=h,null!==a&&(u=-h,h=s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2-(g[a].indexLabelTextBlock.y+g[a].indexLabelTextBlock.height/2),v>h-u&&(n=-u,x++,a=l(a,n),+a.toFixed(T)>+n.toFixed(T)&&(i=h>v?-(h-v):-(u-(a-n)))))):h>0&&(a="right"===s.hemisphere?c:u,i=h,null!==a&&(u=h,h=g[a].indexLabelTextBlock.y-g[a].indexLabelTextBlock.height/2-(s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2),v>h-u&&(n=u,x++,a=l(a,n),+a.toFixed(T)<+n.toFixed(T)&&(i=h>v?h-v:u-(n-a))))),i&&(h=s.indexLabelTextBlock.y+i,n=0,n="right"===s.hemisphere?k.x+Math.sqrt(Math.pow(_,2)-Math.pow(h-k.y,2)):k.x-Math.sqrt(Math.pow(_,2)-Math.pow(h-k.y,2)),s.midAngle>Math.PI/2-b&&s.midAngle<Math.PI/2+b?(a=(t-1+g.length)%g.length,a=g[a],u=g[(t+1+g.length)%g.length],"left"===s.hemisphere&&"right"===a.hemisphere&&n>a.indexLabelTextBlock.x?n=a.indexLabelTextBlock.x-15:"right"===s.hemisphere&&"left"===u.hemisphere&&n<u.indexLabelTextBlock.x&&(n=u.indexLabelTextBlock.x+15)):s.midAngle>3*Math.PI/2-b&&s.midAngle<3*Math.PI/2+b&&(a=(t-1+g.length)%g.length,a=g[a],u=g[(t+1+g.length)%g.length],"right"===s.hemisphere&&"left"===a.hemisphere&&n<a.indexLabelTextBlock.x?n=a.indexLabelTextBlock.x+15:"left"===s.hemisphere&&"right"===u.hemisphere&&n>u.indexLabelTextBlock.x&&(n=u.indexLabelTextBlock.x-15)),s.indexLabelTextBlock.y=h,s.indexLabelTextBlock.x=n,s.indexLabelAngle=Math.atan2(s.indexLabelTextBlock.y-k.y,s.indexLabelTextBlock.x-k.x))}return i}function h(){var t=c.plotArea.ctx;t.fillStyle="grey",t.strokeStyle="grey",t.font="16px Arial",t.textBaseline="middle";for(var i=0,a=t=0,t=0;10>t&&(1>t||a>0);t++){if(S-=a,a=0,"outside"===u.indexLabelPlacement){for(_=S*y,i=0;i<d.length;i++){var h=g[i];h.indexLabelTextBlock.x=k.x+_*Math.cos(h.midAngle),h.indexLabelTextBlock.y=k.y+_*Math.sin(h.midAngle),h.indexLabelAngle=h.midAngle,h.radius=S}for(var x,f,i=0;i<d.length;i++){var h=g[i],b=o(i);if(null!==b){x=g[i],f=g[b];var P=0,P=r(x,f)-v;if(0>P){for(var C=f=x=0;C<d.length;C++)C!==i&&g[C].hemisphere===h.hemisphere&&(g[C].indexLabelTextBlock.y<h.indexLabelTextBlock.y?x++:f++);C=P/(x+f||1)*f,x=-1*(P-C);var M=f=0;"right"===h.hemisphere?(f=l(i,C),x=-1*(P-f),M=l(b,x),+M.toFixed(T)<+x.toFixed(T)&&+f.toFixed(T)<=+C.toFixed(T)&&l(i,-(x-M))):(f=l(b,C),x=-1*(P-f),M=l(i,x),+M.toFixed(T)<+x.toFixed(T)&&+f.toFixed(T)<=+C.toFixed(T)&&l(b,-(x-M)))}}}}else for(i=0;i<d.length;i++)h=g[i],_="pie"===u.type?.7*S:.8*S,P=k.x+_*Math.cos(h.midAngle),C=k.y+_*Math.sin(h.midAngle),h.indexLabelTextBlock.x=P,h.indexLabelTextBlock.y=C;for(i=0;i<d.length;i++)h=g[i],h.indexLabelTextBlock.measureText(),P=P=0,"right"===h.hemisphere?(P=m.x2-(h.indexLabelTextBlock.x+h.indexLabelTextBlock.width+p),P*=-1):P=m.x1-(h.indexLabelTextBlock.x-h.indexLabelTextBlock.width-p),P>0&&(Math.abs(h.indexLabelTextBlock.y-h.indexLabelTextBlock.height/2-k.y)<S||Math.abs(h.indexLabelTextBlock.y+h.indexLabelTextBlock.height/2-k.y)<S)&&(P/=Math.abs(Math.cos(h.indexLabelAngle)),P>9&&(P*=.3),P>a&&(a=P)),P=P=0,0<h.indexLabelAngle&&h.indexLabelAngle<Math.PI?(P=m.y2-(h.indexLabelTextBlock.y+h.indexLabelTextBlock.height/2+5),P*=-1):P=m.y1-(h.indexLabelTextBlock.y-h.indexLabelTextBlock.height/2-5),P>0&&Math.abs(h.indexLabelTextBlock.x-k.x)<S&&(P/=Math.abs(Math.sin(h.indexLabelAngle)),P>9&&(P*=.3),P>a&&(a=P));for(i=function(t,e,i){for(var n=[],a=0;n.push(g[e]),e!==i;e=(e+1+d.length)%d.length);for(n.sort(function(t,e){return t.y-e.y}),e=0;e<n.length&&(i=n[e],t>a);e++)a+=i.indexLabelTextBlock.height,i.indexLabelTextBlock.text="",i.indexLabelText="",i.indexLabelTextBlock.measureText()},b=h=-1,C=M=0;C<d.length;C++)if(x=g[C],x.indexLabelText){var w=o(C);null!==w&&(f=g[w],P=0,P=r(x,f),0>P&&s(x,f)?(0>h&&(h=C),w!==h&&(b=w),M+=-P):M>0&&(i(M,h,b),b=h=-1,M=0))}M>0&&i(M,h,b)}e(c.animationEnabled&&0===c.renderCount?L?60:30:1),n()}var c=this;if(!(0>=t.dataSeriesIndexes.length)){var u=this.data[t.dataSeriesIndexes[0]],d=u.dataPoints,p=10,m=this.plotArea,x=0,f={frame:0,maxFrames:1},g=[],v=2,y=1.3,b=20/180*Math.PI,T=6,k={x:(m.x2+m.x1)/2,y:(m.y2+m.y1)/2},S="inside"===u.indexLabelPlacement?.95*Math.min(m.width,m.height)/2:.8*Math.min(m.width,m.height)/2,_=S*y;this.pieDoughnutClickHandler=function(t){f.frame===f.maxFrames&&(t=t.dataPoint,t.exploded=t.exploded?!1:!0,e(L?15:4),1<this.dataPoints.length&&a())},i(),h()}},y.prototype.animationRequestId=null,y.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),y.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,T.prototype.registerSpace=function(t,e){"top"===t?this._topOccupied+=e.height:"bottom"===t?this._bottomOccupied+=e.height:"left"===t?this._leftOccupied+=e.width:"right"===t&&(this._rightOccupied+=e.width)},T.prototype.unRegisterSpace=function(t,e){"top"===t?this._topOccupied-=e.height:"bottom"===t?this._bottomOccupied-=e.height:"left"===t?this._leftOccupied-=e.width:"right"===t&&(this._rightOccupied-=e.width)},T.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.chart.width-this._rightOccupied,y2:this.chart.height-this._bottomOccupied,width:this.chart.width-this._rightOccupied-this._leftOccupied,height:this.chart.height-this._bottomOccupied-this._topOccupied}},T.prototype.reset=function(){this._topOccupied=0,this._bottomOccupied=3,this._rightOccupied=this._leftOccupied=0},t(P,v),P.prototype.render=function(t){t&&this.ctx.save();var e=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var i=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+i),"middle"===this.textBaseline&&(i=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var n=0,a=this.padding,s=null;for((0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,i,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,i=0;i<this._wrappedText.lines.length;i++)s=this._wrappedText.lines[i],"right"===this.horizontalAlign?n=this.width-s.width-this.padding:"left"===this.horizontalAlign?n=this.padding:"center"===this.horizontalAlign&&(n=(this.width-2*this.padding)/2-s.width/2+this.padding),this.ctx.fillText(s.text,n,a),a+=s.height;this.ctx.font=e,t&&this.ctx.restore()},P.prototype.setText=function(t){this.text=t,this._isDirty=!0,this._wrappedText=null},P.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},P.prototype._getLineWithWidth=function(t,e,i){if(t=String(t),!t)return{text:"",width:0};var n=i=0,a=t.length-1,s=1/0;for(this.ctx.font=this._getFontString();a>=n;){var s=Math.floor((n+a)/2),r=t.substr(0,s+1);if(i=this.ctx.measureText(r).width,e>i)n=s+1;else{if(!(i>e))break;a=s-1}}return i>e&&1<r.length&&(r=r.substr(0,r.length-1),i=this.ctx.measureText(r).width),e=!0,(r.length===t.length||" "===t[r.length])&&(e=!1),e&&(t=r.split(" "),1<t.length&&t.pop(),r=t.join(" "),i=this.ctx.measureText(r).width),{text:r,width:i}},P.prototype._wrapText=function(){var t=new String(r(this.text)),e=[],i=this.ctx.font,n=0,a=0;for(this.ctx.font=this._getFontString();0<t.length;){var s=this.maxHeight-2*this.padding,o=this._getLineWithWidth(t,this.maxWidth-2*this.padding,!1);o.height=this._lineHeight,e.push(o),a=Math.max(a,o.width),n+=o.height,t=r(t.slice(o.text.length,t.length)),s&&n>s&&(o=e.pop(),n-=o.height)}this._wrappedText={lines:e,width:a,height:n},this.width=a+2*this.padding,this.height=n+2*this.padding,this.ctx.font=i},P.prototype._getFontString=function(){return m("",this,null)},t(k,v),k.prototype.render=function(){if(this.text){var t,e,i=this.chart.layoutManager.getFreeSpace(),n=0,a=0,s=0,r=0,o=0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(r=i.width-2*this.margin,o=.5*i.height-2*this.margin,s=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(r=i.height-2*this.margin,o=.5*i.width-2*this.margin):"center"===this.horizontalAlign&&(r=i.width-2*this.margin,o=.5*i.height-2*this.margin));var o=new P(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:r,maxHeight:o,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"}),l=o.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(a=this.margin,e="top"):"bottom"===this.verticalAlign&&(a=i.y2-this.margin-l.height,e="bottom"),"left"===this.horizontalAlign?n=i.x1+this.margin:"center"===this.horizontalAlign?n=i.x1+(r/2-l.width/2)+this.margin:"right"===this.horizontalAlign&&(n=i.x2-this.margin-l.width),t=this.horizontalAlign,this.width=l.width,this.height=l.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(n=i.x1+this.margin,a=i.y2-this.margin-(r/2-l.width/2),s=-90,e="left",this.width=l.height,this.height=l.width):"right"===this.horizontalAlign?(n=i.x2-this.margin,a=i.y1+this.margin+(r/2-l.width/2),s=90,e="right",this.width=l.height,this.height=l.width):"center"===this.horizontalAlign&&(a=i.y1+(i.height/2-l.height/2),n=i.x1+(i.width/2-l.width/2),e="center",this.width=l.width,this.height=l.height),t="center"),o.x=n,o.y=a,o.angle=s,o.horizontalAlign=t,o.render(!0),this.chart.layoutManager.registerSpace(e,{width:this.width+2*this.margin,height:this.height+2*this.margin}),this.bounds={x1:n,y1:a,x2:n+this.width,y2:a+this.height},this.ctx.textBaseline="top"}},t(S,v),S.prototype.render=function(){var t=this.chart.layoutManager.getFreeSpace(),e=null,i=0,n=0,a=0,s=0,r=[],o=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",e=this.verticalAlign,a=.9*t.width,s=.5*t.height):"center"===this.verticalAlign&&(this.orientation="vertical",e=this.horizontalAlign,a=.5*t.width,s=.9*t.height);for(var l=0;l<this.dataSeries.length;l++){var h=this.dataSeries[l],u=h.legendMarkerType?h.legendMarkerType:"line"!==h.type&&"stepLine"!==h.type&&"spline"!==h.type&&"scatter"!==h.type&&"bubble"!==h.type||!h.markerType?C.getDefaultLegendMarker(h.type):h.markerType,d=h.legendText?h.legendText:h.name,p=h.legendMarkerColor?h.legendMarkerColor:h.markerColor?h.markerColor:h._colorSet[0],m=h.markerSize||"line"!==h.type&&"stepLine"!==h.type&&"spline"!==h.type?.6*this.lineHeight:0;if("pie"!==h.type&&"doughnut"!==h.type)u={markerType:u,markerColor:p,text:d,textBlock:null,chartType:h.type,markerSize:m,lineColor:h._colorSet[0],dataSeriesIndex:l,dataPointIndex:null},r.push(u);else for(var x=0;x<h.dataPoints.length;x++)m=h.dataPoints[x],u=m.legendMarkerType?m.legendMarkerType:h.legendMarkerType?h.legendMarkerType:C.getDefaultLegendMarker(h.type),d=m.legendText?m.legendText:h.legendText?h.legendText:m.name?m.name:"DataPoint: "+(x+1),p=m.markerColor?m.markerColor:h.markerColor?h.markerColor:m.color?m.color:h.color?h.color:h._colorSet[x%h._colorSet.length],m=0!==m.markerSize&&(0!==h.markerSize||m.markerSize)||"line"!==h.type&&"stepLine"!==h.type&&"spline"!==h.type?.6*this.lineHeight:0,u={markerType:u,markerColor:p,text:d,textBlock:null,chartType:h.type,markerSize:m,dataSeriesIndex:l,dataPointIndex:x},r.push(u)}if(0<r.length){for(h=null,l=x=0;l<r.length;l++)u=r[l],"horizontal"===this.orientation?(u.textBlock=new P(this.ctx,{x:0,y:0,maxWidth:a,maxHeight:this.lineHeight,angle:0,text:u.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),u.textBlock.measureText(),(!h||h.width+u.textBlock.width+(0===h.width?0:this.horizontalSpacing)>a)&&(h={items:[],width:0},o.push(h),this.height=o.length*(u.textBlock.height+5)),u.textBlock.x=h.width,u.textBlock.y=0,h.width+=Math.round(u.textBlock.width+u.textBlock._lineHeight+(0===h.width?0:.5*u.textBlock._lineHeight))):(this.height+this.lineHeight<s?(h={items:[],width:0},o.push(h),this.height=o.length*this.lineHeight):(h=o[x],x=(x+1)%o.length),u.textBlock=new P(this.ctx,{x:0,y:0,maxWidth:a,maxHeight:1.5*this.fontSize,angle:0,text:u.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),u.textBlock.measureText(),u.textBlock.x=h.width,u.textBlock.y=0,h.width+=u.textBlock.width+u.textBlock._lineHeight+(0===h.width?0:.5*u.textBlock._lineHeight)),h.items.push(u),this.width=Math.max(h.width,this.width);this.height=o.length*this.lineHeight}for("top"===this.verticalAlign?(n="left"===this.horizontalAlign?t.x1+2:"right"===this.horizontalAlign?t.x2-this.width-2:t.x1+t.width/2-this.width/2,i=t.y1):"center"===this.verticalAlign?(n="left"===this.horizontalAlign?t.x1+2:"right"===this.horizontalAlign?t.x2-this.width-2:t.x1+t.width/2-this.width/2,i=t.y1+t.height/2-this.height/2):"bottom"===this.verticalAlign&&(n="left"===this.horizontalAlign?t.x1+2:"right"===this.horizontalAlign?t.x2-this.width-2:t.x1+t.width/2-this.width/2,i=t.y2-this.height-5),this.items=r,l=0;l<this.items.length;l++)u=r[l],u.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[u.id]={id:u.id,objectType:"legendItem",legendItemIndex:l,dataSeriesIndex:u.dataSeriesIndex,dataPointIndex:u.dataPointIndex};for(l=0;l<o.length;l++)for(h=o[l],t=0;t<h.items.length;t++)u=h.items[t],s=u.textBlock.x+n+(0===t?.2*m:.4*this.lineHeight+.2*m),r=i+l*this.lineHeight,a=s,this.chart.data[u.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),("line"===u.chartType||"stepLine"===u.chartType||"spline"===u.chartType)&&(this.ctx.strokeStyle=u.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(s-.1*this.lineHeight,r+this.lineHeight/2),this.ctx.lineTo(s+.7*this.lineHeight,r+this.lineHeight/2),this.ctx.stroke(),a-=.1*this.lineHeight),K.drawMarker(s+m/2,r+this.lineHeight/2,this.ctx,u.markerType,m,u.markerColor,null,0),u.textBlock.x=s+Math.round(.9*this.lineHeight),u.textBlock.y=r,u.textBlock.render(!0),this.chart.data[u.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),s=c(u.id),this.ghostCtx.fillStyle=s,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(a,u.textBlock.y,u.textBlock.x+u.textBlock.width-a,u.textBlock.height),u.x1=this.chart._eventManager.objectMap[u.id].x1=a,u.y1=this.chart._eventManager.objectMap[u.id].y1=u.textBlock.y,u.x2=this.chart._eventManager.objectMap[u.id].x2=u.textBlock.x+u.textBlock.width,u.y2=this.chart._eventManager.objectMap[u.id].y2=u.textBlock.y+u.textBlock.height;this.chart.layoutManager.registerSpace(e,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:n,y1:i,x2:n+this.width,y2:i+this.height}},t(_,v),_.prototype.render=function(){var t=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red",this.ctx.fillRect(t.x1,t.y1,t.x2,t.y2)},t(C,v),C.prototype.getDefaultAxisPlacement=function(){var t=this.type;return"column"===t||"line"===t||"stepLine"===t||"spline"===t||"area"===t||"stepArea"===t||"splineArea"===t||"stackedColumn"===t||"stackedLine"===t||"bubble"===t||"scatter"===t||"stackedArea"===t||"stackedColumn100"===t||"stackedLine100"===t||"stackedArea100"===t?"normal":"bar"===t||"stackedBar"===t||"stackedBar100"===t?"xySwapped":"pie"===t||"doughnut"===t?"none":(window.console.log("Unknown Chart Type: "+t),null)},C.getDefaultLegendMarker=function(t){return"column"===t||"stackedColumn"===t||"stackedLine"===t||"bar"===t||"stackedBar"===t||"stackedBar100"===t||"bubble"===t||"scatter"===t||"stackedColumn100"===t||"stackedLine100"===t||"stepArea"===t?"square":"line"===t||"stepLine"===t||"spline"===t||"pie"===t||"doughnut"===t?"circle":"area"===t||"splineArea"===t||"stackedArea"===t||"stackedArea100"===t?"triangle":(window.console.log("Unknown Chart Type: "+t),null)},C.prototype.getDataPointAtX=function(t,e){if(!this.dataPoints||0===this.dataPoints.length)return null;var i={dataPoint:null,distance:1/0,index:0/0},n=null,a=0,s=0,r=1,o=1/0,l=0,h=0,c=0;for("none"!==this.chart.plotInfo.axisPlacement&&(c=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,c=c>0?(this.dataPoints.length-1)/c*(t-this.dataPoints[0].x)>>0:0);;){if(s=r>0?c+a:c-a,s>=0&&s<this.dataPoints.length){var n=this.dataPoints[s],u=Math.abs(n.x-t);if(u<i.distance&&(i.dataPoint=n,i.distance=u,i.index=s),n=Math.abs(n.x-t),o>=n?o=n:r>0?l++:h++,l>1e3&&h>1e3)break}else if(0>c-a&&c+a>=this.dataPoints.length)break;-1===r?(a++,r=1):r=-1}return e||i.dataPoint.x!==t?e&&null!==i.dataPoint?i:null:i},C.prototype.getDataPointAtXY=function(t,e,i){if(!this.dataPoints||0===this.dataPoints.length)return null;i=i||!1;var n=[],a=0,s=0,r=1,o=!1,l=1/0,h=0,c=0,u=0;for("none"!==this.chart.plotInfo.axisPlacement&&(u=this.chart.axisX.getXValueAt({x:t,y:e}),s=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,u=s>0?(this.dataPoints.length-1)/s*(u-this.dataPoints[0].x)>>0:0);;){if(s=r>0?u+a:u-a,s>=0&&s<this.dataPoints.length){var d=this.chart._eventManager.objectMap[this.dataPointIds[s]],p=this.dataPoints[s];if(d){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":t>=d.x1&&t<=d.x2&&e>=d.y1&&e<=d.y2&&(n.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:Math.min(Math.abs(d.x1-t),Math.abs(d.x2-t),Math.abs(d.y1-e),Math.abs(d.y2-e))}),o=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var m=x("markerSize",p,this)||4,f=i?20:m,g=Math.sqrt(Math.pow(d.x1-t,2)+Math.pow(d.y1-e,2));f>=g&&n.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:g}),s=Math.abs(d.x1-t),l>=s?l=s:r>0?h++:c++,m/2>=g&&(o=!0);break;case"bubble":m=d.size,g=Math.sqrt(Math.pow(d.x1-t,2)+Math.pow(d.y1-e,2)),m/2>=g&&(n.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:g}),o=!0);
break;case"pie":case"doughnut":m=d.center,f="doughnut"===this.type?.6*d.radius:0,g=Math.sqrt(Math.pow(m.x-t,2)+Math.pow(m.y-e,2)),g<d.radius&&g>f&&(g=Math.atan2(e-m.y,t-m.x),0>g&&(g+=2*Math.PI),g=(180*(g/Math.PI)%360+360)%360,m=(180*(d.startAngle/Math.PI)%360+360)%360,f=(180*(d.endAngle/Math.PI)%360+360)%360,0===f&&1<d.endAngle&&(f=360),m>f&&(f+=360,m>g&&(g+=360)),g>m&&f>g&&(n.push({dataPoint:p,dataPointIndex:s,dataSeries:this,distance:0}),o=!0))}if(o||h>1e3&&c>1e3)break}}else if(0>u-a&&u+a>=this.dataPoints.length)break;-1===r?(a++,r=1):r=-1}for(t=null,e=0;e<n.length;e++)t?n[e].distance<=t.distance&&(t=n[e]):t=n[e];return t},C.prototype.getMarkerProperties=function(t,e,i,n){var a=this.dataPoints;return{x:e,y:i,ctx:n,type:a[t].markerType?a[t].markerType:this.markerType,size:a[t].markerSize?a[t].markerSize:this.markerSize,color:a[t].markerColor?a[t].markerColor:this.markerColor?this.markerColor:a[t].color?a[t].color:this.color?this.color:this._colorSet[t%this._colorSet.length],borderColor:a[t].markerBorderColor?a[t].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:a[t].markerBorderThickness?a[t].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},t(M,v),M.prototype.createLabels=function(){var t,e,i=0,a=0,s=0,i=0;if("bottom"===this._position||"top"===this._position?(i=this.lineCoordinates.width/Math.abs(this.maximum-this.minimum)*this.interval,a=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.9*i>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.7*this.chart.width>>0:this.labelMaxWidth,s="undefined"==typeof this._options.labelWrap||this.labelWrap?.5*this.chart.height>>0:1.5*this.labelFontSize):("left"===this._position||"right"===this._position)&&(i=this.lineCoordinates.height/Math.abs(this.maximum-this.minimum)*this.interval,a=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.3*this.chart.width>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.5*this.chart.width>>0:this.labelMaxWidth,s="undefined"==typeof this._options.labelWrap||this.labelWrap?2*i>>0:1.5*this.labelFontSize),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(e=n(new Date(this.maximum),this.interval,this.intervalType),i=this.intervalStartPosition;e>i;n(i,this.interval,this.intervalType))t="axisX"===this.type&&this.labels[i]?this.labels[i]:j(i,this.valueFormatString,this.chart._cultureInfo),t=new P(this.ctx,{x:0,y:0,maxWidth:a,maxHeight:s,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:i.getTime(),textBlock:t,effectiveHeight:null});else{if(e=this.maximum,this.labels&&this.labels.length){t=Math.ceil(this.interval);for(var r=Math.ceil(this.intervalStartPosition),o=!1,i=r;i<this.maximum;i+=t){if(!this.labels[i]){o=!1;break}o=!0}o&&(this.interval=t,this.intervalStartPosition=r)}for(i=this.intervalStartPosition;e>=i;i+=this.interval)t="axisX"===this.type&&this.labels[i]?this.labels[i]:Y(i,this.valueFormatString,this.chart._cultureInfo),t=new P(this.ctx,{x:0,y:0,maxWidth:a,maxHeight:s,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:i,textBlock:t,effectiveHeight:null})}for(i=0;i<this.stripLines.length;i++)e=this.stripLines[i],t=new P(this.ctx,{x:0,y:0,backgroundColor:e.labelBackgroundColor,maxWidth:a,maxHeight:s,angle:this.labelAngle,text:e.label,horizontalAlign:"left",fontSize:e.labelFontSize,fontFamily:e.labelFontFamily,fontWeight:e.labelFontWeight,fontColor:e.labelFontColor,fontStyle:e.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:e.value,textBlock:t,effectiveHeight:null,stripLine:e})},M.prototype.createLabelsAndCalculateWidth=function(){var t=0;if(this._labels=[],"left"===this._position||"right"===this._position)for(this.createLabels(),i=0;i<this._labels.length;i++){var e=this._labels[i].textBlock.measureText(),n=0,n=0===this.labelAngle?e.width:e.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+e.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle));n>t&&(t=n),this._labels[i].effectiveWidth=n}return(this.title?u(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+t+this.tickLength+5},M.prototype.createLabelsAndCalculateHeight=function(){var t=0;this._labels=[];var e,i=0;if(this.createLabels(),"bottom"===this._position||"top"===this._position)for(i=0;i<this._labels.length;i++){e=this._labels[i].textBlock,e=e.measureText();var n=0,n=0===this.labelAngle?e.height:e.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+e.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle));n>t&&(t=n),this._labels[i].effectiveHeight=n}return(this.title?u(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+t+this.tickLength+5},M.setLayoutAndRender=function(t,e,i,n,a){var s,r,o,l=t.chart,h=l.ctx;if(t.calculateAxisParameters(),e&&e.calculateAxisParameters(),i&&i.calculateAxisParameters(),e&&i&&"undefined"==typeof e._options.maximum&&"undefined"==typeof e._options.minimum&&"undefined"==typeof e._options.interval&&"undefined"==typeof i._options.maximum&&"undefined"==typeof i._options.minimum&&"undefined"==typeof i._options.interval){o=(e.maximum-e.minimum)/e.interval;var c=(i.maximum-i.minimum)/i.interval;o>c?i.maximum=i.interval*o+i.minimum:c>o&&(e.maximum=e.interval*c+e.minimum)}if(c=e?e.margin:0,"normal"===n){t.lineCoordinates={};var u=Math.ceil(e?e.createLabelsAndCalculateWidth():0);s=Math.round(a.x1+u+c),t.lineCoordinates.x1=s,c=Math.ceil(i?i.createLabelsAndCalculateWidth():0),r=Math.round(a.x2-c>t.chart.width-10?t.chart.width-10:a.x2-c),t.lineCoordinates.x2=r,t.lineCoordinates.width=Math.abs(r-s);var d=Math.ceil(t.createLabelsAndCalculateHeight());n=Math.round(a.y2-d-t.margin),o=Math.round(a.y2-t.margin),t.lineCoordinates.y1=n,t.lineCoordinates.y2=n,t.boundingRect={x1:s,y1:n,x2:r,y2:o,width:r-s,height:o-n},e&&(s=Math.round(a.x1+e.margin),n=Math.round(10>a.y1?10:a.y1),r=Math.round(a.x1+u+e.margin),o=Math.round(a.y2-d-t.margin),e.lineCoordinates={x1:r,y1:n,x2:r,y2:o,height:Math.abs(o-n)},e.boundingRect={x1:s,y1:n,x2:r,y2:o,width:r-s,height:o-n}),i&&(s=Math.round(t.lineCoordinates.x2),n=Math.round(10>a.y1?10:a.y1),r=Math.round(s+c+i.margin),o=Math.round(a.y2-d-t.margin),i.lineCoordinates={x1:s,y1:n,x2:s,y2:o,height:Math.abs(o-n)},i.boundingRect={x1:s,y1:n,x2:r,y2:o,width:r-s,height:o-n}),t.calculateValueToPixelconversionParameters(),e&&e.calculateValueToPixelconversionParameters(),i&&i.calculateValueToPixelconversionParameters(),h.save(),h.rect(t.boundingRect.x1-40,t.boundingRect.y1,t.boundingRect.width+80,t.boundingRect.height),h.clip(),t.renderLabelsTicksAndTitle(),h.restore(),e&&e.renderLabelsTicksAndTitle(),i&&i.renderLabelsTicksAndTitle()}else{u=Math.ceil(t.createLabelsAndCalculateWidth()),e&&(e.lineCoordinates={},s=Math.round(a.x1+u+t.margin),r=Math.round(a.x2>e.chart.width-10?e.chart.width-10:a.x2),e.lineCoordinates.x1=s,e.lineCoordinates.x2=r,e.lineCoordinates.width=Math.abs(r-s)),i&&(i.lineCoordinates={},s=Math.round(a.x1+u+t.margin),r=Math.round(a.x2>i.chart.width-10?i.chart.width-10:a.x2),i.lineCoordinates.x1=s,i.lineCoordinates.x2=r,i.lineCoordinates.width=Math.abs(r-s));var d=Math.ceil(e?e.createLabelsAndCalculateHeight():0),p=Math.ceil(i?i.createLabelsAndCalculateHeight():0);e&&(n=Math.round(a.y2-d-e.margin),o=Math.round(a.y2-c>e.chart.height-10?e.chart.height-10:a.y2-c),e.lineCoordinates.y1=n,e.lineCoordinates.y2=n,e.boundingRect={x1:s,y1:n,x2:r,y2:o,width:r-s,height:d}),i&&(n=Math.round(a.y1+i.margin),o=a.y1+i.margin+p,i.lineCoordinates.y1=o,i.lineCoordinates.y2=o,i.boundingRect={x1:s,y1:n,x2:r,y2:o,width:r-s,height:p}),s=Math.round(a.x1+t.margin),n=Math.round(i?i.lineCoordinates.y2:10>a.y1?10:a.y1),r=Math.round(a.x1+u+t.margin),o=Math.round(e?e.lineCoordinates.y1:a.y2-c>t.chart.height-10?t.chart.height-10:a.y2-c),t.lineCoordinates={x1:r,y1:n,x2:r,y2:o,height:Math.abs(o-n)},t.boundingRect={x1:s,y1:n,x2:r,y2:o,width:r-s,height:o-n},t.calculateValueToPixelconversionParameters(),e&&e.calculateValueToPixelconversionParameters(),i&&i.calculateValueToPixelconversionParameters(),e&&e.renderLabelsTicksAndTitle(),i&&i.renderLabelsTicksAndTitle(),t.renderLabelsTicksAndTitle()}l.preparePlotArea(),a=t.chart.plotArea,h.save(),h.rect(a.x1,a.y1,Math.abs(a.x2-a.x1),Math.abs(a.y2-a.y1)),h.clip(),t.renderStripLinesOfThicknessType("value"),e&&e.renderStripLinesOfThicknessType("value"),i&&i.renderStripLinesOfThicknessType("value"),t.renderInterlacedColors(),e&&e.renderInterlacedColors(),i&&i.renderInterlacedColors(),h.restore(),t.renderGrid(),e&&e.renderGrid(),i&&i.renderGrid(),t.renderAxisLine(),e&&e.renderAxisLine(),i&&i.renderAxisLine(),t.renderStripLinesOfThicknessType("pixel"),e&&e.renderStripLinesOfThicknessType("pixel"),i&&i.renderStripLinesOfThicknessType("pixel")},M.prototype.renderLabelsTicksAndTitle=function(){var t=!1,e=0,i=1,n=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(i=1.2),"undefined"==typeof this._options.interval){if("bottom"===this._position||"top"===this._position){for(s=0;s<this._labels.length;s++)a=this._labels[s],a.position<this.minimum||a.stripLine||(a=a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+a.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),e+=a);e>this.lineCoordinates.width*i&&(t=!0)}if("left"===this._position||"right"===this._position){for(s=0;s<this._labels.length;s++)a=this._labels[s],a.position<this.minimum||a.stripLine||(a=a.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),e+=a);e>this.lineCoordinates.height*i&&(t=!0)}}if("bottom"===this._position){for(var a,s=0,s=0;s<this._labels.length;s++)a=this._labels[s],a.position<this.minimum||a.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[s].stripLine||this._labels[s].stripLine&&"pixel"===this._labels[s].stripLine._thicknessType)&&(this._labels[s].stripLine?(i=this._labels[s].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(e.x<<0)+.5:e.x<<0,this.ctx.beginPath(),this.ctx.moveTo(i,e.y<<0),this.ctx.lineTo(i,e.y+this.tickLength<<0),this.ctx.stroke()),(!t||0===n++%2||this._labels[s].stripLine)&&(0===a.textBlock.angle?(e.x-=a.textBlock.width/2,e.y+=this.tickLength+a.textBlock.fontSize/2):(e.x-=0>this.labelAngle?a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,e.y+=this.tickLength+Math.abs(0>this.labelAngle?a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),a.textBlock.x=e.x,a.textBlock.y=e.y,a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-2,this._titleTextBlock.render(!0))}else if("top"===this._position){for(s=0;s<this._labels.length;s++)a=this._labels[s],a.position<this.minimum||a.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[s].stripLine||this._labels[s].stripLine&&"pixel"===this._labels[s].stripLine._thicknessType)&&(this._labels[s].stripLine?(i=this._labels[s].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(e.x<<0)+.5:e.x<<0,this.ctx.beginPath(),this.ctx.moveTo(i,e.y<<0),this.ctx.lineTo(i,e.y-this.tickLength<<0),this.ctx.stroke()),(!t||0===n++%2||this._labels[s].stripLine)&&(0===a.textBlock.angle?(e.x-=a.textBlock.width/2,e.y-=this.tickLength+a.textBlock.height/2):(e.x-=0<this.labelAngle?a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,e.y-=this.tickLength+Math.abs(0<this.labelAngle?a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),a.textBlock.x=e.x,a.textBlock.y=e.y,a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(s=0;s<this._labels.length;s++)a=this._labels[s],a.position<this.minimum||a.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[s].stripLine||this._labels[s].stripLine&&"pixel"===this._labels[s].stripLine._thicknessType)&&(this._labels[s].stripLine?(i=this._labels[s].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(e.y<<0)+.5:e.y<<0,this.ctx.beginPath(),this.ctx.moveTo(e.x<<0,i),this.ctx.lineTo(e.x-this.tickLength<<0,i),this.ctx.stroke()),(!t||0===n++%2||this._labels[s].stripLine)&&(a.textBlock.x=e.x-a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,a.textBlock.y=0===this.labelAngle?e.y-a.textBlock.height/2+this.labelFontSize/2:e.y-a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.boundingRect.x1+5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(s=0;s<this._labels.length;s++)a=this._labels[s],a.position<this.minimum||a.position>this.maximum||(e=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[s].stripLine||this._labels[s].stripLine&&"pixel"===this._labels[s].stripLine._thicknessType)&&(this._labels[s].stripLine?(i=this._labels[s].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(e.y<<0)+.5:e.y<<0,this.ctx.beginPath(),this.ctx.moveTo(e.x<<0,i),this.ctx.lineTo(e.x+this.tickLength<<0,i),this.ctx.stroke()),(!t||0===n++%2||this._labels[s].stripLine)&&(a.textBlock.x=e.x+this.tickLength+5,a.textBlock.y=0===this.labelAngle?e.y-a.textBlock.height/2+this.labelFontSize/2:e.y,a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.boundingRect.x2-5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}},M.prototype.renderInterlacedColors=function(){var t,e,i=this.chart.plotArea.ctx,n=this.chart.plotArea,a=0;if(t=!0,"bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(i.fillStyle=this.interlacedColor,a=0;a<this._labels.length;a++)this._labels[a].stripLine||(t?(e=this.getPixelCoordinatesOnAxis(this._labels[a].position),t=this.getPixelCoordinatesOnAxis(a+1>=this._labels.length?this.maximum:this._labels[a+1].position),i.fillRect(n.x1,t.y,Math.abs(n.x1-n.x2),Math.abs(t.y-e.y)),t=!1):t=!0)}else for(i.fillStyle=this.interlacedColor,a=0;a<this._labels.length;a++)this._labels[a].stripLine||(t?(t=this.getPixelCoordinatesOnAxis(this._labels[a].position),e=this.getPixelCoordinatesOnAxis(a+1>=this._labels.length?this.maximum:this._labels[a+1].position),i.fillRect(t.x,n.y1,Math.abs(e.x-t.x),Math.abs(n.y1-n.y2)),t=!1):t=!0);i.beginPath()},M.prototype.renderStripLinesOfThicknessType=function(t){if(this.stripLines&&0<this.stripLines.length&&t)for(var e=this.chart.plotArea.ctx,i=0,i=0;i<this.stripLines.length;i++){var n=this.stripLines[i];if(n._thicknessType===t&&("pixel"!==t||!(n.value<this.minimum||n.value>this.maximum))){var a=this.getPixelCoordinatesOnAxis(n.value);e.strokeStyle=n.color,e.beginPath(),c(n.id);var s,r,o,l;e.lineWidth=Math.abs("pixel"===t?n.thickness:this.conversionParameters.pixelPerUnit*n.thickness),"bottom"===this._position||"top"===this._position?(s=r=1===e.lineWidth%2?(a.x<<0)+.5:a.x<<0,o=this.chart.plotArea.y1,l=this.chart.plotArea.y2):("left"===this._position||"right"===this._position)&&(o=l=1===e.lineWidth%2?(a.y<<0)+.5:a.y<<0,s=this.chart.plotArea.x1,r=this.chart.plotArea.x2),e.moveTo(s,o),e.lineTo(r,l),e.stroke()}}},M.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var t,e=this.chart.ctx,i=this.chart.plotArea;if(e.lineWidth=this.gridThickness,e.strokeStyle=this.gridColor,"bottom"===this._position||"top"===this._position)for(n=0;n<this._labels.length&&!this._labels[n].stripLine;n++)this._labels[n].position<this.minimum||this._labels[n].position>this.maximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[n].position),t=1===e.lineWidth%2?(t.x<<0)+.5:t.x<<0,e.moveTo(t,i.y1<<0),e.lineTo(t,i.y2<<0),e.stroke());else if("left"===this._position||"right"===this._position)for(var n=0;n<this._labels.length&&!this._labels[n].stripLine;n++)this._labels[n].position<this.minimum||this._labels[n].position>this.maximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[n].position),t=1===e.lineWidth%2?(t.y<<0)+.5:t.y<<0,e.moveTo(i.x1<<0,t),e.lineTo(i.x2<<0,t),e.stroke())}},M.prototype.renderAxisLine=function(){var t=this.chart.ctx;if("bottom"===this._position||"top"===this._position){if(this.lineThickness){t.lineWidth=this.lineThickness,t.strokeStyle=this.lineColor?this.lineColor:"black";var e=1===this.lineThickness%2?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;t.beginPath(),t.moveTo(this.lineCoordinates.x1,e),t.lineTo(this.lineCoordinates.x2,e),t.stroke()}}else"left"!==this._position&&"right"!==this._position||!this.lineThickness||(t.lineWidth=this.lineThickness,t.strokeStyle=this.lineColor,e=1===this.lineThickness%2?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,t.beginPath(),t.moveTo(e,this.lineCoordinates.y1),t.lineTo(e,this.lineCoordinates.y2),t.stroke())},M.prototype.getPixelCoordinatesOnAxis=function(t){var e={},i=this.lineCoordinates.width,n=this.lineCoordinates.height;return("bottom"===this._position||"top"===this._position)&&(i/=Math.abs(this.maximum-this.minimum),e.x=this.lineCoordinates.x1+i*(t-this.minimum),e.y=this.lineCoordinates.y1),("left"===this._position||"right"===this._position)&&(i=n/Math.abs(this.maximum-this.minimum),e.y=this.lineCoordinates.y2-i*(t-this.minimum),e.x=this.lineCoordinates.x2),e},M.prototype.getXValueAt=function(t){if(!t)return null;var e=null;return"left"===this._position?e=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-t.y)+this.chart.axisX.minimum:"bottom"===this._position&&(e=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum),e},M.prototype.calculateValueToPixelconversionParameters=function(t){t={pixelPerUnit:null,minimum:null,reference:null};var e=this.lineCoordinates.width,i=this.lineCoordinates.height;t.minimum=this.minimum,("bottom"===this._position||"top"===this._position)&&(t.pixelPerUnit=e/Math.abs(this.maximum-this.minimum),t.reference=this.lineCoordinates.x1),("left"===this._position||"right"===this._position)&&(t.pixelPerUnit=-1*i/Math.abs(this.maximum-this.minimum),t.reference=this.lineCoordinates.y2),this.conversionParameters=t},M.prototype.calculateAxisParameters=function(){var t=this.chart.layoutManager.getFreeSpace();"bottom"===this._position||"top"===this._position?(this.maxWidth=t.width,this.maxHeight=t.height):(this.maxWidth=t.height,this.maxHeight=t.width);var e,i,n,a,t="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.floor(this.maxWidth/40);if("axisX"===this.type?(e=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin,i=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax,0===i-e&&(i+=.4,e-=.4),n=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1):"axisY"===this.type&&(e="undefined"==typeof this._options.minimum?this.dataInfo.viewPortMin:this._options.minimum,i="undefined"==typeof this._options.maximum?this.dataInfo.viewPortMax:this._options.maximum,0===i-e?(i+=5,e-=5):(0!==i&&(i+=Math.abs(.05)),0!==e&&(e-=Math.abs(.05))),this.includeZero&&"undefined"==typeof this._options.minimum&&e>0&&(e=0),this.includeZero&&"undefined"==typeof this._options.maximum&&0>i&&(i=0)),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(a=i-e,this.intervalType||(t>=a/1?(this.interval=1,this.intervalType="millisecond"):t>=a/2?(this.interval=2,this.intervalType="millisecond"):t>=a/5?(this.interval=5,this.intervalType="millisecond"):t>=a/10?(this.interval=10,this.intervalType="millisecond"):t>=a/20?(this.interval=20,this.intervalType="millisecond"):t>=a/50?(this.interval=50,this.intervalType="millisecond"):t>=a/100?(this.interval=100,this.intervalType="millisecond"):t>=a/200?(this.interval=200,this.intervalType="millisecond"):t>=a/250?(this.interval=250,this.intervalType="millisecond"):t>=a/300?(this.interval=300,this.intervalType="millisecond"):t>=a/400?(this.interval=400,this.intervalType="millisecond"):t>=a/500?(this.interval=500,this.intervalType="millisecond"):a/(1*O.secondDuration)<=t?(this.interval=1,this.intervalType="second"):a/(2*O.secondDuration)<=t?(this.interval=2,this.intervalType="second"):a/(5*O.secondDuration)<=t?(this.interval=5,this.intervalType="second"):a/(10*O.secondDuration)<=t?(this.interval=10,this.intervalType="second"):a/(15*O.secondDuration)<=t?(this.interval=15,this.intervalType="second"):a/(20*O.secondDuration)<=t?(this.interval=20,this.intervalType="second"):a/(30*O.secondDuration)<=t?(this.interval=30,this.intervalType="second"):a/(1*O.minuteDuration)<=t?(this.interval=1,this.intervalType="minute"):a/(2*O.minuteDuration)<=t?(this.interval=2,this.intervalType="minute"):a/(5*O.minuteDuration)<=t?(this.interval=5,this.intervalType="minute"):a/(10*O.minuteDuration)<=t?(this.interval=10,this.intervalType="minute"):a/(15*O.minuteDuration)<=t?(this.interval=15,this.intervalType="minute"):a/(20*O.minuteDuration)<=t?(this.interval=20,this.intervalType="minute"):a/(30*O.minuteDuration)<=t?(this.interval=30,this.intervalType="minute"):a/(1*O.hourDuration)<=t?(this.interval=1,this.intervalType="hour"):a/(2*O.hourDuration)<=t?(this.interval=2,this.intervalType="hour"):a/(3*O.hourDuration)<=t?(this.interval=3,this.intervalType="hour"):a/(6*O.hourDuration)<=t?(this.interval=6,this.intervalType="hour"):a/(1*O.dayDuration)<=t?(this.interval=1,this.intervalType="day"):a/(2*O.dayDuration)<=t?(this.interval=2,this.intervalType="day"):a/(4*O.dayDuration)<=t?(this.interval=4,this.intervalType="day"):a/(1*O.weekDuration)<=t?(this.interval=1,this.intervalType="week"):a/(2*O.weekDuration)<=t?(this.interval=2,this.intervalType="week"):a/(3*O.weekDuration)<=t?(this.interval=3,this.intervalType="week"):a/(1*O.monthDuration)<=t?(this.interval=1,this.intervalType="month"):a/(2*O.monthDuration)<=t?(this.interval=2,this.intervalType="month"):a/(3*O.monthDuration)<=t?(this.interval=3,this.intervalType="month"):a/(6*O.monthDuration)<=t?(this.interval=6,this.intervalType="month"):(this.interval=a/(1*O.yearDuration)<=t?1:a/(2*O.yearDuration)<=t?2:a/(4*O.yearDuration)<=t?4:Math.floor(M.getNiceNumber(a/(t-1),!0)/O.yearDuration),this.intervalType="year")),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:e-n/2,this.maximum=this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:i+n/2,this.valueFormatString||("year"===this.intervalType?this.valueFormatString="YYYY":"month"===this.intervalType?this.valueFormatString="MMM YYYY":"week"===this.intervalType?this.valueFormatString="MMM DD YYYY":"day"===this.intervalType?this.valueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.valueFormatString="hh:mm TT":"minute"===this.intervalType?this.valueFormatString="hh:mm TT":"second"===this.intervalType?this.valueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.valueFormatString="fff'ms'")),this.intervalStartPosition=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval)):(this.intervalType="number",a=M.getNiceNumber(i-e,!1),this.interval=this._options&&this._options.interval?this._options.interval:M.getNiceNumber(a/(t-1),!0),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:Math.floor(e/this.interval)*this.interval,this.maximum=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:Math.ceil(i/this.interval)*this.interval,"axisX"===this.type?(null===this.sessionVariables.internalMinimum&&(this.minimum=e-n/2),this.sessionVariables.internalMaximum||(this.maximum=i+n/2),this.intervalStartPosition=Math.floor((this.minimum+.2*this.interval)/this.interval)*this.interval):"axisY"===this.type&&(this.intervalStartPosition=this.minimum)),"axisX"===this.type&&(this._absoluteMinimum=this._options&&"undefined"!=typeof this._options.minimum?this._options.minimum:this.dataInfo.min-n/2,this._absoluteMaximum=this._options&&"undefined"!=typeof this._options.maximum?this._options.maximum:this.dataInfo.max+n/2),!this.valueFormatString&&(this.valueFormatString="#,##0.##",a=Math.abs(this.maximum-this.minimum),1>a&&(e=Math.floor(Math.abs(Math.log(a)/Math.LN10))+2,e>2)))for(i=0;e-2>i;i++)this.valueFormatString+="#"},M.getNiceNumber=function(t,e){var i=Math.floor(Math.log(t)/Math.LN10),n=t/Math.pow(10,i);return(e?1.5>n?1:3>n?2:7>n?5:10:1>=n?1:2>=n?2:5>=n?5:10)*Math.pow(10,i)},M.prototype.getLabelStartPoint=function(){var t=a(this.interval,this.intervalType),t=new Date(Math.floor(this.minimum/t)*t);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<t.getMilliseconds()&&(t.setSeconds(t.getSeconds()+1),t.setMilliseconds(0)):"minute"===this.intervalType?(0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMinutes(t.getMinutes()+1),t.setSeconds(0),t.setMilliseconds(0)):"hour"===this.intervalType?(0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"day"===this.intervalType?(0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"week"===this.intervalType?(0<t.getDay()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+(7-t.getDay())),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"month"===this.intervalType?(1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMonth(t.getMonth()+1),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"year"===this.intervalType&&(0<t.getMonth()||1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setFullYear(t.getFullYear()+1),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0))),t},t(w,v),t(A,v),A.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.display="none";var t;t='<div style=" width: auto;height: auto;min-width: 50px;',t+="line-height: 20px;",t+="padding: 5px;",t+="font-family: Calibri, Arial, Georgia, serif;",t+="font-weight: 400;",t+="font-style: "+(L?"italic;":"normal;"),t+="font-size: 14px;",t+="color: #000000;",t+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",t+="text-align: left;",t+="border: 2px solid gray;",t+=L?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",t+="text-indent: 0px;",t+="white-space: nowrap;",t+="border-radius: 10px;",L||(t+="filter: alpha(opacity = 90);",t+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),t+='} "> Sample Tooltip</div>',this.container.innerHTML=t,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},A.prototype.mouseMoveHandler=function(t,e){this._lastUpdated&&40>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this._updateToolTip(t,e))},A.prototype._updateToolTip=function(t,e){if(this.enabled){if("undefined"==typeof t||"undefined"==typeof e){if(isNaN(this._prevX)||isNaN(this._prevY))return;t=this._prevX,e=this._prevY}else this._prevX=t,this._prevY=e;var i=null,n=null,a=[],s=0;if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){for(s="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-e)+this.chart.axisX.minimum:(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum,i=[],n=0;n<this.chart.data.length;n++){var r=this.chart.data[n].getDataPointAtX(s,!0);r&&0<=r.index&&(r.dataSeries=this.chart.data[n],null!==r.dataPoint.y&&i.push(r))}if(0===i.length)return;for(i.sort(function(t,e){return t.distance-e.distance}),s=i[0],n=0;n<i.length;n++)i[n].dataPoint.x.valueOf()===s.dataPoint.x.valueOf()&&a.push(i[n]);i=null}else if((r=this.chart.getDataPointAtXY(t,e,!0))?(this.currentDataPointIndex=r.dataPointIndex,this.currentSeriesIndex=r.dataSeries.index):L?(r=p(t,e,this.chart._eventManager.ghostCtx),r>0&&"undefined"!=typeof this.chart._eventManager.objectMap[r]?(eventObject=this.chart._eventManager.objectMap[r],this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=0<=eventObject.dataPointIndex?eventObject.dataPointIndex:-1):this.currentDataPointIndex=-1):this.currentDataPointIndex=-1,0<=this.currentSeriesIndex){if(n=this.chart.data[this.currentSeriesIndex],r={},0<=this.currentDataPointIndex)i=n.dataPoints[this.currentDataPointIndex],r.dataSeries=n,r.dataPoint=i,r.index=this.currentDataPointIndex,r.distance=Math.abs(i.x-s);
else{if("line"!==n.type&&"stepLine"!==n.type&&"spline"!==n.type&&"area"!==n.type&&"stepArea"!==n.type&&"splineArea"!==n.type&&"stackedArea"!==n.type&&"stackedArea100"!==n.type)return;s=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf(),r=n.getDataPointAtX(s,!0),r.dataSeries=n,this.currentDataPointIndex=r.index,i=r.dataPoint}null!==r.dataPoint.y&&a.push(r)}if(0<a.length){this.highlightObjects(a),s="",s=this.getToolTipInnerHTML({entries:a}),this.contentDiv.innerHTML=s,this.contentDiv.innerHTML=s,s=!1,"none"===this.container.style.display&&(s=!0,this.container.style.display="block");try{this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:a[0].dataPoint.color?a[0].dataPoint.color:a[0].dataSeries.color?a[0].dataSeries.color:a[0].dataSeries._colorSet[a[0].index%a[0].dataSeries._colorSet.length]}catch(o){}"pie"===a[0].dataSeries.type||"doughnut"===a[0].dataSeries.type||"bar"===a[0].dataSeries.type||"stackedBar"===a[0].dataSeries.type||"stackedBar100"===a[0].dataSeries.type?toolTipLeft=t-10-this.container.clientWidth:(toolTipLeft=this.chart.axisX.lineCoordinates.width/Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum)*Math.abs(a[0].dataPoint.x-this.chart.axisX.minimum)+this.chart.axisX.lineCoordinates.x1+.5-this.container.clientWidth<<0,toolTipLeft-=10),toolTipLeft=toolTipLeft>0?toolTipLeft+"px":toolTipLeft+this.container.clientWidth+20+"px",a=1!==a.length||this.shared||"line"!==a[0].dataSeries.type&&"stepLine"!==a[0].dataSeries.type&&"spline"!==a[0].dataSeries.type&&"area"!==a[0].dataSeries.type&&"stepArea"!==a[0].dataSeries.type&&"splineArea"!==a[0].dataSeries.type&&"stackedArea"!==a[0].dataSeries.type&&"stackedArea100"!==a[0].dataSeries.type?"bar"===a[0].dataSeries.type||"stackedBar"===a[0].dataSeries.type||"stackedBar100"===a[0].dataSeries.type?a[0].dataSeries.axisX.lineCoordinates.y2-a[0].dataSeries.axisX.lineCoordinates.height/Math.abs(a[0].dataSeries.axisX.maximum-a[0].dataSeries.axisX.minimum)*Math.abs(a[0].dataPoint.x-a[0].dataSeries.axisX.minimum)+.5<<0:e:a[0].dataSeries.axisY.lineCoordinates.y2-a[0].dataSeries.axisY.lineCoordinates.height/Math.abs(a[0].dataSeries.axisY.maximum-a[0].dataSeries.axisY.minimum)*Math.abs(a[0].dataPoint.y-a[0].dataSeries.axisY.minimum)+.5<<0,a=-a+10,0<a+this.container.clientHeight+5&&(a-=a+this.container.clientHeight+5-0),this.container.style.left=toolTipLeft,this.container.style.bottom=a+"px",!this.animationEnabled||s?this.disableAnimation():this.enableAnimation()}}},A.prototype.highlightObjects=function(t){if(this.enabled){var e=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),e.save();var i=this.chart.plotArea;for(e.rect(i.x1,i.y1,i.width,i.height),e.clip(),e.beginPath(),i=0;i<t.length;i++){var n=t[i];if((n=this.chart._eventManager.objectMap[n.dataSeries.dataPointIds[n.index]])&&n.objectType&&"dataPoint"===n.objectType){var a=this.chart.data[n.dataSeriesIndex],s=n.dataPointIndex;"line"===a.type||"stepLine"===a.type||"spline"===a.type||"scatter"===a.type||"area"===a.type||"stepArea"===a.type||"splineArea"===a.type||"stackedArea"===a.type||"stackedArea100"===a.type?(a=a.getMarkerProperties(s,n.x1,n.y1,this.chart.overlaidCanvasCtx),a.size=Math.max(1.5*a.size<<0,10),a.borderColor=a.borderColor||"#FFFFFF",a.borderThickness=a.borderThickness||Math.ceil(.1*a.size),K.drawMarkers([a])):"bubble"===a.type?(a=a.getMarkerProperties(s,n.x1,n.y1,this.chart.overlaidCanvasCtx),a.size=n.size,a.color="white",a.borderColor="white",e.globalAlpha=.3,K.drawMarkers([a]),e.globalAlpha=1):"column"===a.type||"stackedColumn"===a.type||"stackedColumn100"===a.type||"bar"===a.type||"stackedBar"===a.type||"stackedBar100"===a.type?(e.globalAlpha=.3,q(e,n.x1,n.y1,n.x2,n.y2,"white",!1,!1,!1,!1),e.globalAlpha=1):("pie"===a.type||"doughnut"===a.type)&&(e.globalAlpha=.3,$(e,n.center,n.radius,"white",a.type,n.startAngle,n.endAngle),e.globalAlpha=1)}}e.globalAlpha=1,e.restore()}},A.prototype.getToolTipInnerHTML=function(t){t=t.entries;for(var e="",i=null,n=null,a=0,s="",r=!0,o=0;o<t.length;o++)if(t[o].dataSeries.toolTipContent||t[o].dataPoint.toolTipContent){r=!1;break}if(r&&this.content&&"function"==typeof this.content)e=this.content({entries:t});else if(1<t.length)for(o=0;o<t.length;o++)i=t[o].dataSeries,n=t[o].dataPoint,a=t[o].index,s="",0===o&&r&&!this.content&&(s+="undefined"!=typeof this.chart.axisX.labels[n.x]?this.chart.axisX.labels[n.x]:"{x}",s+="</br>"),"line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"column"===i.type||"bar"===i.type||"scatter"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type?s+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}":"bubble"===i.type?s+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===i.type||"doughnut"===i.type)&&(s+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"&nbsp;&nbsp;{y}"),e+=this.chart.replaceKeywordsWithValue(s,n,i,a),o<t.length-1&&(e+="</br>");else i=t[0].dataSeries,n=t[0].dataPoint,a=t[0].index,"line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"column"===i.type||"bar"===i.type||"scatter"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type?s=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(n.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}":"bubble"===i.type?s=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\"'color:{color};'\"'>"+(n.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===i.type||"doughnut"===i.type)&&(s=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:(n.name?"{name}:&nbsp;&nbsp;":n.label?"{label}:&nbsp;&nbsp;":"")+"{y}"),e+=this.chart.replaceKeywordsWithValue(s,n,i,a);return e},A.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")},A.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},A.prototype.hide=function(){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=0/0,this.chart.resetOverlayedCanvas())},y.prototype.replaceKeywordsWithValue=function(t,e,i,n){var a=this;return t.replace(/\{\s*[a-zA-Z]+\s*\}|"[^"]*"|'[^']*'/g,function(t){if('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])return t.slice(1,t.length-1);t=r(t.slice(1,t.length-1));var s=null;if("color"===t)return e.color?e.color:i.color?i.color:i._colorSet[n%i._colorSet.length];if(e.hasOwnProperty(t))s=e;else{if(!i.hasOwnProperty(t))return"";s=i}return"x"===t?a.axisX&&"dateTime"===a.plotInfo.axisXValueType?j(s[t],e.xValueFormatString?e.xValueFormatString:i.xValueFormatString?i.xValueFormatString:a.axisX&&a.axisX.valueFormatString?a.axisX.valueFormatString:"DD MMM YY",a._cultureInfo):Y(s[t],e.xValueFormatString?e.xValueFormatString:i.xValueFormatString?i.xValueFormatString:"#,##0.########",a._cultureInfo):"y"===t?Y(s[t],e.yValueFormatString?e.yValueFormatString:i.yValueFormatString?i.yValueFormatString:"#,##0.########",a._cultureInfo):s[t]})},I.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],L&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},I.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},I.prototype.mouseEventHandler=function(t){if("mousemove"===t.type||"click"===t.type){var e=[],i=H(t),n=null;if((n=this.chart.getObjectAtXY(i.x,i.y,!1))&&"undefined"!=typeof this.objectMap[n])if(n=this.objectMap[n],"dataPoint"===n.objectType){var a=this.chart.data[n.dataSeriesIndex],s=a.dataPoints[n.dataPointIndex],r=n.dataPointIndex;n.eventParameter={x:i.x,y:i.y,dataPoint:s,dataSeries:a._options,dataPointIndex:r,dataSeriesIndex:a.index},n.eventContext={context:s,userContext:s,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(n),n=this.objectMap[a.id],n.eventParameter={x:i.x,y:i.y,dataPoint:s,dataSeries:a._options,dataPointIndex:r,dataSeriesIndex:a.index},n.eventContext={context:a,userContext:a._options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(this.objectMap[a.id])}else"legendItem"===n.objectType&&(a=this.chart.data[n.dataSeriesIndex],s=a.dataPoints[n.dataPointIndex],n.eventParameter={x:i.x,y:i.y,dataSeries:a._options,dataPoint:s,dataPointIndex:n.dataPointIndex,dataSeriesIndex:n.dataSeriesIndex},n.eventContext={context:this.chart.legend,userContext:this.chart.legend._options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},e.push(n));for(a=[],i=0;i<this.mouseoveredObjectMaps.length;i++){for(s=!0,n=0;n<e.length;n++)if(e[n].id===this.mouseoveredObjectMaps[i].id){s=!1;break}s?this.fireEvent(this.mouseoveredObjectMaps[i],"mouseout",t):a.push(this.mouseoveredObjectMaps[i])}for(this.mouseoveredObjectMaps=a,i=0;i<e.length;i++){for(a=!1,n=0;n<this.mouseoveredObjectMaps.length;n++)if(e[i].id===this.mouseoveredObjectMaps[n].id){a=!0;break}a||(this.fireEvent(e[i],"mouseover",t),this.mouseoveredObjectMaps.push(e[i])),"click"===t.type?this.fireEvent(e[i],"click",t):"mousemove"===t.type&&this.fireEvent(e[i],"mousemove",t)}}},I.prototype.fireEvent=function(t,e,i){if(t&&e){var n=t.eventParameter,a=t.eventContext,s=t.eventContext.userContext;s&&a&&s[a[e]]&&s[a[e]].call(s,n),"mouseout"!==e?s.cursor&&s.cursor!==i.target.style.cursor&&(i.target.style.cursor=s.cursor):(i.target.style.cursor=this.chart._defaultCursor,delete t.eventParameter,delete t.eventContext),"click"===e&&"dataPoint"===t.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[t.dataSeriesIndex],n)}},t(F,v);var K={drawMarker:function(t,e,i,n,a,s,r,o){if(i){var l=1;i.fillStyle=s?s:"#000000",i.strokeStyle=r?r:"#000000",i.lineWidth=o?o:0,"circle"===n?(i.moveTo(t,e),i.beginPath(),i.arc(t,e,a/2,0,2*Math.PI,!1),s&&i.fill(),o&&(r?i.stroke():(l=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=l))):"square"===n?(i.beginPath(),i.rect(t-a/2,e-a/2,a,a),s&&i.fill(),o&&(r?i.stroke():(l=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=l))):"triangle"===n?(i.beginPath(),i.moveTo(t-a/2,e+a/2),i.lineTo(t+a/2,e+a/2),i.lineTo(t,e-a/2),i.closePath(),s&&i.fill(),o&&(r?i.stroke():(l=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=l)),i.beginPath()):"cross"===n&&(i.strokeStyle=s,i.lineWidth=a/4,i.beginPath(),i.moveTo(t-a/2,e-a/2),i.lineTo(t+a/2,e+a/2),i.stroke(),i.moveTo(t+a/2,e-a/2),i.lineTo(t-a/2,e+a/2),i.stroke())}},drawMarkers:function(t){for(var e=0;e<t.length;e++){var i=t[e];K.drawMarker(i.x,i.y,i.ctx,i.type,i.size,i.color,i.borderColor,i.borderThickness)}}},G={Chart:function(t,e){var i=new y(t,e,this);this.render=function(){i.render(this.options)},this.options=i._options},addColorSet:function(t,e){X[t]=e},addCultureInfo:function(t,e){B[t]=e}};G.Chart.version="v1.4.0 GA",window.CanvasJS=G}(),document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new p(this))}function e(t,e){var i=I.call(arguments,2);return function(){return t.apply(e,i.concat(I.call(arguments)))}}function i(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(t){t.namespaces.g_vml_||t.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),t.namespaces.g_o_||t.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),t.styleSheets.ex_canvas_||(t=t.createStyleSheet(),t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function a(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function s(t){t=t.srcElement,t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function r(){return[[1,0,0],[0,1,0],[0,0,1]]}function o(t,e){for(var i=r(),n=0;3>n;n++)for(var a=0;3>a;a++){for(var s=0,o=0;3>o;o++)s+=t[n][o]*e[o][a];i[n][a]=s}return i}function l(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function h(t){var e=t.indexOf("(",3),i=t.indexOf(")",e+1),e=t.substring(e+1,i).split(",");return(4!=e.length||"a"!=t.charAt(3))&&(e[3]=1),e}function c(t,e,i){return Math.min(i,Math.max(e,t))}function u(t,e,i){return 0>i&&i++,i>1&&i--,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}function d(t){if(t in D)return D[t];var e,i=1;if(t=String(t),"#"==t.charAt(0))e=t;else if(/^rgb/.test(t)){i=h(t),e="#";for(var n,a=0;3>a;a++)n=-1!=i[a].indexOf("%")?Math.floor(255*(parseFloat(i[a])/100)):+i[a],e+=L[c(n,0,255)];i=+i[3]}else if(/^hsl/.test(t)){if(a=i=h(t),e=parseFloat(a[0])/360%360,0>e&&e++,n=c(parseFloat(a[1])/100,0,1),a=c(parseFloat(a[2])/100,0,1),0==n)n=a=e=a;else{var s=.5>a?a*(1+n):a+n-a*n,r=2*a-s;n=u(r,s,e+1/3),a=u(r,s,e),e=u(r,s,e-1/3)}e="#"+L[Math.floor(255*n)]+L[Math.floor(255*a)]+L[Math.floor(255*e)],i=i[3]}else e=X[t]||t;return D[t]={color:e,alpha:i}}function p(t){this.m_=r(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*w,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",i=t.ownerDocument.createElement("div");i.style.cssText=e,t.appendChild(i),e=i.cloneNode(!1),e.style.backgroundColor="red",e.style.filter="alpha(opacity=0)",t.appendChild(e),this.element_=i,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function m(t,e,i,n){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),t.currentX_=n.x,t.currentY_=n.y}function x(t,e){var i=d(t.strokeStyle),n=i.color,i=i.alpha*t.globalAlpha,a=t.lineScale_*t.lineWidth;1>a&&(i*=a),e.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',z[t.lineCap]||"square",'"',' weight="',a,'px"',' color="',n,'" />')}function f(t,e,i,n){var a=t.fillStyle,s=t.arcScaleX_,r=t.arcScaleY_,o=n.x-i.x,l=n.y-i.y;if(a instanceof y){var h=0,c=n=0,u=0,p=1;if("gradient"==a.type_){h=a.x1_/s,i=a.y1_/r;var m=g(t,a.x0_/s,a.y0_/r),h=g(t,h,i),h=180*Math.atan2(h.x-m.x,h.y-m.y)/Math.PI;0>h&&(h+=360),1e-6>h&&(h=0)}else m=g(t,a.x0_,a.y0_),n=(m.x-i.x)/o,c=(m.y-i.y)/l,o/=s*w,l/=r*w,p=P.max(o,l),u=2*a.r0_/p,p=2*a.r1_/p-u;s=a.colors_,s.sort(function(t,e){return t.offset-e.offset}),r=s.length,m=s[0].color,i=s[r-1].color,o=s[0].alpha*t.globalAlpha,t=s[r-1].alpha*t.globalAlpha;for(var l=[],x=0;r>x;x++){var f=s[x];l.push(f.offset*p+u+" "+f.color)}e.push('<g_vml_:fill type="',a.type_,'"',' method="none" focus="100%"',' color="',m,'"',' color2="',i,'"',' colors="',l.join(","),'"',' opacity="',t,'"',' g_o_:opacity2="',o,'"',' angle="',h,'"',' focusposition="',n,",",c,'" />')}else a instanceof b?o&&l&&e.push("<g_vml_:fill",' position="',-i.x/o*s*s,",",-i.y/l*r*r,'"',' type="tile"',' src="',a.src_,'" />'):(a=d(t.fillStyle),e.push('<g_vml_:fill color="',a.color,'" opacity="',a.alpha*t.globalAlpha,'" />'))}function g(t,e,i){return t=t.m_,{x:w*(e*t[0][0]+i*t[1][0]+t[2][0])-A,y:w*(e*t[0][1]+i*t[1][1]+t[2][1])-A}}function v(t,e,i){isFinite(e[0][0])&&isFinite(e[0][1])&&isFinite(e[1][0])&&isFinite(e[1][1])&&isFinite(e[2][0])&&isFinite(e[2][1])&&(t.m_=e,i&&(t.lineScale_=M(C(e[0][0]*e[1][1]-e[0][1]*e[1][0]))))}function y(t){this.type_=t,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function b(t,e){if(!t||1!=t.nodeType||"IMG"!=t.tagName)throw new T("TYPE_MISMATCH_ERR");if("complete"!=t.readyState)throw new T("INVALID_STATE_ERR");switch(e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:throw new T("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function T(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var P=Math,k=P.round,S=P.sin,_=P.cos,C=P.abs,M=P.sqrt,w=10,A=w/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var I=Array.prototype.slice;n(document);var F={init:function(t){t=t||document,t.createElement("canvas"),t.attachEvent("onreadystatechange",e(this.init_,this,t))},init_:function(t){t=t.getElementsByTagName("canvas");for(var e=0;e<t.length;e++)this.initElement(t[e])},initElement:function(e){if(!e.getContext){e.getContext=t,n(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",a),e.attachEvent("onresize",s);var i=e.attributes;i.width&&i.width.specified?e.style.width=i.width.nodeValue+"px":e.width=e.clientWidth,i.height&&i.height.specified?e.style.height=i.height.nodeValue+"px":e.height=e.clientHeight}return e}};F.init();for(var L=[],E=0;16>E;E++)for(var B=0;16>B;B++)L[16*E+B]=E.toString(16)+B.toString(16);var X={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},D={},O={},z={butt:"flat",round:"round"},E=p.prototype;E.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},E.beginPath=function(){this.currentPath_=[]},E.moveTo=function(t,e){var i=g(this,t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},E.lineTo=function(t,e){var i=g(this,t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},E.bezierCurveTo=function(t,e,i,n,a,s){a=g(this,a,s),t=g(this,t,e),i=g(this,i,n),m(this,t,i,a)},E.quadraticCurveTo=function(t,e,i,n){t=g(this,t,e),i=g(this,i,n),n={x:this.currentX_+2/3*(t.x-this.currentX_),y:this.currentY_+2/3*(t.y-this.currentY_)},m(this,n,{x:n.x+(i.x-this.currentX_)/3,y:n.y+(i.y-this.currentY_)/3},i)},E.arc=function(t,e,i,n,a,s){i*=w;var r=s?"at":"wa",o=t+_(n)*i-A,l=e+S(n)*i-A;n=t+_(a)*i-A,a=e+S(a)*i-A,o!=n||s||(o+=.125),t=g(this,t,e),o=g(this,o,l),n=g(this,n,a),this.currentPath_.push({type:r,x:t.x,y:t.y,radius:i,xStart:o.x,yStart:o.y,xEnd:n.x,yEnd:n.y})},E.rect=function(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()},E.strokeRect=function(t,e,i,n){var a=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath(),this.stroke(),this.currentPath_=a},E.fillRect=function(t,e,i,n){var a=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath(),this.fill(),this.currentPath_=a},E.createLinearGradient=function(t,e,i,n){var a=new y("gradient");return a.x0_=t,a.y0_=e,a.x1_=i,a.y1_=n,a},E.createRadialGradient=function(t,e,i,n,a,s){var r=new y("gradientradial");return r.x0_=t,r.y0_=e,r.r0_=i,r.x1_=n,r.y1_=a,r.r1_=s,r},E.drawImage=function(t){var e,i,n,a,s,r,o,l;n=t.runtimeStyle.width,a=t.runtimeStyle.height,t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var h=t.width,c=t.height;if(t.runtimeStyle.width=n,t.runtimeStyle.height=a,3==arguments.length)e=arguments[1],i=arguments[2],s=r=0,o=n=h,l=a=c;else if(5==arguments.length)e=arguments[1],i=arguments[2],n=arguments[3],a=arguments[4],s=r=0,o=h,l=c;else{if(9!=arguments.length)throw Error("Invalid number of arguments");s=arguments[1],r=arguments[2],o=arguments[3],l=arguments[4],e=arguments[5],i=arguments[6],n=arguments[7],a=arguments[8]}var u=g(this,e,i),d=[];if(d.push(" <g_vml_:group",' coordsize="',10*w,",",10*w,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var p=[];p.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",k(u.x/w),",","Dy=",k(u.y/w),"");var m=g(this,e+n,i),x=g(this,e,i+a);e=g(this,e+n,i+a),u.x=P.max(u.x,m.x,x.x,e.x),u.y=P.max(u.y,m.y,x.y,e.y),d.push("padding:0 ",k(u.x/w),"px ",k(u.y/w),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",p.join(""),", sizingmethod='clip');")}else d.push("top:",k(u.y/w),"px;left:",k(u.x/w),"px;");d.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',w*n,"px;"," height:",w*a,'px"',' cropleft="',s/h,'"',' croptop="',r/c,'"',' cropright="',(h-s-o)/h,'"',' cropbottom="',(c-r-l)/c,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",d.join(""))},E.stroke=function(t){var e=[];e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*w,",",10*w,'"',' stroked="',!t,'"',' path="');for(var i={x:null,y:null},n={x:null,y:null},a=0;a<this.currentPath_.length;a++){var s=this.currentPath_[a];switch(s.type){case"moveTo":e.push(" m ",k(s.x),",",k(s.y));break;case"lineTo":e.push(" l ",k(s.x),",",k(s.y));break;case"close":e.push(" x "),s=null;break;case"bezierCurveTo":e.push(" c ",k(s.cp1x),",",k(s.cp1y),",",k(s.cp2x),",",k(s.cp2y),",",k(s.x),",",k(s.y));break;case"at":case"wa":e.push(" ",s.type," ",k(s.x-this.arcScaleX_*s.radius),",",k(s.y-this.arcScaleY_*s.radius)," ",k(s.x+this.arcScaleX_*s.radius),",",k(s.y+this.arcScaleY_*s.radius)," ",k(s.xStart),",",k(s.yStart)," ",k(s.xEnd),",",k(s.yEnd))}s&&((null==i.x||s.x<i.x)&&(i.x=s.x),(null==n.x||s.x>n.x)&&(n.x=s.x),(null==i.y||s.y<i.y)&&(i.y=s.y),(null==n.y||s.y>n.y)&&(n.y=s.y))}e.push(' ">'),t?f(this,e,i,n):x(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},E.fill=function(){this.stroke(!0)},E.closePath=function(){this.currentPath_.push({type:"close"})},E.save=function(){var t={};l(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=o(r(),this.m_)},E.restore=function(){this.aStack_.length&&(l(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},E.translate=function(t,e){v(this,o([[1,0,0],[0,1,0],[t,e,1]],this.m_),!1)},E.rotate=function(t){var e=_(t);t=S(t),v(this,o([[e,t,0],[-t,e,0],[0,0,1]],this.m_),!1)},E.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e,v(this,o([[t,0,0],[0,e,0],[0,0,1]],this.m_),!0)},E.transform=function(t,e,i,n,a,s){v(this,o([[t,e,0],[i,n,0],[a,s,1]],this.m_),!0)},E.setTransform=function(t,e,i,n,a,s){v(this,[[t,e,0],[i,n,0],[a,s,1]],!0)},E.drawText_=function(t,e,n,a,s){var r=this.m_;a=0;var o,l=1e3,h=0,c=[];if(o=this.font,O[o])o=O[o];else{var u=document.createElement("div").style;try{u.font=o}catch(d){}o=O[o]={style:u.fontStyle||"normal",variant:u.fontVariant||"normal",weight:u.fontWeight||"normal",size:u.fontSize||10,family:u.fontFamily||"sans-serif"}}var u=o,p=this.element_;o={};for(var m in u)o[m]=u[m];switch(m=parseFloat(p.currentStyle.fontSize),p=parseFloat(u.size),o.size="number"==typeof u.size?u.size:-1!=u.size.indexOf("px")?p:-1!=u.size.indexOf("em")?m*p:-1!=u.size.indexOf("%")?m/100*p:-1!=u.size.indexOf("pt")?p/.75:m,o.size*=.981,m=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px "+o.family,p=this.element_.currentStyle,u=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":u="ltr"==p.direction?"right":"left";break;case"start":u="rtl"==p.direction?"right":"left";break;default:u="left"}switch(this.textBaseline){case"hanging":case"top":h=o.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":h=-o.size/2.25}switch(u){case"right":a=1e3,l=.05;break;case"center":a=l=500}e=g(this,e+0,n+h),c.push('<g_vml_:line from="',-a,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!s,'" stroked="',!!s,'" style="position:absolute;width:1px;height:1px;">'),s?x(this,c):f(this,c,{x:-a,y:0},{x:l,y:o.size}),s=r[0][0].toFixed(3)+","+r[1][0].toFixed(3)+","+r[0][1].toFixed(3)+","+r[1][1].toFixed(3)+",0,0",e=k(e.x/w)+","+k(e.y/w),c.push('<g_vml_:skew on="t" matrix="',s,'" ',' offset="',e,'" origin="',a,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',i(t),'" style="v-text-align:',u,";font:",i(m),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",c.join(""))},E.fillText=function(t,e,i,n){this.drawText_(t,e,i,n,!1)},E.strokeText=function(t,e,i,n){this.drawText_(t,e,i,n,!0)},E.measureText=function(t){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var e=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(e.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},E.clip=function(){},E.arcTo=function(){},E.createPattern=function(t,e){return new b(t,e)},y.prototype.addColorStop=function(t,e){e=d(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})},E=T.prototype=Error(),E.INDEX_SIZE_ERR=1,E.DOMSTRING_SIZE_ERR=2,E.HIERARCHY_REQUEST_ERR=3,E.WRONG_DOCUMENT_ERR=4,E.INVALID_CHARACTER_ERR=5,E.NO_DATA_ALLOWED_ERR=6,E.NO_MODIFICATION_ALLOWED_ERR=7,E.NOT_FOUND_ERR=8,E.NOT_SUPPORTED_ERR=9,E.INUSE_ATTRIBUTE_ERR=10,E.INVALID_STATE_ERR=11,E.SYNTAX_ERR=12,E.INVALID_MODIFICATION_ERR=13,E.NAMESPACE_ERR=14,E.INVALID_ACCESS_ERR=15,E.VALIDATION_ERR=16,E.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=F,CanvasRenderingContext2D=p,CanvasGradient=y,CanvasPattern=b,DOMException=T}(),define("canvasjs",function(){}),define("hbs/handlebars",[],function(){var t=function(){var t=function(){function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){function e(t){return o[t]||"&amp;"}function i(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function n(t){return t instanceof r?t.toString():t||0===t?(t=""+t,h.test(t)?t.replace(l,e):t):""}function a(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var s={},r=t,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,h=/[&<>"'`]/;s.extend=i;var c=Object.prototype.toString;s.toString=c;var u=function(t){return"function"==typeof t};u(/x/)&&(u=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var u;s.isFunction=u;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return s.isArray=d,s.escapeExpression=n,s.isEmpty=a,s}(t),i=function(){function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var a=Error.prototype.constructor.call(this,t),s=0;s<i.length;s++)this[i[s]]=a[i[s]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new o("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse||function(){},a=i.fn;return d(e)&&(e=e.call(this)),e===!0?a(this):e===!1||null==e?n(this):u(e)?e.length>0?t.helpers.each(e,i):n(this):a(e)}),t.registerHelper("each",function(t,e){var i,n=e.fn,a=e.inverse,s=0,r="";if(d(t)&&(t=t.call(this)),e.data&&(i=f(e.data)),t&&"object"==typeof t)if(u(t))for(var o=t.length;o>s;s++)i&&(i.index=s,i.first=0===s,i.last=s===t.length-1),r+=n(t[s],{data:i});else for(var l in t)t.hasOwnProperty(l)&&(i&&(i.key=l,i.index=s,i.first=0===s),r+=n(t[l],{data:i}),s++);
return 0===s&&(r=a(this)),r}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),r.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)})}function a(t,e){x.log(t,e)}var s={},r=t,o=e,l="1.3.0";s.VERSION=l;var h=4;s.COMPILER_REVISION=h;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=c;var u=r.isArray,d=r.isFunction,p=r.toString,m="[object Object]";s.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:x,log:a,registerHelper:function(t,e,i){if(p.call(t)===m){if(i||e)throw new o("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){p.call(t)===m?r.extend(this.partials,t):this.partials[t]=e}};var x={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(x.level<=t){var i=x.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};s.logger=x,s.log=a;var f=function(t){var e={};return r.extend(e,t),e};return s.createFrame=f,s}(e,i),a=function(t,e,i){function n(t){var e=t&&t[0]||1,i=d;if(e!==i){if(i>e){var n=p[i],a=p[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function a(t,e){if(!e)throw new u("No environment passed to template");var i=function(t,i,n,a,s,r){var o=e.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(e.compile){var l={helpers:a,partials:s,data:r};return s[i]=e.compile(t,{data:void 0!==r},e),s[i](n,l)}throw new u("The partial "+i+" could not be compiled when running in runtime-only mode")},n={escapeExpression:c.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var n=this.programs[t];return i?n=r(t,e,i):n||(n=this.programs[t]=r(t,e)),n},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},c.extend(i,e),c.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,a){a=a||{};var s,r,o=a.partial?a:e;a.partial||(s=a.helpers,r=a.partials);var l=t.call(n,o,i,s,r,a.data);return a.partial||e.VM.checkRevision(n.compilerInfo),l}}function s(t,e,i){var n=Array.prototype.slice.call(arguments,3),a=function(t,a){return a=a||{},e.apply(this,[t,a.data||i].concat(n))};return a.program=t,a.depth=n.length,a}function r(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n}function o(t,e,i,n,a,s){var r={partial:!0,helpers:n,partials:a,data:s};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(i,r):void 0}function l(){return""}var h={},c=t,u=e,d=i.COMPILER_REVISION,p=i.REVISION_CHANGES;return h.checkRevision=n,h.template=a,h.programWithDepth=s,h.program=r,h.invokePartial=o,h.noop=l,h}(e,i,n),s=function(t,e,i,n,a){var s,r=t,o=e,l=i,h=n,c=a,u=function(){var t=new r.HandlebarsEnvironment;return h.extend(t,r),t.SafeString=o,t.Exception=l,t.Utils=h,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=u();return d.create=u,s=d}(n,t,i,e,a),r=function(t){function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var i,n=t,a={ProgramNode:function(t,i,n,s){var r,o;3===arguments.length?(s=n,n=null):2===arguments.length&&(s=i,i=null),e.call(this,s),this.type="program",this.statements=t,this.strip={},n?(o=n[0],o?(r={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new a.ProgramNode(n,i,r)):this.inverse=new a.ProgramNode(n,i),this.strip.right=i.left):i&&(this.strip.left=i.right)},MustacheNode:function(t,i,n,s,r){if(e.call(this,r),this.type="mustache",this.strip=s,null!=n&&n.charAt){var o=n.charAt(3)||n.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!n;this.sexpr=t instanceof a.SexprNode?t:new a.SexprNode(t,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,i,n){e.call(this,n),this.type="sexpr",this.hash=i;var a=this.id=t[0],s=this.params=t.slice(1),r=this.eligibleHelper=a.isSimple;this.isHelper=r&&(s.length||i)},PartialNode:function(t,i,n,a){e.call(this,a),this.type="partial",this.partialName=t,this.context=i,this.strip=n},BlockNode:function(t,i,a,s,r){if(e.call(this,r),t.sexpr.id.original!==s.path.original)throw new n(t.sexpr.id.original+" doesn't match "+s.path.original,this);this.type="block",this.mustache=t,this.program=i,this.inverse=a,this.strip={left:t.strip.left,right:s.strip.right},(i||a).strip.left=t.strip.right,(a||i).strip.right=s.strip.left,a&&!i&&(this.isInverse=!0)},ContentNode:function(t,i){e.call(this,i),this.type="content",this.string=t},HashNode:function(t,i){e.call(this,i),this.type="hash",this.pairs=t},IdNode:function(t,i){e.call(this,i),this.type="ID";for(var a="",s=[],r=0,o=0,l=t.length;l>o;o++){var h=t[o].part;if(a+=(t[o].separator||"")+h,".."===h||"."===h||"this"===h){if(s.length>0)throw new n("Invalid path: "+a,this);".."===h?r++:this.isScoped=!0}else s.push(h)}this.original=a,this.parts=s,this.string=s.join("."),this.depth=r,this.isSimple=1===t.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(t,i){e.call(this,i),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,i){e.call(this,i),this.type="DATA",this.id=t},StringNode:function(t,i){e.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,i){e.call(this,i),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,i){e.call(this,i),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,i){e.call(this,i),this.type="comment",this.comment=t}};return i=a}(i),o=function(){var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,i,n,a,s,r){var o=r.length-1;switch(s){case 1:return new a.ProgramNode(r[o-1],this._$);case 2:return new a.ProgramNode([],this._$);case 3:this.$=new a.ProgramNode([],r[o-1],r[o],this._$);break;case 4:this.$=new a.ProgramNode(r[o-2],r[o-1],r[o],this._$);break;case 5:this.$=new a.ProgramNode(r[o-1],r[o],[],this._$);break;case 6:this.$=new a.ProgramNode(r[o],this._$);break;case 7:this.$=new a.ProgramNode([],this._$);break;case 8:this.$=new a.ProgramNode([],this._$);break;case 9:this.$=[r[o]];break;case 10:r[o-1].push(r[o]),this.$=r[o-1];break;case 11:this.$=new a.BlockNode(r[o-2],r[o-1].inverse,r[o-1],r[o],this._$);break;case 12:this.$=new a.BlockNode(r[o-2],r[o-1],r[o-1].inverse,r[o],this._$);break;case 13:this.$=r[o];break;case 14:this.$=r[o];break;case 15:this.$=new a.ContentNode(r[o],this._$);break;case 16:this.$=new a.CommentNode(r[o],this._$);break;case 17:this.$=new a.MustacheNode(r[o-1],null,r[o-2],t(r[o-2],r[o]),this._$);break;case 18:this.$=new a.MustacheNode(r[o-1],null,r[o-2],t(r[o-2],r[o]),this._$);break;case 19:this.$={path:r[o-1],strip:t(r[o-2],r[o])};break;case 20:this.$=new a.MustacheNode(r[o-1],null,r[o-2],t(r[o-2],r[o]),this._$);break;case 21:this.$=new a.MustacheNode(r[o-1],null,r[o-2],t(r[o-2],r[o]),this._$);break;case 22:this.$=new a.PartialNode(r[o-2],r[o-1],t(r[o-3],r[o]),this._$);break;case 23:this.$=t(r[o-1],r[o]);break;case 24:this.$=new a.SexprNode([r[o-2]].concat(r[o-1]),r[o],this._$);break;case 25:this.$=new a.SexprNode([r[o]],null,this._$);break;case 26:this.$=r[o];break;case 27:this.$=new a.StringNode(r[o],this._$);break;case 28:this.$=new a.IntegerNode(r[o],this._$);break;case 29:this.$=new a.BooleanNode(r[o],this._$);break;case 30:this.$=r[o];break;case 31:r[o-1].isHelper=!0,this.$=r[o-1];break;case 32:this.$=new a.HashNode(r[o],this._$);break;case 33:this.$=[r[o-2],r[o]];break;case 34:this.$=new a.PartialNameNode(r[o],this._$);break;case 35:this.$=new a.PartialNameNode(new a.StringNode(r[o],this._$),this._$);break;case 36:this.$=new a.PartialNameNode(new a.IntegerNode(r[o],this._$));break;case 37:this.$=new a.DataNode(r[o],this._$);break;case 38:this.$=new a.IdNode(r[o],this._$);break;case 39:r[o-2].push({part:r[o],separator:r[o-1]}),this.$=r[o-2];break;case 40:this.$=[{part:r[o]}];break;case 43:this.$=[];break;case 44:r[o-1].push(r[o]);break;case 47:this.$=[r[o]];break;case 48:r[o-1].push(r[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],a=[null],s=[],r=this.table,o="",l=0,h=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,m,x,f,g,v,y,b,T,P={};;){if(x=n[n.length-1],this.defaultActions[x]?f=this.defaultActions[x]:((null===p||"undefined"==typeof p)&&(p=e()),f=r[x]&&r[x][p]),"undefined"==typeof f||!f.length||!f[0]){var k="";if(!c){T=[];for(v in r[x])this.terminals_[v]&&v>2&&T.push("'"+this.terminals_[v]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:T})}}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+p);switch(f[0]){case 1:n.push(p),a.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(f[1]),p=null,m?(p=m,m=null):(h=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[f[1]][1],P.$=a[a.length-y],P._$={first_line:s[s.length-(y||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(y||1)].first_column,last_column:s[s.length-1].last_column},d&&(P._$.range=[s[s.length-(y||1)].range[0],s[s.length-1].range[1]]),g=this.performAction.call(P,o,h,l,this.yy,f[1],a,s),"undefined"!=typeof g)return g;y&&(n=n.slice(0,-1*y*2),a=a.slice(0,-1*y),s=s.slice(0,-1*y)),n.push(this.productions_[f[1]][0]),a.push(P.$),s.push(P._$),b=r[n[n.length-2]][n[n.length-1]],n.push(b);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,a;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length&&(i=this._input.match(this.rules[s[r]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=r,this.options.flex));r++);return e?(a=e[0].match(/(?:\r\n?|\n).*/g),a&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function a(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(a(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(a(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return a(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return a(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=a(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=a(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=a(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return i.lexer=n,e.prototype=i,i.Parser=e,new e}();return t=e}(),l=function(t,e){function i(t){return t.constructor===s.ProgramNode?t:(a.yy=s,a.parse(t))}var n={},a=t,s=e;return n.parser=a,n.parse=i,n}(o,r),h=function(t){function e(){}function i(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=i.parse(t),a=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(a,e)}function n(t,e,i){function n(){var n=i.parse(t),a=(new i.Compiler).compile(n,e),s=(new i.JavaScriptCompiler).compile(a,e,void 0,!0);return i.template(s)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var a;return function(t,e){return a||(a=n()),a.call(this,t,e)}}var a={},s=t;return a.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,i,n=this.opcodes,a=[],s=0,r=n.length;r>s;s++)if(t=n[s],"DECLARE"===t.opcode)a.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var o=0;o<t.args.length;o++)i=t.args[o],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);a.push(t.opcode+" "+e.join(" "))}return a.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],a=t.opcodes[i];if(n.opcode!==a.opcode||n.args.length!==a.args.length)return!1;for(var s=0;s<n.args.length;s++)if(n.args[s]!==a.args[s])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.accept(t)},accept:function(t){var e,i=t.strip||{};return i.left&&this.opcode("strip"),e=this[t.type](t),i.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,i=0,n=e.length;n>i;i++)this.accept(e[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var a=0,s=i.depths.list.length;s>a;a++)e=i.depths.list[a],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var a=e.sexpr,s=this.classifySexpr(a);"helper"===s?this.helperSexpr(a,i,n):"simple"===s?(this.simpleSexpr(a),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(a,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var a=0,s=n.length;s>a;a++)e=n[a],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,i){var n=t.id,a=n.parts[0],s=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",a,s)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),a=t.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",n.length,a);else{if(this.options.knownHelpersOnly)throw new s("You specified knownHelpersOnly, but used the unknown helper "+a,t);this.opcode("invokeHelper",n.length,a,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new s("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,n=e.length;n>i;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var a=t.id.parts[0];n.knownHelpers[a]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},a.precompile=i,a.compile=n,a}(i),c=function(t,e){function i(t){this.value=t}function n(){}var a,s=t.COMPILER_REVISION,r=t.REVISION_CHANGES,o=t.log,l=e;n.prototype={nameLookup:function(t,e){var i,a;return 0===t.indexOf("depth")&&(i=!0),a=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+a+")":a},compilerInfo:function(){var t=s,e=r[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var a,s=t.opcodes;this.i=0;for(var r=s.length;this.i<r;this.i++)a=s[this.i],"DECLARE"===a.opcode?this[a.name]=a.value:this[a.opcode].apply(this,a.args),a.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,s=this.environment.depths.list.length;s>a;a++)n.push("depth"+this.environment.depths.list[a]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),t)return n.push(r),Function.apply(this,n);var l="function "+(this.name||"")+"("+n.join(",")+") {\n  "+r+"}";return o("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",i=0,n=this.source.length;n>i;i++){var a=this.source[i];a.appendToBuffer?t=t?t+"\n    + "+a.content:a.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=a+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(t,e,!0),a=this.nameLookup("depth"+this.lastContext,e,"context"),s="helper = "+n.name+" || "+a;n.paramsInit&&(s+=","+n.paramsInit),this.push("("+s+",helper ? helper.call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),a=this.nameLookup("depth"+this.lastContext,t,"context"),s=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+s+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+a+"; "+s+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var a=this.hash;e&&a.contexts.push("'"+t+"': "+e),i&&a.types.push("'"+t+"': "+i),a.values.push("'"+t+"': ("+n+")")},compiler:n,compileChildren:function(t,e){for(var i,n,a=t.children,s=0,r=a.length;r>s;s++){i=a[s],n=new this.compiler;var o=this.matchExistingProgram(i);null==o?(this.context.programs.push(""),o=this.context.programs.length,i.index=o,i.name="program"+o,this.context.programs[o]=n.compile(i,e,this.context),this.context.environments[o]=i):(i.index=o,i.name="program"+o)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,a=[i.index,i.name,"data"],s=0,r=n.length;r>s;s++)e=n[s],a.push(1===e?"depth0":"depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+a.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n,a,s="",r=this.isInline();if(r){var o=this.popStack(!0);if(o instanceof i)e=o.value,a=!0;else{n=!this.stackSlot;var l=n?this.incrStack():this.topStackName();s="("+this.push(l)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var h=t.call(this,e);return r?(a||this.popStack(),n&&this.stackSlot--,this.push("("+s+h+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+s+h+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var a=t[e];a instanceof i?this.compileStack.push(a):this.pushStack(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return n},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof i?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[],a=this.setupParams(t,n,i),s=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:a,name:s,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupOptions:function(t,e){var i,n,a,s=[],r=[],o=[];s.push("hash:"+this.popStack()),this.options.stringParams&&(s.push("hashTypes:"+this.popStack()),s.push("hashContexts:"+this.popStack())),n=this.popStack(),a=this.popStack(),(a||n)&&(a||(this.context.aliases.self="this",a="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),s.push("inverse:"+n),s.push("fn:"+a));for(var l=0;t>l;l++)i=this.popStack(),e.push(i),this.options.stringParams&&(o.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+r.join(",")+"]"),s.push("types:["+o.join(",")+"]")),this.options.data&&s.push("data:data"),s},setupParams:function(t,e,i){var n="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+n):(e.push(n),"")}};for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=n.RESERVED_WORDS={},u=0,d=h.length;d>u;u++)c[h[u]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},a=n}(n,i),u=function(t,e,i,n,a){var s,r=t,o=e,l=i.parser,h=i.parse,c=n.Compiler,u=n.compile,d=n.precompile,p=a,m=r.create,x=function(){var t=m();return t.compile=function(e,i){return u(e,i,t)},t.precompile=function(e,i){return d(e,i,t)},t.AST=o,t.Compiler=c,t.JavaScriptCompiler=p,t.Parser=l,t.parse=h,t};return r=x(),r.create=x,s=r}(s,r,l,h,c);return u}();return t}),define("hbs/underscore",[],function(){function t(e,i,n){if(e===i)return 0!==e||1/e==1/i;if(null==e||null==i)return e===i;if(e._chain&&(e=e._wrapped),i._chain&&(i=i._wrapped),e.isEqual&&T.isFunction(e.isEqual))return e.isEqual(i);if(i.isEqual&&T.isFunction(i.isEqual))return i.isEqual(e);var a=o.call(e);if(a!=o.call(i))return!1;switch(a){case"[object String]":return e==String(i);case"[object Number]":return e!=+e?i!=+i:0==e?1/e==1/i:e==+i;case"[object Date]":case"[object Boolean]":return+e==+i;case"[object RegExp]":return e.source==i.source&&e.global==i.global&&e.multiline==i.multiline&&e.ignoreCase==i.ignoreCase}if("object"!=typeof e||"object"!=typeof i)return!1;for(var s=n.length;s--;)if(n[s]==e)return!0;n.push(e);var r=0,l=!0;if("[object Array]"==a){if(r=e.length,l=r==i.length)for(;r--&&(l=r in e==r in i&&t(e[r],i[r],n)););}else{if("constructor"in e!="constructor"in i||e.constructor!=i.constructor)return!1;for(var h in e)if(T.has(e,h)&&(r++,!(l=T.has(i,h)&&t(e[h],i[h],n))))break;if(l){for(h in i)if(T.has(i,h)&&!r--)break;l=!r}}return n.pop(),l}var e={},i=Array.prototype,n=Object.prototype,a=Function.prototype,s=i.slice,r=i.unshift,o=n.toString,l=n.hasOwnProperty,h=i.forEach,c=i.map,u=i.reduce,d=i.reduceRight,p=i.filter,m=i.every,x=i.some,f=i.indexOf,g=i.lastIndexOf,v=Array.isArray,y=Object.keys,b=a.bind,T=function(t){return new L(t)};T.VERSION="1.3.3";var P=T.each=T.forEach=function(t,i,n){if(null!=t)if(h&&t.forEach===h)t.forEach(i,n);else if(t.length===+t.length){for(var a=0,s=t.length;s>a;a++)if(a in t&&i.call(n,t[a],a,t)===e)return}else for(var r in t)if(T.has(t,r)&&i.call(n,t[r],r,t)===e)return};T.map=T.collect=function(t,e,i){var n=[];return null==t?n:c&&t.map===c?t.map(e,i):(P(t,function(t,a,s){n[n.length]=e.call(i,t,a,s)}),t.length===+t.length&&(n.length=t.length),n)},T.reduce=T.foldl=T.inject=function(t,e,i,n){var a=arguments.length>2;if(null==t&&(t=[]),u&&t.reduce===u)return n&&(e=T.bind(e,n)),a?t.reduce(e,i):t.reduce(e);if(P(t,function(t,s,r){a?i=e.call(n,i,t,s,r):(i=t,a=!0)}),!a)throw new TypeError("Reduce of empty array with no initial value");return i},T.reduceRight=T.foldr=function(t,e,i,n){var a=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return n&&(e=T.bind(e,n)),a?t.reduceRight(e,i):t.reduceRight(e);var s=T.toArray(t).reverse();return n&&!a&&(e=T.bind(e,n)),a?T.reduce(s,e,i,n):T.reduce(s,e)},T.find=T.detect=function(t,e,i){var n;return k(t,function(t,a,s){return e.call(i,t,a,s)?(n=t,!0):void 0}),n},T.filter=T.select=function(t,e,i){var n=[];return null==t?n:p&&t.filter===p?t.filter(e,i):(P(t,function(t,a,s){e.call(i,t,a,s)&&(n[n.length]=t)}),n)},T.reject=function(t,e,i){var n=[];return null==t?n:(P(t,function(t,a,s){e.call(i,t,a,s)||(n[n.length]=t)}),n)},T.every=T.all=function(t,i,n){var a=!0;return null==t?a:m&&t.every===m?t.every(i,n):(P(t,function(t,s,r){return(a=a&&i.call(n,t,s,r))?void 0:e}),!!a)};var k=T.some=T.any=function(t,i,n){i||(i=T.identity);var a=!1;return null==t?a:x&&t.some===x?t.some(i,n):(P(t,function(t,s,r){return a||(a=i.call(n,t,s,r))?e:void 0}),!!a)};T.include=T.contains=function(t,e){var i=!1;return null==t?i:f&&t.indexOf===f?-1!=t.indexOf(e):i=k(t,function(t){return t===e})},T.invoke=function(t,e){var i=s.call(arguments,2);return T.map(t,function(t){return(T.isFunction(e)?e||t:t[e]).apply(t,i)})},T.pluck=function(t,e){return T.map(t,function(t){return t[e]})},T.max=function(t,e,i){if(!e&&T.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&T.isEmpty(t))return-1/0;var n={computed:-1/0};return P(t,function(t,a,s){var r=e?e.call(i,t,a,s):t;r>=n.computed&&(n={value:t,computed:r})}),n.value},T.min=function(t,e,i){if(!e&&T.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&T.isEmpty(t))return 1/0;var n={computed:1/0};return P(t,function(t,a,s){var r=e?e.call(i,t,a,s):t;r<n.computed&&(n={value:t,computed:r})}),n.value},T.shuffle=function(t){var e,i=[];return P(t,function(t,n){e=Math.floor(Math.random()*(n+1)),i[n]=i[e],i[e]=t}),i},T.sortBy=function(t,e,i){var n=T.isFunction(e)?e:function(t){return t[e]};return T.pluck(T.map(t,function(t,e,a){return{value:t,criteria:n.call(i,t,e,a)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;return void 0===i?1:void 0===n?-1:n>i?-1:i>n?1:0}),"value")},T.groupBy=function(t,e){var i={},n=T.isFunction(e)?e:function(t){return t[e]};return P(t,function(t,e){var a=n(t,e);(i[a]||(i[a]=[])).push(t)}),i},T.sortedIndex=function(t,e,i){i||(i=T.identity);for(var n=0,a=t.length;a>n;){var s=n+a>>1;i(t[s])<i(e)?n=s+1:a=s}return n},T.toArray=function(t){return t?T.isArray(t)?s.call(t):T.isArguments(t)?s.call(t):t.toArray&&T.isFunction(t.toArray)?t.toArray():T.values(t):[]},T.size=function(t){return T.isArray(t)?t.length:T.keys(t).length},T.first=T.head=T.take=function(t,e,i){return null==e||i?t[0]:s.call(t,0,e)},T.initial=function(t,e,i){return s.call(t,0,t.length-(null==e||i?1:e))},T.last=function(t,e,i){return null==e||i?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},T.rest=T.tail=function(t,e,i){return s.call(t,null==e||i?1:e)},T.compact=function(t){return T.filter(t,function(t){return!!t})},T.flatten=function(t,e){return T.reduce(t,function(t,i){return T.isArray(i)?t.concat(e?i:T.flatten(i)):(t[t.length]=i,t)},[])},T.without=function(t){return T.difference(t,s.call(arguments,1))},T.uniq=T.unique=function(t,e,i){var n=i?T.map(t,i):t,a=[];return t.length<3&&(e=!0),T.reduce(n,function(i,n,s){return(e?T.last(i)===n&&i.length:T.include(i,n))||(i.push(n),a.push(t[s])),i},[]),a},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=T.intersect=function(t){var e=s.call(arguments,1);return T.filter(T.uniq(t),function(t){return T.every(e,function(e){return T.indexOf(e,t)>=0})})},T.difference=function(t){var e=T.flatten(s.call(arguments,1),!0);return T.filter(t,function(t){return!T.include(e,t)})},T.zip=function(){for(var t=s.call(arguments),e=T.max(T.pluck(t,"length")),i=new Array(e),n=0;e>n;n++)i[n]=T.pluck(t,""+n);return i},T.indexOf=function(t,e,i){if(null==t)return-1;var n,a;if(i)return n=T.sortedIndex(t,e),t[n]===e?n:-1;if(f&&t.indexOf===f)return t.indexOf(e);for(n=0,a=t.length;a>n;n++)if(n in t&&t[n]===e)return n;return-1},T.lastIndexOf=function(t,e){if(null==t)return-1;if(g&&t.lastIndexOf===g)return t.lastIndexOf(e);for(var i=t.length;i--;)if(i in t&&t[i]===e)return i;return-1},T.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),a=0,s=new Array(n);n>a;)s[a++]=t,t+=i;return s};var S=function(){};T.bind=function(t,e){var i,n;if(t.bind===b&&b)return b.apply(t,s.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(s.call(arguments)));S.prototype=t.prototype;var a=new S,r=t.apply(a,n.concat(s.call(arguments)));return Object(r)===r?r:a}},T.bindAll=function(t){var e=s.call(arguments,1);return 0==e.length&&(e=T.functions(t)),P(e,function(e){t[e]=T.bind(t[e],t)}),t},T.memoize=function(t,e){var i={};return e||(e=T.identity),function(){var n=e.apply(this,arguments);return T.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},T.delay=function(t,e){var i=s.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},T.defer=function(t){return T.delay.apply(T,[t,1].concat(s.call(arguments,1)))},T.throttle=function(t,e){var i,n,a,s,r,o,l=T.debounce(function(){r=s=!1},e);return function(){i=this,n=arguments;var h=function(){a=null,r&&t.apply(i,n),l()};return a||(a=setTimeout(h,e)),s?r=!0:o=t.apply(i,n),l(),s=!0,o}},T.debounce=function(t,e,i){var n;return function(){var a=this,s=arguments,r=function(){n=null,i||t.apply(a,s)};i&&!n&&t.apply(a,s),clearTimeout(n),n=setTimeout(r,e)}},T.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments))}},T.wrap=function(t,e){return function(){var i=[t].concat(s.call(arguments,0));return e.apply(this,i)}},T.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},T.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},T.keys=y||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)T.has(t,i)&&(e[e.length]=i);return e},T.values=function(t){return T.map(t,T.identity)},T.functions=T.methods=function(t){var e=[];for(var i in t)T.isFunction(t[i])&&e.push(i);return e.sort()},T.extend=function(t){return P(s.call(arguments,1),function(e){for(var i in e)t[i]=e[i]}),t},T.pick=function(t){var e={};return P(T.flatten(s.call(arguments,1)),function(i){i in t&&(e[i]=t[i])}),e},T.defaults=function(t){return P(s.call(arguments,1),function(e){for(var i in e)null==t[i]&&(t[i]=e[i])}),t},T.clone=function(t){return T.isObject(t)?T.isArray(t)?t.slice():T.extend({},t):t},T.tap=function(t,e){return e(t),t},T.isEqual=function(e,i){return t(e,i,[])},T.isEmpty=function(t){if(null==t)return!0;if(T.isArray(t)||T.isString(t))return 0===t.length;for(var e in t)if(T.has(t,e))return!1;return!0},T.isElement=function(t){return!(!t||1!=t.nodeType)},T.isArray=v||function(t){return"[object Array]"==o.call(t)},T.isObject=function(t){return t===Object(t)},T.isArguments=function(t){return"[object Arguments]"==o.call(t)},T.isArguments(arguments)||(T.isArguments=function(t){return!(!t||!T.has(t,"callee"))}),T.isFunction=function(t){return"[object Function]"==o.call(t)},T.isString=function(t){return"[object String]"==o.call(t)},T.isNumber=function(t){return"[object Number]"==o.call(t)},T.isFinite=function(t){return T.isNumber(t)&&isFinite(t)},T.isNaN=function(t){return t!==t},T.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==o.call(t)},T.isDate=function(t){return"[object Date]"==o.call(t)},T.isRegExp=function(t){return"[object RegExp]"==o.call(t)},T.isNull=function(t){return null===t},T.isUndefined=function(t){return void 0===t},T.has=function(t,e){return l.call(t,e)},T.noConflict=function(){return root._=previousUnderscore,this},T.identity=function(t){return t},T.times=function(t,e,i){for(var n=0;t>n;n++)e.call(i,n)},T.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},T.result=function(t,e){if(null==t)return null;var i=t[e];return T.isFunction(i)?i.call(t):i},T.mixin=function(t){P(T.functions(t),function(e){B(e,T[e]=t[e])})};var _=0;T.uniqueId=function(t){var e=_++;return t?t+e:e},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,M={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var w in M)M[M[w]]=w;var A=/\\|'|\r|\n|\t|\u2028|\u2029/g,I=/\\(\\|'|r|n|t|u2028|u2029)/g,F=function(t){return t.replace(I,function(t,e){return M[e]})};T.template=function(t,e,i){i=T.defaults(i||{},T.templateSettings);var n="__p+='"+t.replace(A,function(t){return"\\"+M[t]}).replace(i.escape||C,function(t,e){return"'+\n_.escape("+F(e)+")+\n'"}).replace(i.interpolate||C,function(t,e){return"'+\n("+F(e)+")+\n'"}).replace(i.evaluate||C,function(t,e){return"';\n"+F(e)+"\n;__p+='"})+"';\n";i.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+n+"return __p;\n";var a=new Function(i.variable||"obj","_",n);if(e)return a(e,T);var s=function(t){return a.call(this,t,T)};return s.source="function("+(i.variable||"obj")+"){\n"+n+"}",s},T.chain=function(t){return T(t).chain()};var L=function(t){this._wrapped=t};T.prototype=L.prototype;var E=function(t,e){return e?T(t).chain():t},B=function(t,e){L.prototype[t]=function(){var t=s.call(arguments);return r.call(t,this._wrapped),E(e.apply(T,t),this._chain)}};return T.mixin(T),P(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];L.prototype[t]=function(){var i=this._wrapped;e.apply(i,arguments);var n=i.length;return"shift"!=t&&"splice"!=t||0!==n||delete i[0],E(i,this._chain)}}),P(["concat","join","slice"],function(t){var e=i[t];L.prototype[t]=function(){return E(e.apply(this._wrapped,arguments),this._chain)}}),L.prototype.chain=function(){return this._chain=!0,this},L.prototype.value=function(){return this._wrapped},T}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(t,e){function i(n,a,s){return s=s||{},a=a||{},n&&"program"===n.type&&n.statements&&(e(n.statements).forEach(function(e,r){var o="<!-- i18n error -->";if("mustache"===e.type&&e.id&&"$"===e.id.original){if(e.params.length&&e.params[0].string){var l=e.params[0].string;o=a[l]||(s.originalKeyFallback?l:o)}n.statements[r]=new t.AST.ContentNode(o)}else e.program&&(e.program=i(e.program,a,s))}),n.inverse&&i(n.inverse,a,s)),n}return function(e,n,a){a=a||{};var s,r;return s=t.parse(e),n!==!1&&(s=i(s,n,a)),r=(new t.Compiler).compile(s,a),(new t.JavaScriptCompiler).compile(r,a)}}),function(window){var JSON=window.JSON||{};!function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,a,s,r,o=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;s>i;i+=1)r[i]=str(i,l)||"null";return a=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+o+"]":"["+r.join(",")+"]",gap=o,a}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;s>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],a=str(n,l),a&&r.push(quote(n)+(gap?": ":":")+a));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(a=str(n,l),a&&r.push(quote(n)+(gap?": ":":")+a));return a=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+o+"}":"{"+r.join(",")+"}",gap=o,a}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,a=t[e];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n=walk(a,i),void 0!==n?a[i]=n:delete a[i]);return reviver.call(t,e,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",["hbs/handlebars","hbs/underscore","hbs/i18nprecompile","hbs/json2"],function(t,e,i,n){var a,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=function(){throw new Error("Environment unsupported.")},l=[],h="w+",c="hbs",u="@hbs",d="/styles/",p="/demo-build/styles/",m="templates/helpers/",x="templates/i18n/",f="screen.build.css",g="onHbsRead";t.registerHelper("$",function(){}),"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(s=function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return arguments[0]===!0?new XDomainRequest:new XMLHttpRequest;for(e=0;3>e;e++){i=r[e];try{t=new ActiveXObject(i)}catch(n){}if(t){r=[i];break}}if(!t)throw new Error("getXhr(): XMLHttpRequest not available");return t},getIEVersion=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(t=parseFloat(RegExp.$1))}return t},o=function(t,e){var i=!1;if(0!=t.indexOf("http"))i=!1;else{var n="https"===t.substr(0,5)?8:7,a="https"===window.location.href.substr(0,5)?8:7,r=t.substr(n).split("/").shift(),o=getIEVersion();i=r!=window.location.href.substr(a).split("/").shift()&&o>=7}if(i){var l=s(!0);l.open("GET",t),l.onload=function(){e(l.responseText,t)},l.onprogress=function(){},l.ontimeout=function(){},l.onerror=function(){},setTimeout(function(){l.send()},0)}else{var h=s();h.open("GET",t,!0),h.onreadystatechange=function(){4===h.readyState&&e(h.responseText,t)},h.send(null)}}):"undefined"!=typeof process&&process.versions&&process.versions.node?(a=require.nodeRequire("fs"),o=function(t,e){var i=a.readFileSync(t,"utf8")||"";i=i.replace(/^\uFEFF/,""),e(i,t)}):"undefined"!=typeof java&&"undefined"!=typeof java.io&&(o=function(t,e){for(var i,n=new java.io.File(t),a=new java.io.FileReader(n),s=new java.io.BufferedReader(a),r="";null!==(i=s.readLine());)r+=new String(i)+"\n";s.close(),e(r,t)});var v={},y=function(t,e){v[t]?e(v[t]):o(t,function(t,i){v[i]=t,e.call(this,t)})},b=[],T={};return{get:function(){return t},write:function(t,e,i){if(e+u in l){var n=l[e+u];i.asModule(t+"!"+e,n)}},version:"0.5.0",load:function(s,r,v,P){function k(t,i){return e(t).forEach(function(t){t&&t.type&&"partial"===t.type&&i.push(t.partialName.name),t&&t.program&&t.program.statements&&k(t.program.statements,i),t&&t.program&&t.program.inverse&&t.program.inverse.statements&&k(t.program.inverse.statements,i)}),i}function S(t){var i=[];return t&&t.statements&&(i=k(t.statements,[])),e(i).unique()}function _(t){var e,i,a;if(t&&t.statements&&(e=t.statements[0],e&&"comment"===e.type))try{return i=e.comment.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),a=n.parse(i),i}catch(s){return'{ "description" : "'+e.comment+'" }'}return"{}"}function C(t){if(!t)return[];var e,i=[t[0]],n=t[0];for(e=1;e<t.length;++e)t.hasOwnProperty(e)&&(n+="."+t[e],i.push(n));return i}function M(i,n,a,s){a=a?a+".":"";var r="";return e(i).forEach(function(i){var o,l,h;if(i&&i.type&&"mustache"===i.type){if(!i.params||!i.params.length){o=C(i.id.parts);for(l in o)o[l]&&(r=o[l]||r,n.push(a+o[l]));n.push(a+i.id.string)}var c=["this",".","..","./..","../..","../../.."];i.params&&"undefined"==typeof t.helpers[i.id.string]&&e(i.params).forEach(function(l){(e(c).contains(l.original)||l instanceof t.AST.StringNode||l instanceof t.AST.IntegerNode||l instanceof t.AST.BooleanNode)&&s.push(i.id.string),o=C(l.parts);for(var h in o)o[h]&&(r=o[h]||r,s.push(i.id.string),n.push(a+o[h]))})}i&&i.mustache&&M([i.mustache],n,a+r,s),i&&i.program&&i.program.statements&&(h=M([i.mustache],[],"",s)[0]||"",i.program.inverse&&i.program.inverse.statements&&M(i.program.inverse.statements,n,a+r+(h?a+r?"."+h:h:""),s),M(i.program.statements,n,a+r+(h?a+r?"."+h:h:""),s))}),n}function w(t){var i=[],n=[];t&&t.statements&&(i=M(t.statements,[],void 0,n));var a=["helperMissing","blockHelperMissing","each","if","unless","with"];return{vars:e(i).chain().unique().map(function(t){return""===t?".":t.length&&"."===t[t.length-1]?t.substr(0,t.length-1)+"[]":t}).value(),helpers:e(n).chain().unique().map(function(t){return e(a).contains(t)?void 0:t}).compact().value()}}function A(t){for(var e=t.split("/"),i=0;i<e.length;i++)".."==e[i]&&(delete e[i-1],delete e[i]);return e.join("/").replace(/\/\/+/g,"/")}function I(c){o(X,function(o,u){var x,y,k,C,M,I=P.isBuild&&P[g]?P[g]:function(t,e,i){return i},X=t.parse(I(s,u,o)),D=S(X),O=_(X),z=w(X),N=z.vars,j=z.helpers||[],Y="",H="",R="",W=[],U=s.substr(0,s.lastIndexOf("/")+1);if(require.config.hbs=require.config.hbs||{},require.config.hbs._partials=require.config.hbs._partials||{},"{}"!==O)try{k=n.parse(O)}catch(V){console.log("couldn't parse meta for %s",u)}for(var q in D)if(D.hasOwnProperty(q)&&"string"==typeof D[q]){var u,$=D[q];u=A($.match(/^(\.|\/)+/)?U+$:B+$),require.config.hbs._partials[u]=require.config.hbs._partials[u]||[],require.config.hbs._partials[u].references=require.config.hbs._partials[u].references||[],require.config.hbs._partials[u].references.push($),require.config.hbs._loadedDeps=require.config.hbs._loadedDeps||{},W[q]="hbs!"+u}if(x=W.join("', '"),j=j.concat(k&&k.helpers?k.helpers:[]),y=E?"":function(){var t,e=[],i=P.hbs&&P.hbs.helperPathCallback?P.hbs.helperPathCallback:function(t){return(P.hbs&&P.hbs.helperDirectory?P.hbs.helperDirectory:m)+t};for(t=0;t<j.length;t++)e[t]="'"+i(j[t],u)+"'";return e}().join(","),y&&(y=","+y),k)try{k.styles&&(b=e.union(b,k.styles),require.isBrowser&&!P.isBuild?(C=document.head||document.getElementsByTagName("head")[0],e(k.styles).forEach(function(t){T[t]||(M=document.createElement("link"),M.href=P.baseUrl+d+t+".css",M.media="all",M.rel="stylesheet",M.type="text/css",C.appendChild(M),T[t]=M)})):P.isBuild&&!function(){var t=require.nodeRequire("fs"),i=e(k.styles).map(function(t){return T[t]?"":(T[t]=!0,"@import url("+t+".css);\n")}).join("\n");t.open(__dirname+p+f,h,"0666",function(e,n){t.writeSync(n,i,null,encoding="utf8"),t.close(n)}),h="a"}())}catch(V){console.log("error injecting styles")}P.isBuild||P.serverRender||(Y="<!-- START - "+s+" -->",H="<!-- END - "+s+" -->",R="t.meta = "+O+";\nt.helpers = "+n.stringify(j)+";\nt.deps = "+n.stringify(W)+";\nt.vars = "+n.stringify(N)+";\n");var K=L?!1:e.extend(c,P.localeMapping),G=P.hbs||{},J=e.extend(G.compileOptions||{},{originalKeyFallback:G.originalKeyFallback}),Z=i(o,K,J),Q=P.isBuild?"":"'"+s+"',";x&&(x=", '"+x+"'");var te=[];require.config.hbs._partials[s]&&(te=require.config.hbs._partials[s].references),o="/* START_TEMPLATE */\ndefine("+Q+"['hbs','hbs/handlebars'"+x+y+"], function( hbs, Handlebars ){ \nvar t = Handlebars.template("+Z+");\n";for(var q=0;q<te.length;q++)o+="Handlebars.registerPartial('"+te[q]+"', t);\n";o+=R+"return t;\n});\n/* END_TEMPLATE */\n",P.isBuild&&(l[F]=o),P.isBuild||(o+="\r\n//@ sourceURL="+u),P.isBuild?(v.fromText(s,o),r([s],function(t){v(t)})):require(W,function(){v.fromText(o),r([s],function(t){v(t)})}),P.removeCombined&&u&&a.unlinkSync(u)})}var F=s+u;P.hbs=P.hbs||{};var L=!(1==P.hbs.i18n),E=0==P.hbs.helpers,B="";P.hbs.partialsUrl&&(B=P.hbs.partialsUrl,B.match(/\/$/)||(B+="/"));var X,D=P.hbs&&P.hbs.templateExtension===!1;if(X=r.toUrl(D?s:s+"."+(P.hbs&&P.hbs.templateExtension?P.hbs.templateExtension:c)),L)I(!1);else{var O=(P.hbs&&P.hbs.i18nDirectory?P.hbs.i18nDirectory:x)+(P.locale||"en_us")+".json";try{y(r.toUrl(O),function(t){I(n.parse(t))})}catch(z){if(P.hbs)throw z;console.warn("hbs: Error reading "+O+", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"),P.hbs={i18n:!1,helpers:!0},I(!1)
}}}}}),define("hbs!../templates/login",["hbs","hbs/handlebars"],function(t,e){var i=e.template(function(t,e,i){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),'<div class="row">\n	<div class="col-md-4 col-md-offset-4">\n		<form class="form-signin" role="form">\n			<h2 class="form-signin-heading">It\'s the chestfreezer!</h2>\n			<input id="username" type="username" class="form-control"\n				placeholder="Username" required autofocus> <input\n				id="password" type="password" class="form-control"\n				placeholder="Password" required>\n			<button id="login-button" class="btn btn-lg btn-primary btn-block">Log\n				in</button>\n		</form>\n		<div id="login-error-container">\n			<strong><p id="login-error"></p></strong>\n		</div>\n	</div>\n</div>'});return i}),define("hbs!../templates/header",["hbs","hbs/handlebars"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n,a,s="",r="function",o=this.escapeExpression;return s+='<h3>\n	Chestfreezer <small class="username">User: ',(a=i.username)?n=a.call(e,{hash:{}}):(a=e&&e.username,n=typeof a===r?a.call(e,{hash:{}}):a),s+=o(n)+'</small>\n</h3>\n<div class="pull-right">\n	<div class="btn-toolbar">\n		<div class="btn-group logout-button-container">\n			<button class="btn" onclick="window.location.reload()">Log\n				out</button>\n		</div>\n	</div>\n</div>\n'});return i}),define("../templates/helpers/getStatusColorClass.js",["hbs/handlebars"],function(t){function e(t){var e="";return"off"==t.state?e="red-color":"on"==t.state&&(e="blue-color"),e}return t.registerHelper("getStatusColorClass",e),e}),define("../templates/helpers/getStatusText.js",["hbs/handlebars"],function(t){function e(t){return"off"==t.state?"Off":"on"==t.state?"On":"N/A"}return t.registerHelper("getStatusText",e),e}),define("../templates/helpers/isStatusSelected.js",["hbs/handlebars"],function(t){function e(t,e){if("false"==e.overridden){if("overridden"==t)return"selected"}else if(t==e.state)return"selected"}return t.registerHelper("isStatusSelected",e),e}),define("hbs!../templates/device",["hbs","hbs/handlebars","../templates/helpers/getStatusColorClass.js","../templates/helpers/getStatusText.js","../templates/helpers/isStatusSelected.js"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n,a,s,r="",o="function",l=this.escapeExpression,h=i.helperMissing;return r+='<div class="status-text">\n	',(a=i.deviceName)?n=a.call(e,{hash:{}}):(a=e&&e.deviceName,n=typeof a===o?a.call(e,{hash:{}}):a),r+=l(n)+' Status: <span class="'+l((a=i.getStatusColorClass||e&&e.getStatusColorClass,s={hash:{}},a?a.call(e,e&&e.status,s):h.call(e,"getStatusColorClass",e&&e.status,s)))+'">'+l((a=i.getStatusText||e&&e.getStatusText,s={hash:{}},a?a.call(e,e&&e.status,s):h.call(e,"getStatusText",e&&e.status,s)))+'</span>\n</div>\n<div class="status-selector">\n	<select id="freezer-selector">\n		<option value="AUTO" '+l((a=i.isStatusSelected||e&&e.isStatusSelected,s={hash:{}},a?a.call(e,"overridden",e&&e.status,s):h.call(e,"isStatusSelected","overridden",e&&e.status,s)))+'>Auto</option>\n		<option value="ON" '+l((a=i.isStatusSelected||e&&e.isStatusSelected,s={hash:{}},a?a.call(e,"on",e&&e.status,s):h.call(e,"isStatusSelected","on",e&&e.status,s)))+'>On</option>\n		<option value="OFF" '+l((a=i.isStatusSelected||e&&e.isStatusSelected,s={hash:{}},a?a.call(e,"off",e&&e.status,s):h.call(e,"isStatusSelected","off",e&&e.status,s)))+">Off</option>\n	</select>\n</div>"});return i}),define("../templates/helpers/isActiveInstruction.js",["hbs/handlebars","model"],function(t,e){function i(t){return void 0==e.active_instruction?"":e.active_instruction.instruction_id==t?"table-active-highlight":void 0}return t.registerHelper("isActiveInstruction",i),i}),define("../templates/helpers/prettyDate.js",["hbs/handlebars","utils"],function(t,e){function i(t){return e.getUnixTimestampAsPrettyDate(t)}return t.registerHelper("prettyDate",i),i}),define("hbs!../templates/instructionsPanel",["hbs","hbs/handlebars","../templates/helpers/isActiveInstruction.js","../templates/helpers/prettyDate.js"],function(t,e){var i=e.template(function(t,e,i,n,a){function s(t){var e,n,a,s="";return s+='\n						<tr class="'+h((n=i.isActiveInstruction||t&&t.isActiveInstruction,a={hash:{}},n?n.call(t,t&&t.instruction_id,a):l.call(t,"isActiveInstruction",t&&t.instruction_id,a)))+'">\n							<td class="id-cell">',(n=i.instruction_id)?e=n.call(t,{hash:{}}):(n=t&&t.instruction_id,e=typeof n===c?n.call(t,{hash:{}}):n),s+=h(e)+"</td>\n							<td>",(n=i.target_temperature_C)?e=n.call(t,{hash:{}}):(n=t&&t.target_temperature_C,e=typeof n===c?n.call(t,{hash:{}}):n),s+=h(e)+"</td>\n							<td>",(n=i.description)?e=n.call(t,{hash:{}}):(n=t&&t.description,e=typeof n===c?n.call(t,{hash:{}}):n),s+=h(e)+"</td>\n							<td>"+h((n=i.prettyDate||t&&t.prettyDate,a={hash:{}},n?n.call(t,t&&t.from_timestamp,a):l.call(t,"prettyDate",t&&t.from_timestamp,a)))+"</td>\n							<td>"+h((n=i.prettyDate||t&&t.prettyDate,a={hash:{}},n?n.call(t,t&&t.to_timestamp,a):l.call(t,"prettyDate",t&&t.to_timestamp,a)))+"</td>\n						</tr>\n						"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var r,o="",l=i.helperMissing,h=this.escapeExpression,c="function",u=this;return o+='<div class="col-md-8 col-md-offset-2 content-row">\n	<div id="row">\n		<div class="col-md-8">\n			<div class="table-responsive">\n				<table id="instructions-table"\n					class="table .table-hover table-condensed">\n					<thead>\n						<tr>\n							<th>#</th>\n							<th>Target Temperature</th>\n							<th>Description</th>\n							<th>From</th>\n							<th>Until</th>\n						</tr>\n					</thead>\n					<tbody id=\'instructions-table-body\'>\n						',r=i.each.call(e,e&&e.instructions,{hash:{},inverse:u.noop,fn:u.program(1,s,a)}),(r||0===r)&&(o+=r),o+='\n					</tbody>\n				</table>\n			</div>\n		</div>\n		<div class="col-md-4">\n			<form role="form">\n				<div class="form-group">\n					<label for="targetTemperature">Target Temperature (Celsius)</label>\n					<input type="text" class="form-control" id="targetTemperature"\n						placeholder="Enter Celsius Temperature...">\n				</div>\n				<div class="form-group">\n					<label for="description">Description</label> <input type="textarea"\n						class="form-control" id="description"\n						placeholder="Describe the point of this instruction...">\n				</div>\n				<div class="form-group">\n					<label for="datetime-from">From</label>\n					<div class=\'input-group date\' id=\'datetime-from\'>\n						<input type=\'text\' id=\'datetime-from-value\' class="form-control"\n							placeholder="Start Date..."> <span\n							class="input-group-addon"><span\n							class="glyphicon glyphicon-calendar"></span></span>\n					</div>\n				</div>\n				<div class="form-group">\n					<label for="datetime-to">Until</label>\n					<div class=\'input-group date\' id=\'datetime-to\'>\n						<input type=\'text\' id=\'datetime-to-value\' class="form-control"\n							placeholder="End Date..." /> <span class="input-group-addon"><span\n							class="glyphicon glyphicon-calendar"></span></span>\n					</div>\n				</div>\n				<button id="save-instruction" class="btn btn-default">Save</button>\n				<button id="delete-instruction" class="btn btn-default">Delete</button>\n			</form>\n		</div>\n	</div>\n</div>\n'});return i}),define("../templates/helpers/shouldBeChecked.js",["hbs/handlebars"],function(t){function e(t){return"True"===t?"checked":void 0}return t.registerHelper("shouldBeChecked",e),e}),define("hbs!../templates/probePanel",["hbs","hbs/handlebars","../templates/helpers/shouldBeChecked.js"],function(t,e){var i=e.template(function(t,e,i,n,a){function s(t){var e,n,a,s="";return s+="			\n					<tr>		\n						<td>",(n=i.probe_id)?e=n.call(t,{hash:{}}):(n=t&&t.probe_id,e=typeof n===l?n.call(t,{hash:{}}):n),s+=h(e)+'</td>\n						<td contenteditable="true">',(n=i.name)?e=n.call(t,{hash:{}}):(n=t&&t.name,e=typeof n===l?n.call(t,{hash:{}}):n),s+=h(e)+'</td>\n						<td><input class="master-checkbox" type="checkbox" '+h((n=i.shouldBeChecked||t&&t.shouldBeChecked,a={hash:{}},n?n.call(t,t&&t.master,a):c.call(t,"shouldBeChecked",t&&t.master,a)))+"></td>						\n					</tr>\n					"}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var r,o="",l="function",h=this.escapeExpression,c=i.helperMissing,u=this;return o+='<div class="col-md-6 col-md-offset-3 content-row">\n	<div class="row">\n		<div class="table-responsive">\n			<table class="table table-condensed">\n				<thead>\n					<tr>\n						<th>Probe Hardware ID</th>\n						<th>Probe Name</th>\n						<th>Master</th>						\n					</tr>\n				</thead>\n				<tbody id=\'probes-table-body\'>\n					',r=i.each.call(e,e&&e.probes,{hash:{},inverse:u.noop,fn:u.program(1,s,a)}),(r||0===r)&&(o+=r),o+='\n				</tbody>\n			</table>\n		</div>		\n	</div>\n	<div class="row update-probe-button-row">\n		<input id="update-probe-button" class="btn" type="button" value="Update"> \n	</div>\n</div>\n'});return i}),define("hbs!../templates/logPanel",["hbs","hbs/handlebars"],function(t,e){var i=e.template(function(t,e,i){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers),'<div class="col-md-8 col-md-offset-2 content-row">\n	<div class="row">\n		<textarea readonly id="log-textarea" readonlyrows="15" cols="50"></textarea>\n	</div>\n	<div class="row log-checkbox-row">\n		<input id="dont-show-temp-updates" type="checkbox"> Do not show temperature updates \n	</div>\n</div>\n'});return i}),define("view",["jquery","log","utils","bootbox","chartjs","canvasjs","hbs/handlebars","hbs!../templates/login","hbs!../templates/header","hbs!../templates/device","hbs!../templates/instructionsPanel","hbs!../templates/probePanel","hbs!../templates/logPanel"],function(t,e,i,n,a,s,r,o,l,h,c,u,d){return{chart:{},showLogInterval:{},alert:function(t){n.alert(t)},showMainPageForUser:function(e){t("#main-page").show(),t("#header").html(l({username:e}))},initializeGauge:function(){t("#temperature-gauge").dxCircularGauge({scale:{majorTick:{color:"black",tickInterval:10},minorTick:{visible:!0,color:"black",tickInterval:1},startValue:-20,endValue:80},subvalueIndicator:{color:"green"},subvalues:[],rangeContainer:{offset:5,ranges:[{startValue:-20,endValue:0,color:"blue"},{startValue:0,endValue:80,color:"red"}]}})},initializeChart:function(t){var e=new CanvasJS.Chart("temperature-chart",{zoomEnabled:!0,title:{text:"Temperature Readings"},toolTip:{shared:!0},axisY:{suffix:" ℃",includeZero:!1},data:t});this.chart=e,e.render()},setTargetTemperature:function(e,i){this.enableTemperatureOverridePanel(i),t("#taget-temperature-checkbox").prop("checked",i),i&&t("#taget-temperature-textfield").val(e),t("#temperature-gauge").dxCircularGauge("instance").subvalues(e?[e]:[])},enableTemperatureOverridePanel:function(e){t("#taget-temperature-textfield").prop("disabled",!e),t("#taget-temperature-button").prop("disabled",!e),e||t("#taget-temperature-textfield").val("")},setCurrentTemperature:function(e){var i=r.compile("<span>Current Temperature:</span> <strong>{{temperature}} &degC</<strong>");t("#temperature-reading").html(i({temperature:e})),gauge=t("#temperature-gauge").dxCircularGauge("instance"),gauge.value(e)},updateDevices:function(e){freezerHtml=h({status:e.freezer,deviceName:"Freezer"}),t("#freezer-status").html(freezerHtml),heaterHtml=h({status:e.heater,deviceName:"Heater"}),t("#heater-status").html(heaterHtml)},handleError:function(i){e.log("Error: "+i),t("#error-message-panel").addClass("alert alert-danger"),t("#error-message").html("<strong>"+i+"</strong>"),setTimeout(function(){t("#error-message-panel").removeClass("alert alert-danger"),t("#error-message").html("")},5e3)},showLoginForm:function(e){e?t("#login-form").append(o):t("#login-form").hide()},setActiveMenuButton:function(e){t("#content").html(""),t(".chestfreezer-menu-button").removeClass("active"),t(e).toggleClass("active"),t(".bootstrap-datetimepicker-widget dropdown-menu").remove(),clearInterval(this.showLogInterval)},setInstructionForm:function(e){void 0==e?(t("#save-instruction").html("Save"),e={}):t("#save-instruction").html("Update"),t("#targetTemperature").val(e.target_temperature_C),t("#description").val(e.description),datetimeFrom=i.getUnixTimestampAsPrettyDate(e.from_timestamp),t("#datetime-from-value").val(datetimeFrom),datetimeTo=i.getUnixTimestampAsPrettyDate(e.to_timestamp),t("#datetime-to-value").val(datetimeTo)},setInstructionRowHighlighted:function(t){t.toggleClass("table-highlight").siblings().removeClass("table-highlight")},showInstructions:function(e){if(t("#instruction-menu-button").hasClass("active")){var i=c({instructions:e});t("#content").html(i),t("#datetime-from").datetimepicker(),t("#datetime-to").datetimepicker()}},showProbes:function(e){if(t("#probe-menu-button").hasClass("active")){var i=u({probes:e});t("#content").html(i)}},getProbesFromTable:function(){return result=[],t("#probes-table-body tr").each(function(){tds=t(this).children("td");var e="False";tds[2].firstChild.checked&&(e="True"),tableProbe={probe_id:tds[0].textContent,name:tds[1].textContent,master:e},result.push(tableProbe)}),result},showLog:function(){if(reference=this,t("#log-menu-button").hasClass("active")){var i=d();t("#content").html(i),this.setLogTextareaText(e.getAll()),this.showLogInterval=setInterval(function(){reference.refreshLog()},1e3)}},setLogTextareaText:function(e){var i=t("#log-textarea");i.val(e),i.scrollTop(i[0].scrollHeight-i.height())},refreshLog:function(){this.setLogTextareaText(e.getAll())},displayActiveInstruction:function(e){var n="No active instruction";void 0!=e&&(prettyUntil=i.getUnixTimestampAsPrettyDate(e.to_timestamp),n="Will maintain "+e.target_temperature_C+"℃ until "+prettyUntil);var a=r.compile('<span class="status-text instruction-text"><em>{{ instructionText }}</em></<span>');t("#active-instruction").html(a({instructionText:n}))}}}),define("apiCaller",["jquery","utils","configuration","model","view"],function(t,e,i,n,a){return{makeAjaxCallToBackend:function(n,s,r,o,l,h){t.ajax({type:n,url:i.rootUrl+s,async:r,data:h,dataType:"json",beforeSend:function(t){t.setRequestHeader("Authorization",e.getBasicAuthCredentials(i.username,i.password))},success:function(t){o(t)},error:function(t,e,i){a.handleError(i),void 0!=l&&l(t,e,i)}})},removeDeviceOverride:function(t){formData="override=False",this.makeAjaxCallToBackend("POST","/device/"+t,!0,function(){a.alert("Device override removed.")},function(t){a.alert("Could not remove device override: "+t.responseText+".")},formData)},setDeviceOverridenState:function(t,i){formData="state="+i,this.makeAjaxCallToBackend("POST","/device/"+t,!0,function(){a.alert(e.capitaliseFirstLetter(t)+" succesfully overridden.")},function(t){a.alert("Could not set override: "+t.responseText+".")},formData)},removeTemperatureOverride:function(){formData="override=False",this.makeAjaxCallToBackend("POST","/temperature/target",!0,function(){a.alert("Temperature override removed.")},function(t){a.alert("Could not remove temperature override: "+t.responseText+".")},formData)},setTemperatureOverride:function(t){formData="target_temperature_C="+t,this.makeAjaxCallToBackend("POST","/temperature/target",!0,function(){a.alert("Temperature override succesfully set.")},function(t){a.alert("Could not set temperature override: "+t.responseText+".")},formData)},getTargetTemperature:function(t){this.makeAjaxCallToBackend("GET","/temperature/target",!0,function(e){void 0==e?(targetTemperature="",isOverride=!1):(targetTemperature=e.target_temperature_C,isOverride="true"==e.overridden),t(targetTemperature,isOverride)})},updateProbeInfo:function(t){this.makeAjaxCallToBackend("GET","/probe",!0,function(e){n.probes=e,void 0!=t&&t()})},updateDeviceInfo:function(t){this.makeAjaxCallToBackend("GET","/device",!0,function(e){n.devices=e,void 0!=t&&t()})},updateInstructions:function(t){reference=this,this.makeAjaxCallToBackend("GET","/instruction",!0,function(e){n.instructions=e,reference.updateActiveInstruction(t)})},updateActiveInstruction:function(t){this.makeAjaxCallToBackend("GET","/instruction?now",!0,function(e){n.active_instruction=e,void 0!=t&&t()})},updateProbe:function(t){formData="name="+t.name+"&master="+t.master,console.log("updating probe with: "+formData),this.makeAjaxCallToBackend("PUT","/probe/"+t.probe_id,!0,function(){},function(t){a.alert("Could not update probe: "+t.responseText+".")},formData)},updateInstruction:function(t,e){this.makeAjaxCallToBackend("PUT","/instruction/"+e,!0,function(){a.alert("Instruction successfully updated.")},function(t){a.alert("Could not update instruction: "+t.responseText+".")},t)},createNewInstruction:function(t){this.makeAjaxCallToBackend("POST","/instruction",!0,function(){a.alert("Instruction successfully created.")},function(t){a.alert("Could not create instruction: "+t.responseText+".")},t)},doAfterSignin:function(e,n,s){t("#login-button").button("loading"),i.username=e,i.password=n,this.makeAjaxCallToBackend("GET","/probe",!0,function(){s()},function(e){t("#login-button").button("reset");var i="Error "+e.status+": "+e.statusText;401==e.status&&(i+=". Your IP is logged and an administrator has been notified."),a.alert(i)})},updateTemperaturesForTime:function(t,e,i){targetUrl="/temperature?start="+t+"&end="+e,this.makeAjaxCallToBackend("GET",targetUrl,!0,function(t){for(var e in t)tempReading=t[e],i(tempReading)})}}}),requirejs.config({paths:{jquery:"http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min",bootstrap:"//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min",bootbox:"lib/bootbox.min",globalize:"http://ajax.aspnetcdn.com/ajax/globalize/0.1.1/globalize.min",domReady:"lib/domReady",chartjs:"http://cdn3.devexpress.com/jslib/13.2.9/js/dx.chartjs",canvasjs:"lib/canvasjs.min",moment:"lib/moment.min","bootstrap-datetimepicker":"lib/bootstrap-datetimepicker.min",Base64:"lib/Base64",hbs:"lib/hbs"},shim:{bootstrap:{deps:["jquery","moment","bootstrap-datetimepicker"]},chartjs:{deps:["jquery"]},Base64:{exports:"Base64"},chartjs:{deps:["globalize"]}},hbs:{templateExtension:"html",helperPathCallback:function(t){return"/templates/helpers/"+t+".js"}}}),require(["domReady","utils","apiCaller","model","configuration","view","log","bootstrap"],function(t,e,i,n,a,s,r){t(function(){r.log("Main function start"),a.showLoginForm?(s.showLoginForm(!0),$("#login-button").click(function(){return i.doAfterSignin($("#username").val(),$("#username").val(),function(){s.alert("Welcome to the Chestfreezer, "+a.username+"."),s.showLoginForm(!1),main(t,e,i,n,a,s,r)}),!1})):main(t,e,i,n,a,s,r)})}),define("chestfreezer",function(){});